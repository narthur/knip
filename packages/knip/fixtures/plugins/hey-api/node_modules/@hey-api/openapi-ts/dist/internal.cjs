'use strict';var jsonSchemaRefParser=require('@hey-api/json-schema-ref-parser'),Bt=require('path'),c12=require('c12'),h=require('typescript'),os$1=require('os'),hi=require('fs'),Vr=require('ansi-colors'),url=require('url');var _documentCurrentScript=typeof document!=='undefined'?document.currentScript:null;function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var Bt__default=/*#__PURE__*/_interopDefault(Bt);var h__default=/*#__PURE__*/_interopDefault(h);var hi__default=/*#__PURE__*/_interopDefault(hi);var Vr__default=/*#__PURE__*/_interopDefault(Vr);var Ss=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[i,o]of n)if(o===null)t.delete(i);else if(Array.isArray(o))for(let p of o)t.append(i,p);else o!==void 0&&t.set(i,typeof o=="object"?JSON.stringify(o):o);}return t};var $a=async({fetchOptions:e,inputPath:t,timeout:r,watch:n})=>{let i=new jsonSchemaRefParser.$RefParser,o=jsonSchemaRefParser.getResolvedInput({pathOrUrlOrSchema:t}),p,a,c;if(o.type==="url"){if(n.lastValue&&n.isHeadMethodSupported!==false){try{let f=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"HEAD",...e,headers:Ss(e?.headers,n.headers)},timeout:r,url:o.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok&&n.isHeadMethodSupported)return {error:"not-ok",response:c};if(n.isHeadMethodSupported===void 0&&(n.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(a===void 0){let f=c.headers.get("ETag");f&&(a=f!==n.headers.get("If-None-Match"),a&&n.headers.set("If-None-Match",f));}if(a===void 0){let f=c.headers.get("Last-Modified");f&&(a=f!==n.headers.get("If-Modified-Since"),a&&n.headers.set("If-Modified-Since",f));}if(a===false)return {error:"not-modified",response:c}}try{let f=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:o.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok)return {error:"not-ok",response:c};if(p=c.body?await c.arrayBuffer():new ArrayBuffer(0),a===void 0){let f=new TextDecoder().decode(p);a=f!==n.lastValue,n.lastValue=f;}}else n.lastValue?a=false:n.lastValue=o.type;return a===false?{error:"not-modified",response:c}:{data:await i.bundle({arrayBuffer:p,pathOrUrlOrSchema:void 0,resolvedInput:o})}};var Is=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var tt={_dependencies:["@hey-api/typescript"],_tags:["client"],baseUrl:true,bundle:false,exportFromIndex:false,output:"client"};var Re="client",ne=e=>{let t=j(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},j=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?._tags?.includes("client"))return r}return {name:""}};var vt=/^[^$_\p{ID_Start}]+/u,ae=/^-?\d+(\.\d+)?$/,Ts=/^(document|history|location|navigator|window)$/g,Cs=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,pe=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,Ps=/^(global|process|Buffer)$/g,js=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,ge=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var Ve=e=>(e||e==="")&&(ge.lastIndex=0,!ge.test(e))?`'${e}'`:e,er=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,M=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>os$1.EOL+r.trim());var As,T=()=>{let e=As,t=j(e);return e.client=t,e},Es=e=>(As=e,T()),U=e=>j(e).name.startsWith("legacy/"),yt=e=>{if(U(e))return e.name};var qa=h__default.default.createPrinter({newLine:h__default.default.NewLineKind.LineFeed,removeComments:false}),Ns=e=>h__default.default.createSourceFile("",e,h__default.default.ScriptTarget.ESNext,false,h__default.default.ScriptKind.TS),Ma=Ns(""),Fa=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function Ie({node:e,unescape:t=false}){let r=qa.printNode(h__default.default.EmitHint.Unspecified,e,Ma);if(!t)return r;try{return Fa(r)}catch{return T().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}function ks(e){return Ns(e).statements[0]}var I=({text:e})=>h__default.default.factory.createIdentifier(e),vs=()=>h__default.default.factory.createThis(),K=({keyword:e})=>{let t=ln({keyword:e});return h__default.default.factory.createModifier(t)},$s=({initializer:e,modifier:t,name:r,type:n})=>h__default.default.factory.createPropertyDeclaration(t?[K({keyword:t})]:void 0,r,void 0,n,e),se={boolean:e=>e?h__default.default.factory.createTrue():h__default.default.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let n=I({text:r});if(e){let i=I({text:e});return h__default.default.factory.createExportSpecifier(t,n,i)}return h__default.default.factory.createExportSpecifier(t,void 0,n)},import:({alias:e,asType:t=false,name:r})=>{let n=I({text:r});if(e){let i=I({text:e});return h__default.default.factory.createImportSpecifier(t,n,i)}return h__default.default.factory.createImportSpecifier(t,void 0,n)},number:e=>e<0?h__default.default.factory.createPrefixUnaryExpression(h__default.default.SyntaxKind.MinusToken,h__default.default.factory.createNumericLiteral(Math.abs(e))):h__default.default.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=er(r));let n=r.includes("'")&&r.includes('"'),i=r.includes(`
`),o=r.startsWith("`"),p=r.startsWith("\\`")&&r.endsWith("\\`");return (i||n||o)&&!p&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?I({text:r}):gt({text:r})}},ht=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",rt=e=>e!==void 0,La=({commentObject:e,node:t})=>{let r=e.lines.filter(p=>!!p||p==="");if(!r.length)return;if(!e.jsdoc){for(let p of r)h__default.default.addSyntheticLeadingComment(t,h__default.default.SyntaxKind.SingleLineCommentTrivia,` ${p}`,true);return}let n=r.map((p,a)=>{let c=p;return a!==r.length&&(c=`${c}
`),h__default.default.factory.createJSDocText(c)}),i=h__default.default.factory.createJSDocComment(h__default.default.factory.createNodeArray(n),void 0),o=Ie({node:i,unescape:true}).replace("/*","").replace("*  */","");h__default.default.addSyntheticLeadingComment(t,h__default.default.SyntaxKind.MultiLineCommentTrivia,o,true);},G=({comments:e=[],node:t})=>{let r=!!e.find(i=>typeof i=="object"&&i),n=e;r||(n=[{jsdoc:true,lines:e}]);for(let i of n)La({commentObject:i,node:t});};var J=(e,t)=>h__default.default.isTypeNode(e)?e:typeof e=="number"?h__default.default.factory.createLiteralTypeNode(se.number(e)):ce({typeArguments:t?.map(r=>J(r)),typeName:e}),un=({expression:e,name:t})=>h__default.default.factory.createPropertyAccessChain(e,h__default.default.factory.createToken(h__default.default.SyntaxKind.QuestionDotToken),t),Ce=({expression:e,isOptional:t,name:r})=>{let n=typeof e=="string"?I({text:e}):e;if(t&&typeof r!="number")return un({expression:n,name:r});if(typeof r=="string"){if(ge.lastIndex=0,!ge.test(r)){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let o=I({text:r});return h__default.default.factory.createElementAccessExpression(n,o)}let i=I({text:r});return h__default.default.factory.createPropertyAccessExpression(n,i)}if(typeof r=="number"){let i=h__default.default.factory.createNumericLiteral(r);return h__default.default.factory.createElementAccessExpression(n,i)}return h__default.default.factory.createPropertyAccessExpression(n,r)},dn=()=>h__default.default.factory.createNull(),Te=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:n,value:i})=>{if(i===null)return dn();if(Array.isArray(i))return yn({elements:i});if(typeof i=="object")return Nr({identifiers:e,obj:i,shorthand:r});if(typeof i=="number")return se.number(i);if(typeof i=="boolean")return se.boolean(i);if(typeof i=="string"){if(t){let o=i.split(".");return Ce({expression:o[0],name:o[1]})}return se.string(i,n)}},tr=e=>e.map(t=>{if("destructure"in t)return $t({name:h__default.default.factory.createObjectBindingPattern(t.destructure.map(n=>"destructure"in n?void 0:h__default.default.factory.createBindingElement(void 0,void 0,I({text:n.name}),void 0)).filter(Boolean)),type:t.type!==void 0?J(t.type):void 0});let r=t.accessLevel?[K({keyword:t.accessLevel})]:[];return t.isReadOnly&&r.push(K({keyword:"readonly"})),$t({initializer:t.default!==void 0?Te({value:t.default}):void 0,modifiers:r,name:I({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?J(t.type):void 0})}),ln=({keyword:e})=>{switch(e){case "any":return h__default.default.SyntaxKind.AnyKeyword;case "async":return h__default.default.SyntaxKind.AsyncKeyword;case "boolean":return h__default.default.SyntaxKind.BooleanKeyword;case "export":return h__default.default.SyntaxKind.ExportKeyword;case "never":return h__default.default.SyntaxKind.NeverKeyword;case "number":return h__default.default.SyntaxKind.NumberKeyword;case "private":return h__default.default.SyntaxKind.PrivateKeyword;case "protected":return h__default.default.SyntaxKind.ProtectedKeyword;case "public":return h__default.default.SyntaxKind.PublicKeyword;case "readonly":return h__default.default.SyntaxKind.ReadonlyKeyword;case "static":return h__default.default.SyntaxKind.StaticKeyword;case "string":return h__default.default.SyntaxKind.StringKeyword;case "undefined":return h__default.default.SyntaxKind.UndefinedKeyword;case "unknown":return h__default.default.SyntaxKind.UnknownKeyword;case "void":return h__default.default.SyntaxKind.VoidKeyword;default:throw new Error(`unsupported syntax kind keyword "${e}"`)}},xt=({keyword:e})=>{let t=ln({keyword:e});return h__default.default.factory.createKeywordTypeNode(t)},rr=e=>e.map(t=>h__default.default.isTypeParameterDeclaration(t)?t:nr({constraint:t.extends?typeof t.extends=="string"?xt({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?ht(t.default)?t.default:h__default.default.factory.createLiteralTypeNode(t.default?h__default.default.factory.createTrue():h__default.default.factory.createFalse()):void 0,name:t.name})),ws=({operator:e,type:t})=>{let r=e==="keyof"?h__default.default.SyntaxKind.KeyOfKeyword:e==="readonly"?h__default.default.SyntaxKind.ReadonlyKeyword:h__default.default.SyntaxKind.UniqueKeyword;return h__default.default.factory.createTypeOperatorNode(r,t)},nr=({constraint:e,defaultType:t,modifiers:r,name:n})=>h__default.default.factory.createTypeParameterDeclaration(r,n,e,t),Ar=({members:e,nameType:t,questionToken:r,readonlyToken:n,type:i,typeParameter:o})=>h__default.default.factory.createMappedTypeNode(n,o,t,r,i,e),qs=({literal:e})=>h__default.default.factory.createLiteralTypeNode(e),Er=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:i,statements:o=[],types:p=[]})=>{let a=h__default.default.factory.createArrowFunction(e?[K({keyword:"async"})]:void 0,p?rr(p):void 0,tr(n),i?J(i):void 0,void 0,Array.isArray(o)?me({multiLine:r,statements:o}):o);return G({comments:t,node:a}),a},Ms=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:i,statements:o=[],types:p=[]})=>{let a=h__default.default.factory.createFunctionExpression(e?[K({keyword:"async"})]:void 0,void 0,void 0,p?rr(p):void 0,tr(n),i?J(i):void 0,me({multiLine:r,statements:o}));return G({comments:t,node:a}),a},yn=({elements:e,multiLine:t=false})=>h__default.default.factory.createArrayLiteralExpression(e.map(n=>ht(n)?n:Te({value:n})).filter(rt),t||!Array.isArray(e[0])&&typeof e[0]=="object"),Fs=({expression:e})=>h__default.default.factory.createAwaitExpression(e),Ls=({parameters:e=[],returnType:t,typeParameters:r})=>h__default.default.factory.createFunctionTypeNode(r,e,t),Nr=({comments:e,identifiers:t=[],multiLine:r=true,obj:n,shorthand:i,unescape:o=false})=>{let p=Array.isArray(n)?n.map(c=>{let m=false;if("key"in c){let{key:l}=c;m=l===c.value,(l.match(/^[0-9]/)&&l.match(/\D+/g)||l.match(/\W/g)||l==="")&&!l.startsWith("'")&&!l.endsWith("'")&&(c.key=`'${l}'`);}let f;if("spread"in c){let l=ht(c.spread)?c.spread:I({text:c.spread});f=h__default.default.factory.createSpreadAssignment(c.assertion?ir({expression:l,type:typeof c.assertion=="string"?xt({keyword:c.assertion}):c.assertion}):l);}else if(c.shorthand||i&&m)f=h__default.default.factory.createShorthandPropertyAssignment(c.value);else {let l=ht(c.value)?c.value:Array.isArray(c.value)&&(!c.value.length||typeof c.value[0]=="object")?Nr({multiLine:r,obj:c.value,shorthand:i,unescape:o}):Te({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:i,unescape:o,value:c.value});if(!l)return;t.includes(c.key)&&!h__default.default.isObjectLiteralExpression(l)&&(l=I({text:c.value})),f=jr({initializer:l,name:c.key});}return G({comments:c.comments,node:f}),f}).filter(rt):Object.entries(n).map(([c,m])=>{let f=Te({identifiers:t.includes(c)?Object.keys(m):[],shorthand:i,unescape:o,value:m});if(!f)return;t.includes(c)&&!h__default.default.isObjectLiteralExpression(f)&&(f=I({text:m}));let l=c===m;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),i&&l?h__default.default.factory.createShorthandPropertyAssignment(m):jr({initializer:f,name:c})}).filter(rt),a=h__default.default.factory.createObjectLiteralExpression(p,r);return G({comments:e,node:a}),a},Ds=({comments:e={},leadingComment:t,name:r,obj:n})=>{let i=Array.isArray(n)?n.map(p=>{let a=_a({initializer:Te({value:p.value}),name:p.key});return G({comments:p.comments,node:a}),a}):Object.entries(n).map(([p,a])=>{let c=h__default.default.factory.createEnumMember(p,Te({unescape:true,value:a}));return G({comments:e[p],node:c}),c}),o=h__default.default.factory.createEnumDeclaration([K({keyword:"export"})],I({text:r}),i);return G({comments:t,node:o}),o},_a=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.includes("'")?r=gt({isSingleQuote:false,text:r}):r=Ve(r)),h__default.default.factory.createEnumMember(r,e)},_s=({name:e,statements:t})=>h__default.default.factory.createModuleDeclaration([K({keyword:"export"})],I({text:e}),h__default.default.factory.createModuleBlock(t),h__default.default.NodeFlags.Namespace),Bs=({indexType:e,objectType:t})=>h__default.default.factory.createIndexedAccessTypeNode(t,e),gt=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),h__default.default.factory.createStringLiteral(t,e)),Vs=({condition:e,whenFalse:t,whenTrue:r})=>h__default.default.factory.createConditionalExpression(e,h__default.default.factory.createToken(h__default.default.SyntaxKind.QuestionToken),r,h__default.default.factory.createToken(h__default.default.SyntaxKind.ColonToken),t),Ks=({text:e})=>h__default.default.factory.createTypeOfExpression(I({text:e})),Ws=({comment:e,exportType:t,name:r,type:n,typeParameters:i=[]})=>{let o=h__default.default.factory.createTypeAliasDeclaration(t?[K({keyword:"export"})]:void 0,I({text:r}),rr(i),J(n));return G({comments:e,node:o}),o},ce=({typeArguments:e,typeName:t})=>h__default.default.factory.createTypeReferenceNode(t,e),Us=({type:e})=>h__default.default.factory.createParenthesizedType(e),$t=({initializer:e,modifiers:t,name:r,required:n=true,type:i})=>h__default.default.factory.createParameterDeclaration(t,void 0,r,n?void 0:h__default.default.factory.createToken(h__default.default.SyntaxKind.QuestionToken),i,e),sr=({argumentsArray:e,expression:t,typeArguments:r})=>h__default.default.factory.createNewExpression(t,r,e),Xs=({awaitModifier:e,expression:t,initializer:r,statement:n})=>h__default.default.factory.createForOfStatement(e,r,t,n),Qs=({left:e,right:t})=>h__default.default.factory.createAssignment(e,t),me=({multiLine:e=true,statements:t})=>h__default.default.factory.createBlock(t,e),jr=({initializer:e,name:t})=>h__default.default.factory.createPropertyAssignment(t,e),Hs=({flags:e=[],text:t})=>{let r=t.startsWith("/")&&t.endsWith("/")?t:`/${t}/`;return h__default.default.factory.createRegularExpressionLiteral(`${r}${e.join("")}`)},ir=({expression:e,type:t})=>h__default.default.factory.createAsExpression(e,t),zs=({value:e})=>{let t=[],r="";for(let i of e.slice(0).reverse())if(typeof i=="string")r=`${i}${r}`;else {let o=t.length?h__default.default.factory.createTemplateMiddle(r):h__default.default.factory.createTemplateTail(r),p=h__default.default.factory.createTemplateLiteralTypeSpan(i,o);t.push(p),r="";}return h__default.default.factory.createTemplateLiteralType(h__default.default.factory.createTemplateHead(r),t.reverse())};var Gs=({module:e})=>h__default.default.factory.createExportDeclaration(void 0,false,void 0,se.string(e)),Pe=({functionName:e,parameters:t=[],types:r})=>{let n=typeof e=="string"?I({text:e}):e,i=t.filter(p=>p!==void 0).map(p=>typeof p=="string"?I({text:p}):p);return h__default.default.factory.createCallExpression(n,r,i)},Js=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(c=>typeof c!="object"||!c.asType),i=r.map(c=>{let m=typeof c=="string"?{name:c}:c;return se.export({alias:m.alias,asType:n&&m.asType,name:m.name})}),o=h__default.default.factory.createNamedExports(i),p=se.string(t);return h__default.default.factory.createExportDeclaration(void 0,!n,o,p)},Zs=({assertion:e,comment:t,destructure:r,exportConst:n,expression:i,name:o,typeName:p})=>{let a=e?ir({expression:i,type:typeof e=="string"?ce({typeName:e}):e}):i,c=I({text:o}),m=h__default.default.factory.createVariableDeclaration(r?h__default.default.factory.createObjectBindingPattern([h__default.default.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,p?typeof p=="string"?ce({typeName:p}):p:void 0,a),f=h__default.default.factory.createVariableStatement(n?[K({keyword:"export"})]:void 0,h__default.default.factory.createVariableDeclarationList([m],h__default.default.NodeFlags.Const));return G({comments:t,node:f}),f},Ys=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(f=>typeof f!="object"||!f.asType),i,o=[];r.forEach(f=>{let l=typeof f=="string"?{name:f}:f;l.name==="*"&&l.alias?i=l:o.push(se.import({alias:l.alias,asType:n&&l.asType,name:l.name}));});let p=i?h__default.default.factory.createNamespaceImport(I({text:i.alias})):h__default.default.factory.createNamedImports(o),a=h__default.default.factory.createImportClause(!n,void 0,p),c=se.string(t);return h__default.default.factory.createImportDeclaration(void 0,a,c)};var ei=({accessLevel:e,comment:t,multiLine:r=true,parameters:n=[],statements:i=[]})=>{let o=e?[K({keyword:e})]:void 0,p=h__default.default.factory.createConstructorDeclaration(o,tr(n),me({multiLine:r,statements:i}));return G({comments:t,node:p}),p},ti=({accessLevel:e,comment:t,isStatic:r=false,multiLine:n=true,name:i,parameters:o=[],returnType:p,statements:a=[],types:c=[]})=>{let m=e?[K({keyword:e})]:[];r&&m.push(K({keyword:"static"}));let f=h__default.default.factory.createMethodDeclaration(m,void 0,I({text:i}),void 0,c?rr(c):void 0,tr(o),p?J(p):void 0,me({multiLine:n,statements:a}));return G({comments:t,node:f}),f},ri=({decorator:e,exportClass:t,extendedClasses:r,name:n,nodes:i})=>{let o=[];t&&o.push(K({keyword:"export"})),e&&o.unshift(h__default.default.factory.createDecorator(Pe({functionName:e.name,parameters:e.args.map(a=>Te({value:a})).filter(rt)})));let p=[];if(r)for(let a of r)p.push(h__default.default.factory.createHeritageClause(h__default.default.SyntaxKind.ExtendsKeyword,[h__default.default.factory.createExpressionWithTypeArguments(I({text:a}),void 0)]));return h__default.default.factory.createClassDeclaration(o,I({text:n}),void 0,p,i)};var Ot=({expression:e})=>h__default.default.factory.createExpressionStatement(e);var kr=({expression:e})=>h__default.default.factory.createReturnStatement(e),si=({args:e=[],name:t,types:r=[]})=>{let n=r.map(a=>ce({typeName:a})),i=e.map(a=>h__default.default.isExpression(a)?a:I({text:a})).filter(rt),o=Pe({functionName:t,parameters:i,types:n});return kr({expression:o})},ii=({expression:e})=>kr({expression:typeof e=="string"?I({text:e}):e});var wt=e=>e.slice(1).reduce((t,r)=>(ge.lastIndex=0,ge.test(r)?un({expression:t,name:r}):h__default.default.factory.createElementAccessChain(t,h__default.default.factory.createToken(h__default.default.SyntaxKind.QuestionDotToken),I({text:r}))),I({text:e[0]})),vr=e=>e.slice(1).reduce((t,r)=>Ce({expression:t,name:r}),I({text:e[0]})),oi=({expressions:e})=>e.reduce((r,n)=>Ce({expression:r,name:n})),$r=({left:e,operator:t="=",right:r})=>h__default.default.factory.createBinaryExpression(e,t==="="?h__default.default.SyntaxKind.EqualsToken:t==="==="?h__default.default.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?h__default.default.SyntaxKind.QuestionQuestionToken:h__default.default.SyntaxKind.InKeyword,typeof r=="string"?I({text:r}):r),qt=({elseStatement:e,expression:t,thenStatement:r})=>h__default.default.factory.createIfStatement(t,r,e),ai=({path:e})=>{let t=wt(e),r=vr(e),n=me({statements:[Ot({expression:$r({left:r,right:sr({argumentsArray:[r],expression:I({text:"Date"})})})})]});return qt({expression:t,thenStatement:n})},pi=({path:e,transformerName:t})=>{let r=wt(e),n=vr(e),i=me({statements:[Ot({expression:Pe({functionName:t,parameters:[n]})})]});return [qt({expression:r,thenStatement:i})]},ci=({path:e,transformerName:t})=>{let r=wt(e),n=vr(e);return qt({expression:Pe({functionName:Ce({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:me({statements:[Ot({expression:h__default.default.factory.createCallChain(Ce({expression:n,name:"forEach"}),void 0,void 0,[I({text:t})])})]})})},mi=({parameterName:e})=>{let t=I({text:"Date"});return sr({argumentsArray:[I({text:e})],expression:t})},fi=({path:e,transformExpression:t})=>{let r=wt(e),n=vr(e);return qt({expression:Pe({functionName:Ce({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:me({statements:[Ot({expression:$r({left:n,right:h__default.default.factory.createCallChain(Ce({expression:n,name:"map"}),void 0,void 0,[Er({parameters:[{name:"item"}],statements:t})])})})]})})};var Ha=ce({typeName:"null"}),Mt=({isNullable:e,node:t})=>e?h__default.default.factory.createUnionTypeNode([t,Ha]):t,hn=({indexKey:e,indexProperty:t,isNullable:r,properties:n,useLegacyResolution:i})=>{let p=n.map(m=>{let f=m.isReadOnly?[K({keyword:"readonly"})]:void 0,l=m.isRequired!==false?void 0:h__default.default.factory.createToken(h__default.default.SyntaxKind.QuestionToken),u=J(m.type);let d=h__default.default.factory.createPropertySignature(f,i||typeof m.name=="string"&&m.name.match(ge)||typeof m.name!="string"&&h__default.default.isPropertyName(m.name)?m.name:gt({text:m.name}),l,u);return G({comments:m.comment,node:d}),d}),a=false;if(t)if(!n.length&&e){let m=Ar({questionToken:h__default.default.factory.createToken(h__default.default.SyntaxKind.QuestionToken),type:xt({keyword:"string"}),typeParameter:nr({constraint:ce({typeName:e}),name:I({text:String(t.name)})})});p.push(m),a=true;}else {let m=t.isReadOnly?[K({keyword:"readonly"})]:void 0,f=h__default.default.factory.createIndexSignature(m,[$t({name:I({text:String(t.name)}),type:xt({keyword:"string"})})],J(t.type));p.push(f);}let c=a?p[0]:h__default.default.factory.createTypeLiteralNode(p);return Mt({isNullable:r,node:c})},or=({isNullable:e,types:t})=>{let r=t.map(i=>J(i)),n=h__default.default.factory.createUnionTypeNode(r);return Mt({isNullable:e,node:n})},li=({isNullable:e,types:t})=>{let r=t.map(i=>J(i)),n=h__default.default.factory.createIntersectionTypeNode(r);return Mt({isNullable:e,node:n})},ui=({isNullable:e=false,types:t})=>{let r=t.map(i=>J(i)),n=h__default.default.factory.createTupleTypeNode(r);return Mt({isNullable:e,node:n})},di=(e,t,r=false,n=true)=>{let i=or({types:e}),o=or({types:t}),p=hn({properties:[{name:`[key: ${Ie({node:i,unescape:true})}]`,type:o}],useLegacyResolution:n});return Mt({isNullable:r,node:p})},yi=(e,t=false)=>{let r=ce({typeArguments:[Array.isArray(e)?or({types:e}):e],typeName:"Array"});return Mt({isNullable:t,node:r})};var s={anonymousFunction:Ms,arrayLiteralExpression:yn,arrowFunction:Er,asExpression:ir,assignment:Qs,awaitExpression:Fs,binaryExpression:$r,block:me,callExpression:Pe,classDeclaration:ri,conditionalExpression:Vs,constVariable:Zs,constructorDeclaration:ei,enumDeclaration:Ds,exportAllDeclaration:Gs,exportNamedDeclaration:Js,expressionToStatement:Ot,forOfStatement:Xs,functionTypeNode:Ls,identifier:I,ifStatement:qt,indexedAccessTypeNode:Bs,isTsNode:ht,keywordTypeNode:xt,literalTypeNode:qs,mappedTypeNode:Ar,methodDeclaration:ti,namedImportDeclarations:Ys,namespaceDeclaration:_s,newExpression:sr,nodeToString:Ie,null:dn,objectExpression:Nr,ots:se,parameterDeclaration:$t,propertyAccessExpression:Ce,propertyAccessExpressions:oi,propertyAssignment:jr,propertyDeclaration:$s,regularExpressionLiteral:Hs,returnFunctionCall:si,returnStatement:kr,returnVariable:ii,safeAccessExpression:wt,stringLiteral:gt,stringToTsNodes:ks,templateLiteralType:zs,this:vs,transformArrayMap:fi,transformArrayMutation:ci,transformDateMutation:ai,transformFunctionMutation:pi,transformNewDate:mi,typeAliasDeclaration:Ws,typeArrayNode:yi,typeInterfaceNode:hn,typeIntersectionNode:li,typeNode:J,typeOfExpression:Ks,typeOperatorNode:ws,typeParameterDeclaration:nr,typeParenthesizedNode:Us,typeRecordNode:di,typeReferenceNode:ce,typeTupleNode:ui,typeUnionNode:or,valueToExpression:Te};var wr=e=>{hi__default.default.existsSync(e)||hi__default.default.mkdirSync(e,{recursive:true});};var Ft=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var Ga=e=>{let t=e.split(Bt__default.default.sep);return t.slice(0,t.length-1).join(Bt__default.default.sep)},X=({config:e,sourceOutput:t})=>{let r=j(e);if("bundle"in r&&r.bundle)return Ft({moduleOutput:"client",sourceOutput:t});if(Bt__default.default.isAbsolute(r.name)){let n=Ga(r.name),i=Bt__default.default.resolve(e.output.path);return Bt__default.default.relative(i,n).replace(/\\/g,"/")}return r.name},F={Options:{asType:true,name:"Options"},OptionsLegacyParser:{asType:true,name:"OptionsLegacyParser"}};var gi=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,je=e=>{let t={host:"",path:"",port:"",protocol:""};gi.lastIndex=0;let r=e.match(gi);if(!r)return t;let n=r[5]||"";if(n==="."||n==="..")return t;let i=r[8]||"",o=r[2]||"";return o.length===1?t:{host:n,path:i==="/"?"":i,port:r[7]||"",protocol:o}};var Lt="#/ir/",qr=e=>{let t=gn(e);return t.length===3&&t[0]==="components"},Q=e=>{let t=gn(e),r=t[t.length-1];return decodeURI(r)},gn=e=>e.replace(/^#\//,"").split("/"),xn=({$ref:e,spec:t})=>{let r=gn(decodeURI(e)),n=t;for(let i of r){let o=i;if(n[o]===void 0)throw new Error(`Reference not found: ${e}`);n=n[o];}return n};var xi=/[\p{Lu}]/u,bn=/[\p{Ll}]/u,Oi=/([\p{Alpha}\p{N}_]|$)/u,Dt=/[_.\- `\\[\]{}\\/]+/,Ja=new RegExp(`^${Dt.source}`),On=new RegExp(`${Dt.source}${Oi.source}`,"gu"),bi=new RegExp(`\\d+${Oi.source}`,"gu"),Za=({case:e,string:t})=>{let r=false,n=false,i=false,o=false,p=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let a=0;a<t.length;a++){let c=t[a];o=a>2?t[a-3]===p:true;let m=a+1,f=t[m];for(Dt.lastIndex=0;f&&Dt.test(f);)m+=1,f=t[m];let l=m!==a+1;if(bn.lastIndex=0,xi.lastIndex=0,xi.test(c)&&(r||f&&!l&&f!=="s"&&bn.test(f)))t=`${t.slice(0,a)}${p}${t.slice(a)}`,a++,i=n,r=false,n=true;else if(n&&i&&bn.test(c)&&!o&&!(c==="s"&&(!f||f.toLocaleLowerCase()!==f)))t=`${t.slice(0,a-1)}${p}${t.slice(a-1)}`,i=n,r=true,n=false;else {let u=c.toLocaleLowerCase(),d=c.toLocaleUpperCase();i=n,r=u===c&&d!==c,n=d===c&&u!==c;}}return t},P=({case:e,stripLeadingSeparators:t=true,value:r})=>{let n=r.trim();return n.length?!e||e==="preserve"?n:n.length===1?(Dt.lastIndex=0,Dt.test(n)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase()):(n!==n.toLocaleLowerCase()&&(n=Za({case:e,string:n})),(t||n[0]!==r[0])&&(n=n.replace(Ja,"")),n=e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase(),e==="PascalCase"&&(n=`${n.charAt(0).toLocaleUpperCase()}${n.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(n=n.replaceAll(On,(o,p,a)=>a===0&&!t?o:`_${p}`),n[n.length-1]==="_"&&(n=n.slice(0,n.length-1))):(On.lastIndex=0,bi.lastIndex=0,n=n.replaceAll(bi,(o,p,a)=>["_","-","."].includes(n.charAt(a+o.length))?o:o.toLocaleUpperCase()),n=n.replaceAll(On,(o,p,a)=>a===0&&!t&&o[0]&&r.startsWith(o[0])?o:p.toLocaleUpperCase())),n):""};var k=({case:e="PascalCase",config:t,id:r,parameterId:n,type:i})=>{let o="";switch(i){case "data":case "error":case "errors":case "parameter":case "response":case "responses":o=`${(i[0]??"").toLocaleUpperCase()}${i.slice(1)}`;break}let p=true;t.plugins["@hey-api/typescript"]?.identifierCase==="preserve"&&(p=false);let a=p?"-":"",c=[Lt,P({case:e,value:r}),a,o];return n&&(c.push(a),c.push(P({case:e,value:n}))),c.join("")};var A="types";function Ya(e,t){return {...e,get name(){return t?.(e),e.name}}}var be=({context:e,file:t,operation:r,type:n})=>{let i=e.file({id:A}).identifier({$ref:k({config:e.config,id:r.id,type:n}),namespace:"type"});return Ya(i,o=>{o.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:A}),name:o.name});})};var ep=({context:e,plugin:t})=>{let{baseUrl:r}=t;if(r===false)return;if(typeof r=="string")return r;let{servers:n}=e.ir;if(n)return n[typeof r=="number"?r:0]?.url},Si=({context:e,plugin:t})=>{let r=e.file({id:Re}),n=X({config:e.config,sourceOutput:r.nameWithoutExtension()}),i=r.import({module:n,name:"createClient"}),o=r.import({module:n,name:"createConfig"}),p=r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:"ClientOptions"}),a=t.runtimeConfigPath?r.import({module:r.relativePathToFile({context:e,id:t.runtimeConfigPath}),name:"createClientConfig"}):void 0,c=[],m=ep({context:e,plugin:t});if(m){let u=je(m);if(u.protocol&&u.host&&!m.includes("{"))c.push({key:ne(e.config),value:m});else if(m!=="/"&&m.startsWith("/")){let d=m.endsWith("/")?m.slice(0,-1):m;c.push({key:ne(e.config),value:d});}}"throwOnError"in t&&t.throwOnError&&c.push({key:"throwOnError",value:true});let f=[s.callExpression({functionName:o.name,parameters:c.length?[s.objectExpression({obj:c})]:void 0,types:[s.typeReferenceNode({typeName:p.name})]})],l=s.constVariable({exportConst:true,expression:s.callExpression({functionName:i.name,parameters:a?[s.callExpression({functionName:a.name,parameters:f})]:f}),name:"client"});r.add(l);};var Ri=({context:e})=>{let t=e.file({id:Re}),r=X({config:e.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({asType:true,module:t.relativePathToFile({context:e,id:A}),name:"ClientOptions"}),i=t.import({asType:true,module:r,name:"Config"}),o=t.import({alias:"DefaultClientOptions",asType:true,module:r,name:"ClientOptions"}),p=s.typeReferenceNode({typeName:o.name}),a=s.typeReferenceNode({typeName:"T"}),c=s.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:"CreateClientConfig",type:s.functionTypeNode({parameters:[s.parameterDeclaration({name:"override",required:false,type:s.typeReferenceNode({typeArguments:[s.typeIntersectionNode({types:[p,a]})],typeName:i.name})})],returnType:s.typeReferenceNode({typeArguments:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeArguments:[p],typeName:"Required"}),a]})],typeName:i.name})}),typeParameters:[{default:s.typeReferenceNode({typeName:n.name}),extends:p,name:"T"}]});t.add(c);};var nt=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:Re,path:t.output}),Ri({context:e}),Si({context:e,plugin:t});};var Sn={...tt,_handler:nt,_handlerLegacy:()=>{},name:"@hey-api/client-axios",throwOnError:false};var Rn={...tt,_handler:nt,_handlerLegacy:()=>{},name:"@hey-api/client-fetch",throwOnError:false};var In={...tt,_handler:nt,_handlerLegacy:()=>{},name:"@hey-api/client-next",throwOnError:false};var Tn={...tt,_handler:nt,_handlerLegacy:()=>{},name:"@hey-api/client-nuxt"};var Cn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/angular",output:"client"};var Pn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/axios",output:"client"};var jn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/fetch",output:"client"};var An={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/node",output:"client"};var En={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/xhr",output:"client"};var tp=[pe,js,Cs,Ps,Ts],Mr=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(vt.lastIndex=0,vt.test(t))return `_${t}`;for(let r of tp){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var Fr="schemas",Nn=({plugin:e,schema:t})=>{e.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},_t=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(i=>_t({context:e,plugin:t,schema:i}));let n=structuredClone(r);if(n.$ref)return n.$ref=decodeURI(n.$ref),n;if(Nn({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=_t({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(i=>_t({context:e,plugin:t,schema:i}))),n.items&&(n.items=_t({context:e,plugin:t,schema:n.items})),n.properties)for(let i in n.properties){let o=n.properties[i];typeof o!="boolean"&&(n.properties[i]=_t({context:e,plugin:t,schema:o}));}return n},st=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(i=>st({context:e,plugin:t,schema:i}));let n=structuredClone(r);if("$ref"in n)return n.$ref=decodeURI(n.$ref),n;if(Nn({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=st({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(i=>st({context:e,plugin:t,schema:i}))),n.anyOf&&(n.anyOf=n.anyOf.map(i=>st({context:e,plugin:t,schema:i}))),n.items&&(n.items=st({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(i=>st({context:e,plugin:t,schema:i}))),n.properties)for(let i in n.properties){let o=n.properties[i];typeof o!="boolean"&&(n.properties[i]=st({context:e,plugin:t,schema:o}));}return n},Ke=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(i=>Ke({context:e,plugin:t,schema:i}));let n=structuredClone(r);if(Nn({plugin:t,schema:n}),n.$ref&&(n.$ref=decodeURI(n.$ref)),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=Ke({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(i=>Ke({context:e,plugin:t,schema:i}))),n.anyOf&&(n.anyOf=n.anyOf.map(i=>Ke({context:e,plugin:t,schema:i}))),n.items&&(n.items=Ke({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(i=>Ke({context:e,plugin:t,schema:i}))),n.prefixItems&&(n.prefixItems=n.prefixItems.map(i=>Ke({context:e,plugin:t,schema:i}))),n.properties)for(let i in n.properties){let o=n.properties[i];typeof o!="boolean"&&(n.properties[i]=Ke({context:e,plugin:t,schema:o}));}return n},kn=({name:e,plugin:t,schema:r})=>{let n="";return t.nameBuilder&&(typeof t.nameBuilder=="function"?n=t.nameBuilder(e,r):n=t.nameBuilder.replace("{{name}}",e)),n||(n=`${e}Schema`),Mr(n)},rp=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let n=e.spec.definitions[r],i=_t({context:e,plugin:t,schema:n}),o=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:i}),name:kn({name:r,plugin:t,schema:n})});e.file({id:Fr}).add(o);}},np=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],i=st({context:e,plugin:t,schema:n}),o=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:i}),name:kn({name:r,plugin:t,schema:n})});e.file({id:Fr}).add(o);}},sp=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],i=Ke({context:e,plugin:t,schema:n}),o=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:i}),name:kn({name:r,plugin:t,schema:n})});e.file({id:Fr}).add(o);}},Ii=({context:e,plugin:t})=>{if(e.createFile({exportFromIndex:t.exportFromIndex,id:Fr,path:t.output}),"swagger"in e.spec){rp({context:e,plugin:t});return}switch(e.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":np({context:e,plugin:t});break;case "3.1.0":case "3.1.1":sp({context:e,plugin:t});break;default:throw new Error("Unsupported OpenAPI specification")}};var Ae=class{_exportFromIndex;_headers=[];_id;_identifierCase;_imports=new Map;_items=[];_name;_path;identifiers={};constructor({dir:t,exportFromIndex:r=false,header:n=true,id:i,identifierCase:o,name:p}){this._exportFromIndex=r,this._id=i,this._identifierCase=o,this._name=this._setName(p),this._path=Bt__default.default.resolve(t,this._name),n&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}blockIdentifier({$ref:t,namespace:r}){let{name:n,ref:i}=Ci(t),o=this.identifiers[n.toLocaleLowerCase()]?.[r]?.[i];if(!o)throw new Error(`Identifier for $ref ${t} in namespace ${r} not found`);return o.name=false,{created:false,name:o.name}}get exportFromIndex(){return this._exportFromIndex}get id(){return this._id}identifier(t){return $n({case:this._identifierCase,identifiers:this.identifiers,...t})}import({module:t,...r}){let n=this._imports.get(t);n||(n=new Map,this._imports.set(t,n));let i=n.get(r.name);return i?{...i,name:i.alias||i.name}:(n.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=vn(this._name);return t}relativePathToFile({context:t,id:r}){let n="";if(r.startsWith(".")){let m=[];if(t.config.configFile){let f=t.config.configFile.split("/");m=f.slice(0,f.length-1);}n=Bt__default.default.resolve(process.cwd(),...m,r);}else {let m=t.file({id:r});if(!m)throw new Error(`File with id ${r} does not exist`);n=m._path;}let i=this._path.split(Bt__default.default.sep),o=n.split(Bt__default.default.sep),p=-1,a="";for(let m of i)if(p+=1,o[p]!==m){let f=Array.from({length:i.length-p}).fill(""),l=o.slice(p),u=l.slice(0,l.length-1);u.length&&u.push(""),a=(f.join("../")||"./")+u.join("/");break}let c=o[o.length-1];return `${a}${vn(c).name}`}remove(t){hi__default.default.rmSync(this._path,t);}removeNode(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:n}=vn(t);return [n,"gen",r].filter(Boolean).join(".")}_toString(t,r){let n=[];this._headers.length&&n.push(this._headers.join(`
`));let i=r?.options.moduleResolution===h__default.default.ModuleResolutionKind.NodeNext,o=[];for(let[p,a]of this._imports.entries()){let c=Array.from(a.values()),m=p;i&&(m.startsWith("./")||m.startsWith("../"))&&(m=`${m}.js`);let f=s.namedImportDeclarations({imports:c,module:m});o.push(Ie({node:f}));}return o.length&&n.push(o.join(`
`)),n=n.concat(this._items.map(p=>typeof p=="string"?p:Ie({node:p,unescape:true}))),n.join(t)}write(t=`
`,r=null){if(this.isEmpty()){this.remove({force:true});return}let n=this._path;if(typeof this._path=="string"){let i=this._path.split(Bt__default.default.sep);n=i.slice(0,i.length-1).join(Bt__default.default.sep);}wr(n),hi__default.default.writeFileSync(this._path,this._toString(t,r));}},Ci=e=>{let t=e,r=[],n=t.split("/"),i=n[n.length-1]||"",o=n.indexOf("properties");if(o!==-1)for(t=n.slice(0,o).join("/"),i=n[o-1]||"";o+1<n.length;){let p=n[o+1];if(!p)throw new Error(`Invalid $ref: ${e}`);r.push(p),o+=2;}return {name:i,properties:r,ref:t}},$n=({$ref:e,case:t,count:r=1,create:n=false,identifiers:i,nameTransformer:o,namespace:p})=>{let{name:a,properties:c,ref:m}=Ci(e);if(!a)return {created:false,name:""};let f=P({case:t,value:a});r>1&&(f=`${f}${r}`);let l=f.toLocaleLowerCase();i[l]||(i[l]={});let u=i[l];if(p==="enum"&&(u.type||u.value)||p!=="enum"&&u.enum)return $n({$ref:m,case:t,count:r+1,create:n,identifiers:i,nameTransformer:o,namespace:p});u[p]||(u[p]={});let d=u[p],x=d[m];if(x){let O=x.name;return c.length&&(O+=c.map(w=>`['${w}']`).join("")),{created:false,name:O}}let g=P({case:t,value:o?.(a)??a});r>1&&(g=`${g}${r}`);let b=d[g];return b?b.$ref===m?{created:false,name:b.name}:$n({$ref:m,case:t,count:r+1,create:n,identifiers:i,nameTransformer:o,namespace:p}):n?(b={$ref:m,name:Mr(g)},d[g]=b,d[b.$ref]=b,{created:true,name:b.name}):(delete u[p],{created:false,name:""})},vn=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",n=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:n}};var pp=url.fileURLToPath((typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (_documentCurrentScript && _documentCurrentScript.tagName.toUpperCase() === 'SCRIPT' && _documentCurrentScript.src || new URL('internal.cjs', document.baseURI).href)));Bt__default.default.dirname(pp);process.stdin.isTTY&&process.stdout.isTTY;var Lr=class extends Error{args;event;pluginName;constructor({args:t,error:r,event:n,name:i,pluginName:o}){let p=r instanceof Error?r.message:"Unknown error";super(p),this.args=t,this.cause=r.cause,this.event=n,this.name=i||r.name,this.pluginName=o,this.stack=r.stack;}};var Dr=class{config;files;ir;spec;listeners;constructor({config:t,spec:r}){this.config=t,this.files={},this.ir={},this.listeners={},this.spec=r;}async broadcast(t,...r){let n=this.listeners[t];if(n)for(let i of n)try{await i.callbackFn(...r);}catch(o){let p=o instanceof Error?o:new Error(String(o));throw new Lr({args:r,error:p,event:t,name:"BroadcastError",pluginName:i.pluginName})}}createFile(t){let r=t.path.split("/"),n=Bt__default.default.resolve(this.config.output.path,...r.slice(0,r.length-1)),i=new Ae({dir:n,exportFromIndex:t.exportFromIndex,id:t.id,identifierCase:t.identifierCase,name:`${r[r.length-1]}.ts`});return this.files[t.id]=i,i}dereference(t){let r=this.resolveRef(t.$ref),n={...t,...r};return delete n.$ref,n}file({id:t}){return this.files[t]}resolveIrRef(t){return xn({$ref:t,spec:this.ir})}resolveRef(t){return xn({$ref:t,spec:this.spec})}subscribe(t,r,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({callbackFn:r,pluginName:n??""});}};var _r=({context:e,parameter:t})=>{if(!t.pagination)return;if(t.pagination===true)return t.schema;let r=t.schema;return r.$ref&&(r=e.resolveIrRef(r.$ref)),r.properties[t.pagination]},it=e=>{for(let t in e)if(e[t].required)return  true;return  false},Pi=e=>e?!!(it(e.cookie)||it(e.header)||it(e.path)||it(e.query)):false,wn=({context:e,parameters:t})=>{if(t){for(let r in t.cookie){let n=t.cookie[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:_r({context:e,parameter:n})}}for(let r in t.header){let n=t.header[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:_r({context:e,parameter:n})}}for(let r in t.path){let n=t.path[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:_r({context:e,parameter:n})}}for(let r in t.query){let n=t.query[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:_r({context:e,parameter:n})}}}};var ie=({schema:e})=>{if(!e.items)return e;let t=[],r=[];for(let n of e.items){if(!n.type&&n.items||e.type==="tuple"){t.push(n);continue}if(!n.type||n.type==="boolean"||n.type==="integer"||n.type==="null"||n.type==="number"||n.type==="string"||n.type==="unknown"||n.type==="void"){let i=`${n.$ref??""}${n.type??""}${n.const!==void 0?`const-${n.const}`:""}`;r.includes(i)||(r.push(i),t.push(n));continue}t.push(n);}if(e.items=t,e.items.length<=1&&e.type!=="array"&&e.type!=="enum"&&e.type!=="tuple"){let n=e.items[0];delete e.logicalOperator,delete e.items,e={...e,...n};}return e.type==="unknown"?{}:e};var R=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let n of t)r.add(n);return r.size>e.length?Array.from(r):e};var qn=({items:e,schema:t})=>{for(let r of e)t.accessScopes=R(t.accessScopes,r.accessScopes);t.items=e;},q=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:n})=>e.length?n.type==="tuple"?(qn({items:e,schema:n}),n):e.length!==1?(qn({items:e,schema:n}),n.logicalOperator=t,n):r?(n={...n,...e[0]},n):(qn({items:e,schema:n}),n):n;var Br=e=>!!(Pi(e.parameters)||e.body?.required),v=({method:e,path:t})=>`${e.toUpperCase()} ${t}`,ji=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return wn({context:e,parameters:t.parameters});if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let n=r.schema,i=n.$ref?e.resolveIrRef(n.$ref):n,p=("schema"in i?i.schema:i)?.properties?.[r.pagination];return p?{in:"body",name:r.pagination,schema:p}:wn({context:e,parameters:t.parameters})},Mn=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},Ee=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},n={properties:{},type:"object"},i;for(let a in e.responses){let c=e.responses[a];switch(Mn({statusCode:a})){case "1XX":case "3XX":break;case "2XX":n.properties[a]=c.schema;break;case "4XX":case "5XX":r.properties[a]=c.schema;break;case "default":i=c;break}}if(i){let a=false;Object.keys(n.properties).length||(n.properties.default=i.schema,a=true);let c=(i.schema.description??"").toLocaleLowerCase(),m=(i.schema.$ref??"").toLocaleLowerCase();["success"].some(u=>c.includes(u)||m.includes(u))&&(n.properties.default=i.schema,a=true),["error","problem"].some(u=>c.includes(u)||m.includes(u))&&(r.properties.default=i.schema,a=true),a||(r.properties.default=i.schema);}let o=Object.keys(r.properties);if(o.length){r.required=o,t.errors=r;let a=q({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});a=ie({schema:a}),Object.keys(a).length&&a.type!=="unknown"&&(t.error=a);}let p=Object.keys(n.properties);if(p.length){n.required=p,t.responses=n;let a=q({items:Object.values(n.properties),mutateSchemaOneItem:true,schema:{}});a=ie({schema:a}),Object.keys(a).length&&a.type!=="unknown"&&(t.response=a);}return t};var Vt=e=>{switch(e){case "parameters":return "parameter";case "requestBodies":return "body";case "responses":return "response";case "definitions":case "schemas":return "schema";default:return "unknown"}},Ai="/",S=(e,t="")=>`${e}${Ai}${t}`,W=e=>{let t=e.indexOf(Ai);return {name:e.slice(t+1),namespace:e.slice(0,t)}};var St=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return vt.lastIndex=0,vt.test(t)?`_${t}`:t},ot=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),Fn=e=>{let t=e.replace("[]","Array");return ot(t)};var ee=["delete","get","head","options","patch","post","put","trace"],Rt=({context:e,count:t=1,id:r,method:n,path:i,state:o})=>{let p;if(r&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].operationId))p=P({case:"camelCase",value:ot(r)});else {let a=i.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");p=P({case:"camelCase",value:`${n}-${a}`});}return t>1&&(p=`${p}${t}`),o.ids.has(p)?Rt({context:e,count:t+1,id:r,method:n,path:i,state:o}):(o.ids.set(p,v({method:n,path:i})),p)};var Ne=(e,t)=>{let r=[],n=[];if(t)for(let i of t)i.startsWith("/")&&i.endsWith("/")?n.push(new RegExp(i.slice(1,i.length-1))):r.push(S(e,i));return {regexps:n,set:new Set(r)}},mp=({excludeOperations:e,excludeSchemas:t,includeOperations:r,includeSchemas:n,spec:i})=>{if((e.regexps.length||r.regexps.length)&&i.paths)for(let o of Object.entries(i.paths)){let p=o[0],a=o[1];for(let c of ee){if(!a[c])continue;let f=v({method:c,path:p});e.regexps.some(l=>l.test(f))&&e.set.add(S("operation",f)),r.regexps.some(l=>l.test(f))&&r.set.add(S("operation",f));}}if(i.definitions&&(t.regexps.length||n.regexps.length))for(let o of Object.keys(i.definitions))t.regexps.some(p=>p.test(o))&&t.set.add(S("schema",o)),n.regexps.some(p=>p.test(o))&&n.set.add(S("schema",o));},fp=({excludeOperations:e,excludeParameters:t,excludeRequestBodies:r,excludeResponses:n,excludeSchemas:i,includeOperations:o,includeParameters:p,includeRequestBodies:a,includeResponses:c,includeSchemas:m,spec:f})=>{if((e.regexps.length||o.regexps.length)&&f.paths)for(let l of Object.entries(f.paths)){let u=l[0],d=l[1];for(let x of ee){if(!d[x])continue;let b=v({method:x,path:u});e.regexps.some(O=>O.test(b))&&e.set.add(S("operation",b)),o.regexps.some(O=>O.test(b))&&o.set.add(S("operation",b));}}if(f.components){if((t.regexps.length||p.regexps.length)&&f.components.parameters)for(let l of Object.keys(f.components.parameters))t.regexps.some(u=>u.test(l))&&t.set.add(S("parameter",l)),p.regexps.some(u=>u.test(l))&&p.set.add(S("parameter",l));if((r.regexps.length||a.regexps.length)&&f.components.requestBodies)for(let l of Object.keys(f.components.requestBodies))r.regexps.some(u=>u.test(l))&&r.set.add(S("body",l)),a.regexps.some(u=>u.test(l))&&a.set.add(S("body",l));if((n.regexps.length||c.regexps.length)&&f.components.responses)for(let l of Object.keys(f.components.responses))n.regexps.some(u=>u.test(l))&&n.set.add(S("response",l)),c.regexps.some(u=>u.test(l))&&c.set.add(S("response",l));if((i.regexps.length||m.regexps.length)&&f.components.schemas)for(let l of Object.keys(f.components.schemas))i.regexps.some(u=>u.test(l))&&i.set.add(S("schema",l)),m.regexps.some(u=>u.test(l))&&m.set.add(S("schema",l));}},lp=({spec:e,...t})=>{"swagger"in e?mp({...t,spec:e}):fp({...t,spec:e});},Kt=(e,t)=>{let r=Ne("operation",e?.operations?.exclude),n=Ne("operation",e?.operations?.include),i=Ne("parameter",e?.parameters?.exclude),o=Ne("parameter",e?.parameters?.include),p=Ne("body",e?.requestBodies?.exclude),a=Ne("body",e?.requestBodies?.include),c=Ne("response",e?.responses?.exclude),m=Ne("response",e?.responses?.include),f=Ne("schema",e?.schemas?.exclude),l=Ne("schema",e?.schemas?.include);return lp({excludeOperations:r,excludeParameters:i,excludeRequestBodies:p,excludeResponses:c,excludeSchemas:f,includeOperations:n,includeParameters:o,includeRequestBodies:a,includeResponses:m,includeSchemas:l,spec:t}),{deprecated:e?.deprecated??true,operations:{exclude:r.set,include:n.set},orphans:e?.orphans??false,parameters:{exclude:i.set,include:o.set},preserveOrder:e?.preserveOrder??false,requestBodies:{exclude:p.set,include:a.set},responses:{exclude:c.set,include:m.set},schemas:{exclude:f.set,include:l.set},tags:{exclude:new Set(e?.tags?.exclude),include:new Set(e?.tags?.include)}}},Wt=e=>e?e.orphans===false||e.deprecated===false?true:!!(e.operations?.exclude?.length||e.operations?.include?.length||e.parameters?.exclude?.length||e.parameters?.include?.length||e.requestBodies?.exclude?.length||e.requestBodies?.include?.length||e.responses?.exclude?.length||e.responses?.include?.length||e.schemas?.exclude?.length||e.schemas?.include?.length||e.tags?.exclude?.length||e.tags?.include?.length):false,up=({filters:e,graph:t,parameters:r,requestBodies:n,responses:i,schemas:o})=>{let p=new Set,c=[...e.operations.include.size?e.operations.include:new Set(t.operations.keys())];for(;c.length;){let m=c.pop();if(e.operations.exclude.has(m)||p.has(m))continue;let f=t.operations.get(m);f&&(!e.deprecated&&f.deprecated||e.tags.exclude.size&&f.tags.size&&[...e.tags.exclude].some(l=>f.tags.has(l))||e.tags.include.size&&!new Set([...e.tags.include].filter(l=>f.tags.has(l))).size||[...f.dependencies].some(l=>{let{namespace:u}=W(l);switch(u){case "body":return !n.has(l);case "parameter":return !r.has(l);case "response":return !i.has(l);case "schema":return !o.has(l);default:return  false}})||p.add(m));}return {operations:p}},dp=({filters:e,graph:t,schemas:r})=>{let n=new Set,o=[...e.parameters.include.size?e.parameters.include:new Set(t.parameters.keys())];for(;o.length;){let p=o.pop();if(e.parameters.exclude.has(p)||n.has(p))continue;let a=t.parameters.get(p);if(a&&!(!e.deprecated&&a.deprecated)&&(n.add(p),!!a.dependencies.size))for(let c of a.dependencies){let{namespace:m}=W(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(p):n.has(c)||o.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(p):r.has(c)||r.add(c);break}}}}return {parameters:n}},yp=({filters:e,graph:t,schemas:r})=>{let n=new Set,o=[...e.requestBodies.include.size?e.requestBodies.include:new Set(t.requestBodies.keys())];for(;o.length;){let p=o.pop();if(e.requestBodies.exclude.has(p)||n.has(p))continue;let a=t.requestBodies.get(p);if(a&&!(!e.deprecated&&a.deprecated)&&(n.add(p),!!a.dependencies.size))for(let c of a.dependencies){let{namespace:m}=W(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(p):n.has(c)||o.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(p):r.has(c)||r.add(c);break}}}}return {requestBodies:n}},hp=({filters:e,graph:t,schemas:r})=>{let n=new Set,o=[...e.responses.include.size?e.responses.include:new Set(t.responses.keys())];for(;o.length;){let p=o.pop();if(e.responses.exclude.has(p)||n.has(p))continue;let a=t.responses.get(p);if(a&&!(!e.deprecated&&a.deprecated)&&(n.add(p),!!a.dependencies.size))for(let c of a.dependencies){let{namespace:m}=W(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(p):n.has(c)||o.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(p):r.has(c)||r.add(c);break}}}}return {responses:n}},gp=({filters:e,graph:t})=>{let r=new Set,i=[...e.schemas.include.size?e.schemas.include:new Set(t.schemas.keys())];for(;i.length;){let o=i.pop();if(e.schemas.exclude.has(o)||r.has(o))continue;let p=t.schemas.get(o);if(p&&!(!e.deprecated&&p.deprecated)&&(r.add(o),!!p.dependencies.size))for(let a of p.dependencies){let{namespace:c}=W(a);switch(c){case "schema":{!r.has(a)&&!e.schemas.exclude.has(a)&&i.push(a);break}}}}return {schemas:r}},xp=({filters:e,graph:t,parameters:r})=>{if(e.parameters.exclude.size)for(let n of r){let i=t.parameters.get(n);if(i?.dependencies.size){for(let o of e.parameters.exclude)if(i.dependencies.has(o)){r.delete(n);break}}}},bp=({filters:e,graph:t,requestBodies:r})=>{if(e.requestBodies.exclude.size)for(let n of r){let i=t.requestBodies.get(n);if(i?.dependencies.size){for(let o of e.requestBodies.exclude)if(i.dependencies.has(o)){r.delete(n);break}}}},Op=({filters:e,graph:t,responses:r})=>{if(e.responses.exclude.size)for(let n of r){let i=t.responses.get(n);if(i?.dependencies.size){for(let o of e.responses.exclude)if(i.dependencies.has(o)){r.delete(n);break}}}},Sp=({filters:e,graph:t,schemas:r})=>{if(e.schemas.exclude.size)for(let n of r){let i=t.schemas.get(n);if(i?.dependencies.size){for(let o of e.schemas.exclude)if(i.dependencies.has(o)){r.delete(n);break}}}},Rp=({operationDependencies:e,parameters:t,requestBodies:r,responses:n,schemas:i})=>{for(let o of i)e.has(o)||i.delete(o);for(let o of t)e.has(o)||t.delete(o);for(let o of r)e.has(o)||r.delete(o);for(let o of n)e.has(o)||n.delete(o);},Ip=({graph:e,operations:t})=>{let r=new Set,i=[...new Set([...t].flatMap(o=>[...e.operations.get(o)?.dependencies??[]]))];for(;i.length;){let o=i.pop();if(r.has(o))continue;r.add(o);let{namespace:p}=W(o),a;if(p==="body"?a=e.requestBodies.get(o)?.dependencies:p==="operation"?a=e.operations.get(o)?.dependencies:p==="parameter"?a=e.parameters.get(o)?.dependencies:p==="response"?a=e.responses.get(o)?.dependencies:p==="schema"&&(a=e.schemas.get(o)?.dependencies),!!a?.size)for(let c of a)r.has(c)||i.push(c);}return {operationDependencies:r}},Ut=({filters:e,graph:t})=>{let{schemas:r}=gp({filters:e,graph:t}),{parameters:n}=dp({filters:e,graph:t,schemas:r}),{requestBodies:i}=yp({filters:e,graph:t,schemas:r}),{responses:o}=hp({filters:e,graph:t,schemas:r});Sp({filters:e,graph:t,schemas:r}),xp({filters:e,graph:t,parameters:n}),bp({filters:e,graph:t,requestBodies:i}),Op({filters:e,graph:t,responses:o});let{operations:p}=up({filters:e,graph:t,parameters:n,requestBodies:i,responses:o,schemas:r});if(!e.orphans){let{operationDependencies:a}=Ip({graph:t,operations:p});Rp({operationDependencies:a,parameters:n,requestBodies:i,responses:o,schemas:r});}return {operations:p,parameters:n,requestBodies:i,responses:o,schemas:r}};var N=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var Tp=e=>/^[A-Za-z_$][A-Za-z0-9_$]*$/.test(e),Cp=e=>e.map((t,r)=>typeof t=="number"?`[${t}]`:r===0?t:Tp(t)?`.${t}`:`['${t.replace(/"/g,"\\'")}']`).join(""),Pp=e=>{let t=Cp(e.path),r=e.severity==="error"?Vr__default.default.bold.red:Vr__default.default.bold.yellow,n=e.message.replace(/`([^`]+)`/g,(i,o)=>Vr__default.default.yellow(`\`${o}\``));return `${r(`[${e.severity.toUpperCase()}]`)} ${Vr__default.default.cyan(t)}: ${n}`},jp=({context:e,issue:t})=>e.config.logs.level==="silent"?false:t.severity==="error"?e.config.logs.level!=="warn":true,Xt=({context:e,result:t})=>{if(e.config.input.validate_EXPERIMENTAL){for(let r of t.issues)jp({context:e,issue:r})&&console.log(Pp(r));t.valid||process.exit(1);}};var Ei=({operations:e,preserveOrder:t,schemas:r,spec:n})=>{if(n.definitions){let i={};if(t)for(let[o,p]of Object.entries(n.definitions))r.has(S("schema",o))&&(i[o]=p);else for(let o of r){let{name:p}=W(o),a=n.definitions[p];a&&(i[p]=a);}n.definitions=i;}if(n.paths)for(let i of Object.entries(n.paths)){let o=i[0],p=i[1];for(let a of ee){if(!p[a])continue;let m=S("operation",v({method:a,path:o}));e.has(m)||delete p[a];}Object.keys(p).length||delete n.paths[o];}};var at=(e,t)=>{if("$ref"in e){if(e.$ref){let r=e.$ref.split("/"),n=r[r.length-2],i=r[r.length-1];if(n&&i){let o=Vt(n);o==="unknown"&&console.warn(`unsupported type: ${n}`),t.add(S(o,i));}}return}if("in"in e){e.in==="body"&&at(e.schema,t);return}if(e.items&&typeof e.items=="object"&&at(e.items,t),e.properties)for(let r of Object.values(e.properties))typeof r=="object"&&at(r,t);if(e.allOf)for(let r of e.allOf)at(r,t);},Ni=({spec:e,validate:t})=>{let r={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},n=[],i=new Map;if(e.definitions)for(let[o,p]of Object.entries(e.definitions)){let a=new Set;at(p,a),r.schemas.set(S("schema",o),{dependencies:a,deprecated:false});}if(e.parameters,e.paths)for(let o of Object.entries(e.paths)){let p=o[0],a=o[1];for(let c of ee){if(c==="trace")continue;let m=a[c];if(!m)continue;let f=v({method:c,path:p});t&&m.operationId&&(i.has(m.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",p,c,"operationId"],severity:"error"}):i.set(m.operationId,f));let l=new Set;if(m.responses)for(let u of Object.values(m.responses))u&&("$ref"in u?at(u,l):u.schema&&at(u.schema,l));if(m.parameters)for(let u of m.parameters)at(u,l);r.operations.set(S("operation",f),{dependencies:l,deprecated:!!m.deprecated,tags:new Set(m.tags)});}}return {graph:r,issues:n,valid:!n.some(o=>o.severity==="error")}};var ki=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,vi=/^application\/(.*\+)?json(;.*)?$/i,$i=/^multipart\/form-data(;.*)?$/i,wi=/^text\/[a-z0-9.+-]+(;.*)?$/i,qi=/^application\/x-www-form-urlencoded(;.*)?$/i,Mi=/^application\/octet-stream(;.*)?$/i,We=({mediaType:e})=>(ki.lastIndex=0,ki.test(e)),Qt=({mediaType:e})=>{if(vi.lastIndex=0,vi.test(e))return "json";if($i.lastIndex=0,$i.test(e))return "form-data";if(wi.lastIndex=0,wi.test(e))return "text";if(qi.lastIndex=0,qi.test(e))return "url-search-params";if(Mi.lastIndex=0,Mi.test(e))return "octet-stream"};var Fi=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&We({mediaType:t})?{...r,format:"binary"}:r:We({mediaType:t})?{format:"binary",type:"string"}:void 0},Ln=({mimeTypes:e,response:t})=>{for(let r of e??[])return {mediaType:r,schema:t.schema,type:Qt({mediaType:r})}};var Li=["after","before","cursor","offset","page","start"];function oe({keywords:e=Li}={}){e.length===0&&(e=Li);let t=`^(${e.join("|")})$`;return new RegExp(t)}var ke=(e,t)=>{let r=[];for(let n in t)t[n]===e&&r.push(n);return r.length?r:[Q(e)]};var pr=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},Ap=({irSchema:e,schema:t})=>{t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Kr=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=R(e.accessScopes,["read"])):r.isProperty&&(e.accessScopes=R(e.accessScopes,["both"]));},Ep=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let i=[];if(r.items){let o=le({context:e,schema:r.items,state:n});if(t.accessScopes=R(t.accessScopes,o.accessScopes),!i.length&&r.maxItems&&r.maxItems===r.minItems)i=Array(r.maxItems).fill(o);else if("$ref"in r.items)i.push(o);else {let p=r.items.allOf;p&&p.length>1&&!r.items["x-nullable"]?t={...t,...o}:i.push(o);}}return t=q({items:i,schema:t}),t},Np=({irSchema:e={}})=>(e.type="boolean",e),kp=({irSchema:e={},schema:t})=>(e.type=t.type,e),vp=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let i={};for(let o in r.properties){let p=r.properties[o];if(typeof p!="boolean"){let a=le({context:e,schema:p,state:{...n,isProperty:true}});t.accessScopes=R(t.accessScopes,a.accessScopes),i[o]=a;}}if(Object.keys(i).length&&(t.properties=i),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let o=le({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=o;}return r.required&&(t.required=r.required),t},$p=({irSchema:e={}})=>(e.type="string",e),Ht=({schema:e})=>{let t={};return Ap({irSchema:t,schema:e}),t},wp=({context:e,schema:t,state:r})=>{let n=Ht({schema:t}),i=[],o=pr({schema:t}),p=t.allOf;for(let a of p){let c=le({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),i.push(c),a.$ref){let m=e.resolveRef(a.$ref);if(m.discriminator&&r.$ref){let l=ke(r.$ref).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator)&&(u.required=[m.discriminator]),i.push(u);}if(!r.circularReferenceTracker.has(a.$ref)){let f=le({context:e,schema:m,state:{...r,$ref:a.$ref}});n.accessScopes=R(n.accessScopes,f.accessScopes);}}}if(o==="object"){let a=cr({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of p){let f=m.$ref?e.resolveRef(m.$ref):m;if(pr({schema:f})==="object"){let l=cr({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,l.accessScopes),l.properties?.[c]){a.properties[c]=l.properties[c];break}}}i.push(a);}}if(n=q({items:i,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t["x-nullable"]){let a=[{type:"null"}];i.length&&a.unshift(n),n={items:a,logicalOperator:"or"},a[0].deprecated&&(n.deprecated=a[0].deprecated),a[0].description&&(n.description=a[0].description);}return n},qp=({context:e,schema:t,state:r})=>{let n=Ht({schema:t});n.type="enum";let i=[];for(let[o,p]of t.enum.entries()){let a=typeof p,c;if(a==="string"||a==="number"||a==="boolean"?c=a:a==="object"&&Array.isArray(p)?c="array":p===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${a}" typeof value "${p}" for enum`,t.enum),!c)continue;let m=cr({context:e,schema:{description:t["x-enum-descriptions"]?.[o],title:t["x-enum-varnames"]?.[o]??t["x-enumNames"]?.[o],type:c==="null"?"string":c},state:r});m.const=p,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=R(n.accessScopes,m.accessScopes),i.push(m);}return n=q({items:i,schema:n}),n},Mp=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),n.$ref=n.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref),o=le({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=R(n.accessScopes,o.accessScopes);}return n},Fp=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=Ht({schema:r}));let i={};Kr({irSchema:i,schema:r,state:n}),i.default===null&&delete i.default;let o=[cr({context:e,irSchema:i,schema:r,state:n}),{type:"null"}];return t=q({items:o,schema:t}),t},Lp=({context:e,schema:t,state:r})=>{let n=Ht({schema:t});Kr({irSchema:n,schema:t,state:r});let i=pr({schema:t});return i?t["x-nullable"]?Fp({context:e,irSchema:n,schema:{...t,type:i},state:r}):cr({context:e,irSchema:n,schema:{...t,type:i},state:r}):n},cr=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=Ht({schema:r}),Kr({irSchema:t,schema:r,state:n})),r.type){case "array":return Ep({context:e,irSchema:t,schema:r,state:n});case "boolean":return Np({irSchema:t});case "integer":case "number":return kp({irSchema:t,schema:r});case "object":return vp({context:e,irSchema:t,schema:r,state:n});case "string":return $p({irSchema:t});default:return Di({irSchema:t,schema:r,state:n})}},Di=({irSchema:e,schema:t,state:r})=>(e||(e=Ht({schema:t})),e.type="unknown",Kr({irSchema:e,schema:t,state:r}),e),le=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Mp({context:e,schema:t,state:r}):t.enum?qp({context:e,schema:t,state:r}):t.allOf?wp({context:e,schema:t,state:r}):t.type||t.properties?Lp({context:e,schema:t,state:r}):Di({schema:t,state:r})),_i=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[Q(e)]=le({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Dp=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",pt=({context:e,name:t,schema:r})=>{if(oe(e.config.input.pagination).test(t))return  true;if("$ref"in r){let i=e.resolveRef(r.$ref??"");if("in"in i&&i.in){let o="schema"in i?i.schema:{...i,in:void 0};return pt({context:e,name:t,schema:o})}return pt({context:e,name:t,schema:i})}if("in"in r){if(!r.in)return  false;let i="schema"in r?r.schema:{...r,in:void 0};return pt({context:e,name:t,schema:i})}for(let i in r.properties)if(oe(e.config.input.pagination).test(i)){let p=r.properties[i];if(typeof p!="boolean"&&!("$ref"in p)){let a=pr({schema:p});if(Dp(a))return i}}for(let i of r.allOf??[]){let o=pt({context:e,name:t,schema:i});if(o)return o}return  false};var _p=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Bp=({context:e,method:t,operation:r,path:n,state:i})=>{let o={id:Rt({context:e,id:r.operationId,method:t,path:n,state:i}),method:t,path:n};return r.operationId&&(o.operationId=r.operationId),_p({irOperation:o,operation:r}),o},Vp=({context:e,method:t,operation:r,path:n,securitySchemesMap:i,state:o})=>{let p=Bp({context:e,method:t,operation:r,path:n,state:o});r.parameters&&(p.parameters=r.parameters);let a=false,c={mediaType:"",schema:{properties:{},required:[],type:"object"}},m=[];for(let f of r.requestBody??[]){let l="$ref"in f?e.resolveRef(f.$ref):f,u=l.in==="body"?l.schema:{...l,format:l.type==="file"?"binary":l.format,required:void 0,type:l.type==="file"?"string":l.type},d=Ln({mimeTypes:r.consumes,response:{schema:u}});if(d){let x=pt({context:e,name:"",schema:d.schema&&"$ref"in d.schema?{allOf:[{...d.schema}],description:l.description}:{description:l.description,...d.schema}}),g=le({context:e,schema:"$ref"in l?{allOf:[{...l,$ref:l.$ref,required:[],type:"string"}],description:l.description}:d.schema&&"$ref"in d.schema?{allOf:[{...d.schema}],description:l.description}:{description:l.description,...d.schema},state:void 0});c.mediaType=d.mediaType,l.in==="body"?c.schema=g:(c.schema.properties[l.name]=g,l.required&&m.push(l.name)),x&&(c.pagination=x),d.type&&(c.type=d.type);}l.required&&(a=true);}c.mediaType&&(m.length&&(c.schema.required=m),p.body=c,a&&(p.body.required=a));for(let f in r.responses){p.responses||(p.responses={});let l=r.responses[f],u="$ref"in l?e.resolveRef(l.$ref):l,d=Ln({mimeTypes:r.produces?r.produces:["application/json"],response:u});d?p.responses[f]={mediaType:d.mediaType,schema:le({context:e,schema:{description:u.description,...Fi({content:d})},state:void 0})}:p.responses[f]={schema:{description:u.description,type:f==="204"?"void":"unknown"}};}if(r.security){let f=[];for(let l of r.security)for(let u in l){let d=i.get(u);if(!d)continue;let x;if(d.type==="apiKey"&&(x=d),d.type==="basic"&&(x={description:d.description,scheme:"basic",type:"http"}),d.type==="oauth2")switch(x={description:d.description,flows:{},type:"oauth2"},d.flow){case "accessCode":x.flows.authorizationCode={authorizationUrl:d.authorizationUrl,scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "application":x.flows.clientCredentials={scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "implicit":x.flows.implicit={authorizationUrl:d.authorizationUrl,scopes:d.scopes};break;case "password":x.flows.password={scopes:d.scopes,tokenUrl:d.tokenUrl};break}x&&f.push(x);}f.length&&(p.security=f);}return p},ct=({context:e,method:t,operation:r,path:n,securitySchemesMap:i,state:o})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),e.ir.paths[n][t]=Vp({context:e,method:t,operation:r,path:n,securitySchemesMap:i,state:o});};var Kp=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},Wp=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},Ue=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let n={};for(let i of r){let o="$ref"in i?e.dereference(i):i;if(o.in==="body"||o.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(o);continue}n[o.in]||(n[o.in]={}),n[o.in][o.name.toLocaleLowerCase()]=Up({context:e,parameter:o});}return n},Up=({context:e,parameter:t})=>{let r=t,n=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},i=pt({context:e,name:t.name,schema:n}),o=Wp(t.in),c={allowReserved:false,explode:Kp(t.collectionFormat),location:t.in,name:t.name,schema:le({context:e,schema:n,state:void 0}),style:o};return t.description&&(c.description=t.description),i&&(c.pagination=i),t.required&&(c.required=t.required),c};var Bi=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",n=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let o=je(e.config.input.path);t.length||o.protocol&&(t=[o.protocol]),r||(r=`${o.host}${o.port?`:${o.port}`:""}`);}t.length||(t=[""]);let i=t.map(o=>`${o?`${o}://`:""}${r}${n}`).filter(Boolean);i.length&&(e.ir.servers=i.map(o=>({url:o})));};var Dn=e=>{let t=Wt(e.config.input.filters),r;if(t||e.config.input.validate_EXPERIMENTAL){let o=Ni({spec:e.spec,validate:!!e.config.input.validate_EXPERIMENTAL});r=o.graph,Xt({context:e,result:o});}if(t&&r){let o=Kt(e.config.input.filters,e.spec),p=Ut({filters:o,graph:r});Ei({...p,preserveOrder:o.preserveOrder,spec:e.spec});}let n={ids:new Map},i=new Map;for(let o in e.spec.securityDefinitions){let p=e.spec.securityDefinitions[o];i.set(o,p);}if(e.spec.definitions)for(let o in e.spec.definitions){let p=`#/definitions/${o}`,a=e.spec.definitions[o];_i({$ref:p,context:e,schema:a});}Bi({context:e});for(let o in e.spec.paths){if(o.startsWith("x-"))continue;let p=e.spec.paths[o],a=p.$ref?{...e.resolveRef(p.$ref),...p}:p,c={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},m={context:e,operation:{...c,parameters:Ue({context:e,operation:c,parameters:a.parameters})},path:o,securitySchemesMap:i,state:n};if(a.delete){let f=N({source:Ue({context:e,operation:a.delete,parameters:a.delete.parameters}),target:m.operation.parameters});ct({...m,method:"delete",operation:{...m.operation,...a.delete,parameters:f}});}if(a.get){let f=N({source:Ue({context:e,operation:a.get,parameters:a.get.parameters}),target:m.operation.parameters});ct({...m,method:"get",operation:{...m.operation,...a.get,parameters:f}});}if(a.head){let f=N({source:Ue({context:e,operation:a.head,parameters:a.head.parameters}),target:m.operation.parameters});ct({...m,method:"head",operation:{...m.operation,...a.head,parameters:f}});}if(a.options){let f=N({source:Ue({context:e,operation:a.options,parameters:a.options.parameters}),target:m.operation.parameters});ct({...m,method:"options",operation:{...m.operation,...a.options,parameters:f}});}if(a.patch){let f=N({source:Ue({context:e,operation:a.patch,parameters:a.patch.parameters}),target:m.operation.parameters});ct({...m,method:"patch",operation:{...m.operation,...a.patch,parameters:f}});}if(a.post){let f=N({source:Ue({context:e,operation:a.post,parameters:a.post.parameters}),target:m.operation.parameters});ct({...m,method:"post",operation:{...m.operation,...a.post,parameters:f}});}if(a.put){let f=N({source:Ue({context:e,operation:a.put,parameters:a.put.parameters}),target:m.operation.parameters});ct({...m,method:"put",operation:{...m.operation,...a.put,parameters:f}});}}};var Vi=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:i,schemas:o,spec:p})=>{if(p.components){if(p.components.parameters){let a={};if(r)for(let[c,m]of Object.entries(p.components.parameters))t.has(S("parameter",c))&&(a[c]=m);else for(let c of t){let{name:m}=W(c),f=p.components.parameters[m];f&&(a[m]=f);}p.components.parameters=a;}if(p.components.requestBodies){let a={};if(r)for(let[c,m]of Object.entries(p.components.requestBodies))n.has(S("body",c))&&(a[c]=m);else for(let c of n){let{name:m}=W(c),f=p.components.requestBodies[m];f&&(a[m]=f);}p.components.requestBodies=a;}if(p.components.responses){let a={};if(r)for(let[c,m]of Object.entries(p.components.responses))i.has(S("response",c))&&(a[c]=m);else for(let c of i){let{name:m}=W(c),f=p.components.responses[m];f&&(a[m]=f);}p.components.responses=a;}if(p.components.schemas){let a={};if(r)for(let[c,m]of Object.entries(p.components.schemas))o.has(S("schema",c))&&(a[c]=m);else for(let c of o){let{name:m}=W(c),f=p.components.schemas[m];f&&(a[m]=f);}p.components.schemas=a;}}if(p.paths)for(let a of Object.entries(p.paths)){let c=a[0],m=a[1];for(let f of ee){if(!m[f])continue;let u=S("operation",v({method:f,path:c}));e.has(u)||delete m[f];}Object.keys(m).length||delete p.paths[c];}};var L=(e,t)=>{if("$ref"in e){if(e.$ref){let r=e.$ref.split("/"),n=r[r.length-2],i=r[r.length-1];if(n&&i){let o=Vt(n);o==="unknown"&&console.warn(`unsupported type: ${n}`),t.add(S(o,i));}}return}if(e.items&&typeof e.items=="object"&&L(e.items,t),e.properties)for(let r of Object.values(e.properties))typeof r=="object"&&L(r,t);if(e.additionalProperties&&typeof e.additionalProperties=="object"&&L(e.additionalProperties,t),e.allOf)for(let r of e.allOf)L(r,t);if(e.anyOf)for(let r of e.anyOf)L(r,t);if(e.not&&L(e.not,t),e.oneOf)for(let r of e.oneOf)L(r,t);},Ki=({spec:e,validate:t})=>{let r={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},n=[],i=new Map;if(e.components){if(e.components.schemas)for(let[o,p]of Object.entries(e.components.schemas)){let a=new Set;L(p,a),r.schemas.set(S("schema",o),{dependencies:a,deprecated:"deprecated"in p?!!p.deprecated:false});}if(e.components.parameters)for(let[o,p]of Object.entries(e.components.parameters)){let a=new Set;if("$ref"in p)L(p,a);else if(p.schema&&L(p.schema,a),p.content)for(let c of Object.values(p.content))c.schema&&L(c.schema,a);r.parameters.set(S("parameter",o),{dependencies:a,deprecated:"deprecated"in p?!!p.deprecated:false});}if(e.components.requestBodies)for(let[o,p]of Object.entries(e.components.requestBodies)){let a=new Set;if("$ref"in p)L(p,a);else for(let c of Object.values(p.content))c.schema&&L(c.schema,a);r.requestBodies.set(S("body",o),{dependencies:a,deprecated:false});}if(e.components.responses)for(let[o,p]of Object.entries(e.components.responses)){let a=new Set;if("$ref"in p)L(p,a);else if(p.content)for(let c of Object.values(p.content))c.schema&&L(c.schema,a);r.responses.set(S("response",o),{dependencies:a,deprecated:false});}}if(e.paths)for(let o of Object.entries(e.paths)){let p=o[0],a=o[1];for(let c of ee){let m=a[c];if(!m)continue;let f=v({method:c,path:p});t&&m.operationId&&(i.has(m.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",p,c,"operationId"],severity:"error"}):i.set(m.operationId,f));let l=new Set;if(m.requestBody)if("$ref"in m.requestBody)L(m.requestBody,l);else for(let u of Object.values(m.requestBody.content))u.schema&&L(u.schema,l);if(m.responses){for(let u of Object.values(m.responses))if(u){if("$ref"in u)L(u,l);else if(u.content)for(let d of Object.values(u.content))d.schema&&L(d.schema,l);}}if(m.parameters)for(let u of m.parameters)"$ref"in u?L(u,l):u.schema&&L(u.schema,l);r.operations.set(S("operation",f),{dependencies:l,deprecated:!!m.deprecated,tags:new Set(m.tags)});}}if(t&&e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&n.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let o=0;o<e.servers.length;o++){let p=e.servers[o];!p||typeof p!="object"?n.push({code:"invalid_type",context:{actual:typeof p,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",o],severity:"error"}):p.url||n.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",o],severity:"error"});}}return {graph:r,issues:n,valid:!n.some(o=>o.severity==="error")}};var Wi=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&We({mediaType:t})?{...r,format:"binary"}:r:We({mediaType:t})?{format:"binary",type:"string"}:void 0},Xe=({content:e})=>{for(let t in e)return {mediaType:t,schema:e[t].schema,type:Qt({mediaType:t})}};var It=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},Xp=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Wr=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=R(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=R(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=R(e.accessScopes,["both"]));},Qp=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let i=[];if(r.items){let o=Z({context:e,schema:r.items,state:n});if(t.accessScopes=R(t.accessScopes,o.accessScopes),!i.length&&r.maxItems&&r.maxItems===r.minItems)i=Array(r.maxItems).fill(o);else if("$ref"in r.items)i.push(o);else {let p=r.items.allOf||r.items.anyOf||r.items.oneOf;p&&p.length>1&&!r.items.nullable?t={...t,...o}:i.push(o);}}return t=q({items:i,schema:t}),t},Hp=({irSchema:e={}})=>(e.type="boolean",e),zp=({irSchema:e={},schema:t})=>(e.type=t.type,e),Gp=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let i={};for(let o in r.properties){let p=r.properties[o];if(typeof p!="boolean"){let a=Z({context:e,schema:p,state:{...n,isProperty:true}});t.accessScopes=R(t.accessScopes,a.accessScopes),i[o]=a;}}if(Object.keys(i).length&&(t.properties=i),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let o=Z({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=o;}return r.required&&(t.required=r.required),t},Jp=({irSchema:e={}})=>(e.type="string",e),mt=({schema:e})=>{let t={};return Xp({irSchema:t,schema:e}),t},Zp=({context:e,schema:t,state:r})=>{let n=mt({schema:t}),i=[],o=It({schema:t}),p=t.allOf;for(let a of p){let c=Z({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),i.push(c),"$ref"in a){let m=e.resolveRef(a.$ref);if(m.discriminator&&r.$ref){let l=ke(r.$ref,m.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(u.required=[m.discriminator.propertyName]),i.push(u);}if(!r.circularReferenceTracker.has(a.$ref)){let f=Z({context:e,schema:m,state:{...r,$ref:a.$ref}});n.accessScopes=R(n.accessScopes,f.accessScopes);}}}if(o==="object"){let a=Tt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of p){let f="$ref"in m?e.resolveRef(m.$ref):m;if(It({schema:f})==="object"){let l=Tt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,l.accessScopes),l.properties?.[c]){a.properties[c]=l.properties[c];break}}}i.push(a);}}if(n=q({items:i,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t.nullable){let a=[{type:"null"}];i.length&&a.unshift(n),n={items:a,logicalOperator:"or"},a[0].deprecated&&(n.deprecated=a[0].deprecated),a[0].description&&(n.description=a[0].description);}return n},Yp=({context:e,schema:t,state:r})=>{let n=mt({schema:t}),i=[],o=It({schema:t}),p=t.anyOf;for(let a of p){let c=Z({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in a){let f=ke(a.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}i.push(c);}if(t.nullable&&i.push({type:"null"}),n=q({items:i,mutateSchemaOneItem:true,schema:n}),o==="object"){let a=Tt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},ec=({context:e,schema:t,state:r})=>{let n=mt({schema:t});n.type="enum";let i=[];for(let[o,p]of t.enum.entries()){let a=typeof p,c;if(a==="string"||a==="number"||a==="boolean"?c=a:a==="object"&&Array.isArray(p)?c="array":p===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${a}" typeof value "${p}" for enum`,t.enum),!c)continue;let m=Tt({context:e,schema:{description:t["x-enum-descriptions"]?.[o],title:t["x-enum-varnames"]?.[o]??t["x-enumNames"]?.[o],type:c==="null"?"string":c},state:r});m.const=p,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=R(n.accessScopes,m.accessScopes),i.push(m);}return n=q({items:i,schema:n}),n},tc=({context:e,schema:t,state:r})=>{let n=mt({schema:t}),i=[],o=It({schema:t}),p=t.oneOf;for(let a of p){let c=Z({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in a){let f=ke(a.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?i=i.concat(c.items):i.push(c);}if(t.nullable&&i.push({type:"null"}),n=q({items:i,mutateSchemaOneItem:true,schema:n}),o==="object"){let a=Tt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},rc=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref),o=Z({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=R(n.accessScopes,o.accessScopes);}return n},nc=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=mt({schema:r}));let i={};Wr({irSchema:i,schema:r,state:n}),i.default===null&&delete i.default;let o=[Tt({context:e,irSchema:i,schema:r,state:n}),{type:"null"}];return t=q({items:o,schema:t}),t},sc=({context:e,schema:t,state:r})=>{let n=mt({schema:t});Wr({irSchema:n,schema:t,state:r});let i=It({schema:t});return i?t.nullable?nc({context:e,irSchema:n,schema:{...t,type:i},state:r}):Tt({context:e,irSchema:n,schema:{...t,type:i},state:r}):n},Tt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=mt({schema:r}),Wr({irSchema:t,schema:r,state:n})),r.type){case "array":return Qp({context:e,irSchema:t,schema:r,state:n});case "boolean":return Hp({irSchema:t});case "integer":case "number":return zp({irSchema:t,schema:r});case "object":return Gp({context:e,irSchema:t,schema:r,state:n});case "string":return Jp({irSchema:t});default:return Ui({irSchema:t,schema:r,state:n})}},Ui=({irSchema:e,schema:t,state:r})=>(e||(e=mt({schema:t})),e.type="unknown",Wr({irSchema:e,schema:t,state:r}),e),Z=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?rc({context:e,schema:t,state:r}):t.enum?ec({context:e,schema:t,state:r}):t.allOf?Zp({context:e,schema:t,state:r}):t.anyOf?Yp({context:e,schema:t,state:r}):t.oneOf?tc({context:e,schema:t,state:r}):t.type||t.properties?sc({context:e,schema:t,state:r}):Ui({schema:t,state:r})),Xi=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[Q(e)]=Z({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var ic=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",Ct=({context:e,name:t,schema:r})=>{if(oe(e.config.input.pagination).test(t))return  true;if("$ref"in r){let i=e.resolveRef(r.$ref);if("content"in i||"in"in i){let o;if("in"in i&&(o=i.schema),!o){let p=Xe({content:i.content});p?.schema&&(o=p.schema);}return o?Ct({context:e,name:t,schema:o}):false}return Ct({context:e,name:t,schema:i})}for(let i in r.properties)if(oe(e.config.input.pagination).test(i)){let p=r.properties[i];if(typeof p!="boolean"&&!("$ref"in p)){let a=It({schema:p});if(ic(a))return i}}for(let i of r.allOf??[]){let o=Ct({context:e,name:t,schema:i});if(o)return o}return  false};var oc=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},ac=({context:e,method:t,operation:r,path:n,state:i})=>{let o={id:Rt({context:e,id:r.operationId,method:t,path:n,state:i}),method:t,path:n};return r.operationId&&(o.operationId=r.operationId),oc({irOperation:o,operation:r}),o},pc=({context:e,method:t,operation:r,path:n,securitySchemesMap:i,state:o})=>{let p=ac({context:e,method:t,operation:r,path:n,state:o});if(r.parameters&&(p.parameters=r.parameters),r.requestBody){let a="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=Xe({content:a.content});if(c){let m=Ct({context:e,name:"",schema:c.schema&&"$ref"in c.schema?{allOf:[{...c.schema}],description:a.description}:{description:a.description,...c.schema}});p.body={mediaType:c.mediaType,schema:Z({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:a.description}:c.schema&&"$ref"in c.schema?{allOf:[{...c.schema}],description:a.description}:{description:a.description,...c.schema},state:void 0})},m&&(p.body.pagination=m),a.required&&(p.body.required=a.required),c.type&&(p.body.type=c.type);}}for(let a in r.responses){p.responses||(p.responses={});let c=r.responses[a],m="$ref"in c?e.resolveRef(c.$ref):c,f=Xe({content:m.content});f?p.responses[a]={mediaType:f.mediaType,schema:Z({context:e,schema:{description:m.description,...Wi({content:f})},state:void 0})}:p.responses[a]={schema:{description:m.description,type:a==="204"?"void":"unknown"}};}if(r.security){let a=[];for(let c of r.security)for(let m in c){let f=i.get(m);f&&a.push(f);}a.length&&(p.security=a);}return p},Qe=({context:e,method:t,operation:r,path:n,securitySchemesMap:i,state:o})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=pc({context:e,method:t,operation:r,path:n,securitySchemesMap:i,state:o});};var cc=e=>{switch(e){case "query":return  false;default:return}},mc=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},fc=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},ve=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let i="$ref"in n?e.dereference(n):n;r[i.in]||(r[i.in]={}),r[i.in][i.name.toLocaleLowerCase()]=Qi({context:e,parameter:i});}return r},Qi=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=Xe({content:t.content});m&&(r=m.schema);}let n=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},i=Ct({context:e,name:t.name,schema:n}),o=t.style||fc(t.in),p=t.explode!==void 0?t.explode:mc(o),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:cc(t.in),explode:p,location:t.in,name:t.name,schema:Z({context:e,schema:n,state:void 0}),style:o};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),i&&(c.pagination=i),t.required&&(c.required=t.required),c},Hi=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[Q(e)]=Qi({context:t,parameter:r});};var lc=({context:e,requestBody:t})=>{let r=Xe({content:t.content}),n=r?r.schema:void 0,i={description:t.description,...n},o={schema:Z({context:e,schema:i,state:void 0})};return t.description&&(o.description=t.description),t.required&&(o.required=t.required),o},zi=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[Q(e)]=lc({context:t,requestBody:r});};var Gi=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=je(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var _n=e=>{let t=Wt(e.config.input.filters),r;if(t||e.config.input.validate_EXPERIMENTAL){let o=Ki({spec:e.spec,validate:!!e.config.input.validate_EXPERIMENTAL});r=o.graph,Xt({context:e,result:o});}if(t&&r){let o=Kt(e.config.input.filters,e.spec),p=Ut({filters:o,graph:r});Vi({...p,preserveOrder:o.preserveOrder,spec:e.spec});}let n={ids:new Map},i=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let p=e.spec.components.securitySchemes[o],a="$ref"in p?e.resolveRef(p.$ref):p;i.set(o,a);}for(let o in e.spec.components.parameters){let p=`#/components/parameters/${o}`,a=e.spec.components.parameters[o],c="$ref"in a?e.resolveRef(a.$ref):a;Hi({$ref:p,context:e,parameter:c});}for(let o in e.spec.components.requestBodies){let p=`#/components/requestBodies/${o}`,a=e.spec.components.requestBodies[o],c="$ref"in a?e.resolveRef(a.$ref):a;zi({$ref:p,context:e,requestBody:c});}for(let o in e.spec.components.schemas){let p=`#/components/schemas/${o}`,a=e.spec.components.schemas[o];Xi({$ref:p,context:e,schema:a});}}Gi({context:e});for(let o in e.spec.paths){let p=e.spec.paths[o],a=p.$ref?{...e.resolveRef(p.$ref),...p}:p,c={context:e,operation:{description:a.description,parameters:ve({context:e,parameters:a.parameters}),security:e.spec.security,servers:a.servers,summary:a.summary},path:o,securitySchemesMap:i,state:n};a.delete&&Qe({...c,method:"delete",operation:{...c.operation,...a.delete,parameters:N({source:ve({context:e,parameters:a.delete.parameters}),target:c.operation.parameters})}}),a.get&&Qe({...c,method:"get",operation:{...c.operation,...a.get,parameters:N({source:ve({context:e,parameters:a.get.parameters}),target:c.operation.parameters})}}),a.head&&Qe({...c,method:"head",operation:{...c.operation,...a.head,parameters:N({source:ve({context:e,parameters:a.head.parameters}),target:c.operation.parameters})}}),a.options&&Qe({...c,method:"options",operation:{...c.operation,...a.options,parameters:N({source:ve({context:e,parameters:a.options.parameters}),target:c.operation.parameters})}}),a.patch&&Qe({...c,method:"patch",operation:{...c.operation,...a.patch,parameters:N({source:ve({context:e,parameters:a.patch.parameters}),target:c.operation.parameters})}}),a.post&&Qe({...c,method:"post",operation:{...c.operation,...a.post,parameters:N({source:ve({context:e,parameters:a.post.parameters}),target:c.operation.parameters})}}),a.put&&Qe({...c,method:"put",operation:{...c.operation,...a.put,parameters:N({source:ve({context:e,parameters:a.put.parameters}),target:c.operation.parameters})}}),a.trace&&Qe({...c,method:"trace",operation:{...c.operation,...a.trace,parameters:N({source:ve({context:e,parameters:a.trace.parameters}),target:c.operation.parameters})}});}};var Ji=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:i,schemas:o,spec:p})=>{if(p.components){if(p.components.parameters){let a={};if(r)for(let[c,m]of Object.entries(p.components.parameters))t.has(S("parameter",c))&&(a[c]=m);else for(let c of t){let{name:m}=W(c),f=p.components.parameters[m];f&&(a[m]=f);}p.components.parameters=a;}if(p.components.requestBodies){let a={};if(r)for(let[c,m]of Object.entries(p.components.requestBodies))n.has(S("body",c))&&(a[c]=m);else for(let c of n){let{name:m}=W(c),f=p.components.requestBodies[m];f&&(a[m]=f);}p.components.requestBodies=a;}if(p.components.responses){let a={};if(r)for(let[c,m]of Object.entries(p.components.responses))i.has(S("response",c))&&(a[c]=m);else for(let c of i){let{name:m}=W(c),f=p.components.responses[m];f&&(a[m]=f);}p.components.responses=a;}if(p.components.schemas){let a={};if(r)for(let[c,m]of Object.entries(p.components.schemas))o.has(S("schema",c))&&(a[c]=m);else for(let c of o){let{name:m}=W(c),f=p.components.schemas[m];f&&(a[m]=f);}p.components.schemas=a;}}if(p.paths)for(let a of Object.entries(p.paths)){let c=a[0],m=a[1];for(let f of ee){if(!m[f])continue;let u=S("operation",v({method:f,path:c}));e.has(u)||delete m[f];}Object.keys(m).length||delete p.paths[c];}};var $=(e,t)=>{if("$ref"in e&&e.$ref){let r=e.$ref.split("/"),n=r[r.length-2],i=r[r.length-1];if(n&&i){let o=Vt(n);o==="unknown"&&console.warn(`unsupported type: ${n}`),t.add(S(o,i));}}if(e.items&&typeof e.items=="object"&&$(e.items,t),e.properties)for(let r of Object.values(e.properties))typeof r=="object"&&$(r,t);if(e.additionalProperties&&typeof e.additionalProperties=="object"&&$(e.additionalProperties,t),e.allOf)for(let r of e.allOf)$(r,t);if(e.anyOf)for(let r of e.anyOf)$(r,t);if(e.contains&&$(e.contains,t),e.not&&$(e.not,t),e.oneOf)for(let r of e.oneOf)$(r,t);if(e.prefixItems)for(let r of e.prefixItems)$(r,t);e.propertyNames&&typeof e.propertyNames=="object"&&$(e.propertyNames,t);},Zi=({spec:e,validate:t})=>{let r={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},n=[],i=new Map;if(e.components){if(e.components.schemas)for(let[o,p]of Object.entries(e.components.schemas)){let a=new Set;$(p,a),r.schemas.set(S("schema",o),{dependencies:a,deprecated:"deprecated"in p?!!p.deprecated:false});}if(e.components.parameters)for(let[o,p]of Object.entries(e.components.parameters)){let a=new Set;if("$ref"in p)$(p,a);else if(p.schema&&$(p.schema,a),p.content)for(let c of Object.values(p.content))c.schema&&$(c.schema,a);r.parameters.set(S("parameter",o),{dependencies:a,deprecated:"deprecated"in p?!!p.deprecated:false});}if(e.components.requestBodies)for(let[o,p]of Object.entries(e.components.requestBodies)){let a=new Set;if("$ref"in p)$(p,a);else for(let c of Object.values(p.content))c.schema&&$(c.schema,a);r.requestBodies.set(S("body",o),{dependencies:a,deprecated:false});}if(e.components.responses)for(let[o,p]of Object.entries(e.components.responses)){let a=new Set;if("$ref"in p)$(p,a);else if(p.content)for(let c of Object.values(p.content))c.schema&&$(c.schema,a);r.responses.set(S("response",o),{dependencies:a,deprecated:false});}}if(e.paths)for(let o of Object.entries(e.paths)){let p=o[0],a=o[1];for(let c of ee){let m=a[c];if(!m)continue;let f=v({method:c,path:p});t&&m.operationId&&(i.has(m.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",p,c,"operationId"],severity:"error"}):i.set(m.operationId,f));let l=new Set;if(m.requestBody)if("$ref"in m.requestBody)$(m.requestBody,l);else for(let u of Object.values(m.requestBody.content))u.schema&&$(u.schema,l);if(m.responses){for(let u of Object.values(m.responses))if(u){if("$ref"in u)$(u,l);else if(u.content)for(let d of Object.values(u.content))d.schema&&$(d.schema,l);}}if(m.parameters)for(let u of m.parameters)"$ref"in u?$(u,l):u.schema&&$(u.schema,l);r.operations.set(S("operation",f),{dependencies:l,deprecated:!!m.deprecated,tags:new Set(m.tags)});}}if(t&&e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&n.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let o=0;o<e.servers.length;o++){let p=e.servers[o];!p||typeof p!="object"?n.push({code:"invalid_type",context:{actual:typeof p,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",o],severity:"error"}):p.url||n.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",o],severity:"error"});}}return {graph:r,issues:n,valid:!n.some(o=>o.severity==="error")}};var Yi=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&We({mediaType:t})?{...r,format:"binary"}:r:We({mediaType:t})?{format:"binary",type:"string"}:void 0},He=({content:e})=>{for(let t in e)return {mediaType:t,schema:e[t].schema,type:Qt({mediaType:t})}};var $e=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],uc=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Ur=({irSchema:e,schema:t,state:r})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum!==void 0&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum!==void 0&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=R(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=R(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=R(e.accessScopes,["both"]));},dc=({context:e,irSchema:t={},schema:r,state:n})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let i=[];for(let o of r.prefixItems??[]){let p=H({context:e,schema:o,state:n});t.accessScopes=R(t.accessScopes,p.accessScopes),i.push(p);}if(r.items){let o=H({context:e,schema:r.items,state:n});if(t.accessScopes=R(t.accessScopes,o.accessScopes),!i.length&&r.maxItems&&r.maxItems===r.minItems)i=Array(r.maxItems).fill(o);else {let p=r.items.allOf||r.items.anyOf||r.items.oneOf;p&&p.length>1&&!$e({schema:r.items}).includes("null")?t={...t,...o}:i.push(o);}}return t=q({items:i,schema:t}),t},yc=({irSchema:e={}})=>(e.type="boolean",e),hc=({irSchema:e={}})=>(e.type="null",e),gc=({irSchema:e={},schema:t})=>(e.type=t.type,e),xc=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let i={};for(let o in r.properties){let p=r.properties[o];if(typeof p!="boolean"){let a=H({context:e,schema:p,state:{...n,isProperty:true}});t.accessScopes=R(t.accessScopes,a.accessScopes),i[o]=a;}}if(Object.keys(i).length&&(t.properties=i),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let o=H({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=o;}return r.propertyNames&&(t.propertyNames=H({context:e,schema:r.propertyNames,state:n})),r.required&&(t.required=r.required),t},bc=({irSchema:e={}})=>(e.type="string",e),ze=({schema:e})=>{let t={};return uc({irSchema:t,schema:e}),t},Oc=({context:e,schema:t,state:r})=>{let n=ze({schema:t}),i=[],o=$e({schema:t}),p=t.allOf;for(let a of p){let c=H({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),i.push(c),a.$ref){let m=e.resolveRef(a.$ref);if(m.discriminator&&r.$ref){let l=ke(r.$ref,m.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(u.required=[m.discriminator.propertyName]),i.push(u);}if(!r.circularReferenceTracker.has(a.$ref)){let f=H({context:e,schema:m,state:{...r,$ref:a.$ref}});n.accessScopes=R(n.accessScopes,f.accessScopes);}}}if(o.includes("object")){let a=Pt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of p){let f=m.$ref?e.resolveRef(m.$ref):m;if($e({schema:f}).includes("object")){let l=Pt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,l.accessScopes),l.properties?.[c]){a.properties[c]=l.properties[c];break}}}i.push(a);}}if(n=q({items:i,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),o.includes("null")){let a=[{type:"null"}];i.length&&a.unshift(n),n={items:a,logicalOperator:"or"};}return n},Sc=({context:e,schema:t,state:r})=>{let n=ze({schema:t}),i=[],o=$e({schema:t}),p=t.anyOf;for(let a of p){let c=H({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.discriminator&&a.$ref){let f=ke(a.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}i.push(c);}if(o.includes("null")&&i.push({type:"null"}),n=q({items:i,mutateSchemaOneItem:true,schema:n}),o.includes("object")){let a=Pt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},Rc=({context:e,schema:t,state:r})=>{let n=ze({schema:t});n.type="enum";let i=[],o=$e({schema:t});for(let[p,a]of t.enum.entries()){let c=typeof a,m;if(c==="string"||c==="number"||c==="boolean"?m=c:c==="object"&&Array.isArray(a)?m="array":a===null?o.includes("null")&&(m="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${a}" for enum`,t.enum),!m)continue;let f=Pt({context:e,schema:{const:a,description:t["x-enum-descriptions"]?.[p],title:t["x-enum-varnames"]?.[p]??t["x-enumNames"]?.[p],type:m},state:r});n.accessScopes=R(n.accessScopes,f.accessScopes),i.push(f);}return n=q({items:i,schema:n}),n},Ic=({context:e,schema:t,state:r})=>{let n=ze({schema:t}),i=[],o=$e({schema:t}),p=t.oneOf;for(let a of p){let c=H({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.discriminator&&a.$ref){let f=ke(a.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?i=i.concat(c.items):i.push(c);}if(o.includes("null")&&i.push({type:"null"}),n=q({items:i,mutateSchemaOneItem:true,schema:n}),o.includes("object")){let a=Pt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},Tc=({context:e,schema:t,state:r})=>{let n=ze({schema:t}),i={};if(i.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let p=e.resolveRef(t.$ref),a=H({context:e,schema:p,state:{...r,$ref:t.$ref,isProperty:false}});i.accessScopes=R(i.accessScopes,a.accessScopes);}let o=[];return o.push(i),t.type&&typeof t.type!="string"&&t.type.includes("null")&&o.push({type:"null"}),n=q({items:o,mutateSchemaOneItem:true,schema:n}),n},Pt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=ze({schema:r}),Ur({irSchema:t,schema:r,state:n})),r.type){case "array":return dc({context:e,irSchema:t,schema:r,state:n});case "boolean":return yc({irSchema:t});case "integer":case "number":return gc({irSchema:t,schema:r});case "null":return hc({irSchema:t});case "object":return xc({context:e,irSchema:t,schema:r,state:n});case "string":return bc({irSchema:t});default:return eo({irSchema:t,schema:r,state:n})}},Cc=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=ze({schema:r}));let i={};Ur({irSchema:i,schema:r,state:n}),r.type.includes("null")&&i.default===null&&delete i.default;let o=[];for(let p of r.type)if(p==="null")o.push({type:"null"});else {let a=Pt({context:e,irSchema:i,schema:{...r,type:p},state:n});t.accessScopes=R(t.accessScopes,a.accessScopes),o.push(a);}return t=q({items:o,schema:t}),t},Pc=({context:e,schema:t,state:r})=>{let n=ze({schema:t});Ur({irSchema:n,schema:t,state:r});let i=$e({schema:t});return i.length===1?Pt({context:e,irSchema:n,schema:{...t,type:i[0]},state:r}):Cc({context:e,irSchema:n,schema:{...t,type:i},state:r})},eo=({irSchema:e,schema:t,state:r})=>(e||(e=ze({schema:t})),e.type="unknown",Ur({irSchema:e,schema:t,state:r}),e),H=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Tc({context:e,schema:t,state:r}):t.enum?Rc({context:e,schema:t,state:r}):t.allOf?Oc({context:e,schema:t,state:r}):t.anyOf?Sc({context:e,schema:t,state:r}):t.oneOf?Ic({context:e,schema:t,state:r}):t.type||t.properties?Pc({context:e,schema:t,state:r}):eo({schema:t,state:r})),to=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[Q(e)]=H({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var ro=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),jt=({context:e,name:t,schema:r})=>{if(oe(e.config.input.pagination).test(t))return  true;if(r.$ref){let i=e.resolveRef(r.$ref);if("content"in i||"in"in i){let o;if("in"in i&&(o=i.schema),!o){let p=He({content:i.content});p?.schema&&(o=p.schema);}return o?jt({context:e,name:t,schema:o}):false}return jt({context:e,name:t,schema:i})}for(let i in r.properties)if(oe(e.config.input.pagination).test(i)){let p=r.properties[i];if(typeof p!="boolean"){let a=$e({schema:p});if(!a.length){let m=(p.anyOf??p.oneOf??[]).filter(f=>f.type!=="null");if(m.length===1){let f=$e({schema:m[0]});if(ro(f))return i}}if(ro(a))return i}}for(let i of r.allOf??[]){let o=jt({context:e,name:t,schema:i});if(o)return o}return  false};var jc=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Ac=({context:e,method:t,operation:r,path:n,state:i})=>{let o={id:Rt({context:e,id:r.operationId,method:t,path:n,state:i}),method:t,path:n};return r.operationId&&(o.operationId=r.operationId),jc({irOperation:o,operation:r}),o},Ec=({context:e,method:t,operation:r,path:n,securitySchemesMap:i,state:o})=>{let p=Ac({context:e,method:t,operation:r,path:n,state:o});if(r.parameters&&(p.parameters=r.parameters),r.requestBody){let a="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=He({content:a.content});if(c){let m=jt({context:e,name:"",schema:{description:a.description,...c.schema}});p.body={mediaType:c.mediaType,schema:H({context:e,schema:{description:a.description,..."$ref"in r.requestBody?r.requestBody:c.schema},state:void 0})},m&&(p.body.pagination=m),a.required&&(p.body.required=a.required),c.type&&(p.body.type=c.type);}}for(let a in r.responses){p.responses||(p.responses={});let c=r.responses[a],m="$ref"in c?e.resolveRef(c.$ref):c,f=He({content:m.content});f?p.responses[a]={mediaType:f.mediaType,schema:H({context:e,schema:{description:m.description,...Yi({content:f})},state:void 0})}:p.responses[a]={schema:{description:m.description,type:a==="204"?"void":"unknown"}};}if(r.security){let a=[];for(let c of r.security)for(let m in c){let f=i.get(m);f&&a.push(f);}a.length&&(p.security=a);}return p},Ge=({context:e,method:t,operation:r,path:n,securitySchemesMap:i,state:o})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=Ec({context:e,method:t,operation:r,path:n,securitySchemesMap:i,state:o});};var Nc=e=>{switch(e){case "query":return  false;default:return}},kc=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},vc=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},we=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let i="$ref"in n?e.dereference(n):n;r[i.in]||(r[i.in]={}),r[i.in][i.name.toLocaleLowerCase()]=no({context:e,parameter:i});}return r},no=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=He({content:t.content});m&&(r=m.schema);}let n={deprecated:t.deprecated,description:t.description,...r},i=jt({context:e,name:t.name,schema:n}),o=t.style||vc(t.in),p=t.explode!==void 0?t.explode:kc(o),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:Nc(t.in),explode:p,location:t.in,name:t.name,schema:H({context:e,schema:n,state:void 0}),style:o};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),i&&(c.pagination=i),t.required&&(c.required=t.required),c},so=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[Q(e)]=no({context:t,parameter:r});};var $c=({context:e,requestBody:t})=>{let r=He({content:t.content}),n=r?r.schema:void 0,i={description:t.description,...n},o={schema:H({context:e,schema:i,state:void 0})};return t.description&&(o.description=t.description),t.required&&(o.required=t.required),o},io=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[Q(e)]=$c({context:t,requestBody:r});};var oo=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=je(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var Bn=e=>{let t=Wt(e.config.input.filters),r;if(t||e.config.input.validate_EXPERIMENTAL){let o=Zi({spec:e.spec,validate:!!e.config.input.validate_EXPERIMENTAL});r=o.graph,Xt({context:e,result:o});}if(t&&r){let o=Kt(e.config.input.filters,e.spec),p=Ut({filters:o,graph:r});Ji({...p,preserveOrder:o.preserveOrder,spec:e.spec});}let n={ids:new Map},i=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let p=e.spec.components.securitySchemes[o],a="$ref"in p?e.resolveRef(p.$ref):p;i.set(o,a);}for(let o in e.spec.components.parameters){let p=`#/components/parameters/${o}`,a=e.spec.components.parameters[o],c="$ref"in a?e.resolveRef(a.$ref):a;so({$ref:p,context:e,parameter:c});}for(let o in e.spec.components.requestBodies){let p=`#/components/requestBodies/${o}`,a=e.spec.components.requestBodies[o],c="$ref"in a?e.resolveRef(a.$ref):a;io({$ref:p,context:e,requestBody:c});}for(let o in e.spec.components.schemas){let p=`#/components/schemas/${o}`,a=e.spec.components.schemas[o];to({$ref:p,context:e,schema:a});}}oo({context:e});for(let o in e.spec.paths){let p=e.spec.paths[o],a=p.$ref?{...e.resolveRef(p.$ref),...p}:p,c={context:e,operation:{description:a.description,parameters:we({context:e,parameters:a.parameters}),security:e.spec.security,servers:a.servers,summary:a.summary},path:o,securitySchemesMap:i,state:n};a.delete&&Ge({...c,method:"delete",operation:{...c.operation,...a.delete,parameters:N({source:we({context:e,parameters:a.delete.parameters}),target:c.operation.parameters})}}),a.get&&Ge({...c,method:"get",operation:{...c.operation,...a.get,parameters:N({source:we({context:e,parameters:a.get.parameters}),target:c.operation.parameters})}}),a.head&&Ge({...c,method:"head",operation:{...c.operation,...a.head,parameters:N({source:we({context:e,parameters:a.head.parameters}),target:c.operation.parameters})}}),a.options&&Ge({...c,method:"options",operation:{...c.operation,...a.options,parameters:N({source:we({context:e,parameters:a.options.parameters}),target:c.operation.parameters})}}),a.patch&&Ge({...c,method:"patch",operation:{...c.operation,...a.patch,parameters:N({source:we({context:e,parameters:a.patch.parameters}),target:c.operation.parameters})}}),a.post&&Ge({...c,method:"post",operation:{...c.operation,...a.post,parameters:N({source:we({context:e,parameters:a.post.parameters}),target:c.operation.parameters})}}),a.put&&Ge({...c,method:"put",operation:{...c.operation,...a.put,parameters:N({source:we({context:e,parameters:a.put.parameters}),target:c.operation.parameters})}}),a.trace&&Ge({...c,method:"trace",operation:{...c.operation,...a.trace,parameters:N({source:we({context:e,parameters:a.trace.parameters}),target:c.operation.parameters})}});}};var Xr="#/components/schemas/";var zt=({config:e,name:t})=>{let r=e.plugins["@hey-api/sdk"];if(r?.classNameBuilder){let n="";return typeof r.classNameBuilder=="function"?n=r.classNameBuilder(t):n=r.classNameBuilder.replace("{{name}}",t),n}return t},ao=e=>T().plugins["@hey-api/typescript"]?.style==="PascalCase"?P({case:"PascalCase",value:e}):e,po=e=>{let t=ao(e);return St(t).replace(pe,"_$1")};function ft(e,t,r){return r.indexOf(e)===t}function lo(e,t){let r=e.toLocaleLowerCase(),n=t.toLocaleLowerCase();return r.localeCompare(n,"en")}var mr=(e,t)=>lo(e.name,t.name);function uo(e){return e.sort(mr)}var Mc=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},yo=e=>e.map(t=>Qr(t.value,true)).filter(ft).join(" | "),Qr=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,Vn=e=>{let t=Mc(e.value,e.customName),r=Qr(e.value);return {key:t,value:r}};var Kn=e=>{let t=po(e);return {$ref:Xr+e,name:t}};var fr=e=>e.format==="date"||e.format==="date-time",Wn=e=>{let t=T();return e.base==="binary"?s.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.dates&&fr(e)?s.typeNode("Date"):s.typeNode(e.base)},Fc=e=>{let t=e.base==="null"?false:e.isNullable,r=Wn(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(Xr)){let i=Kn(e.base);r=s.typeNode(i.name);}return s.typeUnionNode({isNullable:t,types:[r]})},Lc=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(n=>de(n));return s.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(de(e.link));return s.typeTupleNode({isNullable:e.isNullable,types:t})}return s.typeArrayNode([de(e.link)],e.isNullable)}return s.typeArrayNode([Wn(e)],e.isNullable)},Dc=e=>{let t=e.enum.map(r=>Qr(r.value));return s.typeUnionNode({isNullable:e.isNullable,types:t})},_c=e=>{let t=e.link&&!Array.isArray(e.link)?de(e.link):Wn(e);return s.typeRecordNode(["string"],[t],e.isNullable,true)},ho=({model:e,style:t})=>{let r=e.properties.map(i=>s.nodeToString({node:de(i),unescape:true})).filter(ft),n=t==="union"?s.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(i=>i.isNullable),types:r}):s.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?n:s.typeParenthesizedNode({type:n})},Bc=e=>{if(!e.properties.length)return s.typeNode("unknown");let t=T(),r=U(t),n=e.properties.map(i=>{let o=i.isRequired?"":"?",p=de(i),a=r?/^\dXX$/.test(i.name)?Ve(i.name):i.name:Ve(er(xo(i.name)));return i.name==="[key: string]"&&(a=i.name,o&&(o="",p=s.typeUnionNode({types:[p,"undefined"]}))),{comment:[i.description&&M(i.description),i.deprecated&&"@deprecated"],isReadOnly:i.isReadOnly,isRequired:o==="",name:a,type:p}});return s.typeInterfaceNode({isNullable:e.isNullable,properties:n,useLegacyResolution:true})},de=e=>{switch(e.export){case "all-of":return ho({model:e,style:"intersection"});case "any-of":case "one-of":return ho({model:e,style:"union"});case "array":return Lc(e);case "dictionary":return _c(e);case "enum":return Dc(e);case "interface":return Bc(e);case "const":case "generic":case "reference":default:return Fc(e)}},ye=({client:e,count:t=1,create:r=false,meta:n,nameTransformer:i})=>{let o={created:false,name:""},p=n.name;i&&(p=i(p)),t>1&&(p=`${p}${t}`);let a=e.types[p];return a?a.$ref===n.$ref?o={created:false,name:p}:o=ye({client:e,count:t+1,create:r,meta:n,nameTransformer:i}):r&&(e.types[p]=n,o={created:true,name:p}),o},go=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},xo=e=>{let t=T();return U(t)?P({case:"camelCase",value:Fn(e)}).replace(pe,"_$1"):e};var Me=e=>e.some(r=>r.isRequired);var om=({config:e,spec:t})=>{let r=new Dr({config:e,spec:t});if("swagger"in r.spec)return Dn(r),r;switch(r.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return _n(r),r;case "3.1.0":case "3.1.1":return Bn(r),r;}throw new Error("Unsupported OpenAPI specification")};var Qn=(e,t)=>{let r=T();if(Array.isArray(e))return e.map(i=>Qn(i));if(typeof e!="object"||e===null)return e;let n={...e};return Object.entries(n).forEach(([i,o])=>{if(r.plugins["@hey-api/schemas"]?.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(i)&&t!=="properties"){delete n[i];return}i==="$ref"&&typeof o=="string"&&(n[i]=decodeURIComponent(o)),o&&typeof o=="object"&&(n[i]=Qn(o,i));}),n},am=(e,t)=>{let r=T(),n=St(e),i=r.plugins["@hey-api/schemas"];return i?.nameBuilder?typeof i.nameBuilder=="function"?i.nameBuilder(n,t):i.nameBuilder.replace("{{name}}",n):`${n}Schema`},Oo=({files:e,openApi:t,plugin:r})=>{let n=T();e.schemas=new Ae({dir:n.output.path,exportFromIndex:r.exportFromIndex,id:"schemas",name:"schemas.ts"});let i=(o,p)=>{let a=Qn(p),c=s.objectExpression({obj:a}),m=s.constVariable({assertion:"const",exportConst:true,expression:c,name:am(o,p)});e.schemas.add(m);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([o,p])=>{i(o,p);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([o,p])=>{i(o,p);});};var Hn={_handler:Ii,_handlerLegacy:Oo,exportFromIndex:false,name:"@hey-api/schemas",nameBuilder:e=>`${e}Schema`,output:"schemas",type:"json"};var Je=({operation:e})=>{let t=[];return e.summary&&t.push(M(e.summary)),e.description&&t.push(M(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0},At=({context:e,operation:t})=>{let n=j(e.config).name==="@hey-api/client-nuxt",i=e.config.plugins["@hey-api/sdk"];return i&&!i.client&&!i.instance||n||Br(t)};var Gt="TComposable",Fe="DefaultT",zn="ResT",re="sdk";var pm=({dataExpression:e})=>{let t=e!==void 0?s.callExpression({functionName:"BigInt",parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(t){if(typeof e=="string")return [t];if(e)return [s.assignment({left:e,right:t})]}return []},cm=({dataExpression:e})=>{let t=s.identifier({text:"Date"});return typeof e=="string"?[s.newExpression({argumentsArray:[s.identifier({text:e})],expression:t})]:e?[s.assignment({left:e,right:s.newExpression({argumentsArray:[e],expression:t})})]:[]},Hr=({id:e,type:t})=>{let r="";switch(t){case "data":r="DataResponseTransformer";break;case "error":r="ErrorResponseTransformer";break;case "response":r="ResponseTransformer";break}return `${Lt}${P({case:"camelCase",value:e})}${r}`},mm=({$ref:e,type:t})=>{let r="";switch(t){case "response":r="SchemaResponseTransformer";break}let n=e.split("/");return `${n.slice(0,n.length-1).join("/")}/${P({case:"camelCase",value:n[n.length-1]})}${r}`},So=({$ref:e})=>mm({$ref:e,type:"response"}),dr="transformers",zr="data",lr=e=>e.map(t=>h__default.default.isStatement(t)?t:s.expressionToStatement({expression:t})),Io=({node:e})=>e.kind===h__default.default.SyntaxKind.ReturnStatement,To=({context:e,plugin:t,schema:r})=>{let n=s.identifier({text:zr}),i=ur({context:e,dataExpression:n,plugin:t,schema:r});return i.length&&!Io({node:i[i.length-1]})&&i.push(s.returnStatement({expression:n})),i},ur=({context:e,dataExpression:t,plugin:r,schema:n})=>{let i=e.file({id:dr});if(n.$ref){let o=i.identifier({$ref:So({$ref:n.$ref}),create:true,namespace:"value"});if(o.created&&o.name){let p=e.resolveIrRef(n.$ref),a=To({context:e,plugin:r,schema:p});if(a.length){let c=s.constVariable({expression:s.arrowFunction({async:false,multiLine:true,parameters:[{name:zr,type:s.keywordTypeNode({keyword:"any"})}],statements:lr(a)}),name:o.name});i.add(c);}else o=i.blockIdentifier({$ref:So({$ref:n.$ref}),namespace:"value"});}if(o.name){let p=s.callExpression({functionName:o.name,parameters:[t]});if(t)return typeof t=="string"&&t==="item"?[s.returnStatement({expression:p})]:[typeof t=="string"?p:s.assignment({left:t,right:p})]}return []}if(n.type==="array"){if(!t||typeof t=="string")return [];let o=n.items?ur({context:e,dataExpression:"item",plugin:r,schema:n.items?.[0]?n.items[0]:{...n,type:void 0}}):[];if(!o.length)return [];let p=lr(o);return p.some(c=>Io({node:c}))||p.push(s.returnStatement({expression:s.identifier({text:"item"})})),[s.assignment({left:t,right:s.callExpression({functionName:s.propertyAccessExpression({expression:t,name:"map"}),parameters:[s.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:p})]})})]}if(n.type==="object"){let o=[],p=n.required??[];for(let a in n.properties){let c=n.properties[a],m=s.propertyAccessExpression({expression:t||zr,name:a}),f=ur({context:e,dataExpression:m,plugin:r,schema:c});if(!f.length)continue;let l=!c.items?.find(d=>d.type==="null");p.includes(a)&&l?o=o.concat(f):o.push(s.ifStatement({expression:m,thenStatement:s.block({statements:lr(f)})}));}return o}if(r.dates&&n.type==="string"&&(n.format==="date"||n.format==="date-time"))return cm({dataExpression:t});if(r.bigInt&&n.type==="integer"&&n.format==="int64")return pm({dataExpression:t});if(n.items){if(n.items.length===1)return ur({context:e,dataExpression:"item",plugin:r,schema:n.items[0]});let o=[];if(n.logicalOperator==="and"||n.items.length===2&&n.items.find(p=>p.type==="null"||p.type==="void")){for(let p of n.items){let a=ur({context:e,dataExpression:t||"item",plugin:r,schema:p});if(a.length)if(t)o=o.concat(a);else {let c=s.identifier({text:"item"});o.push(s.ifStatement({expression:c,thenStatement:s.block({statements:lr(a)})}),s.returnStatement({expression:c}));}}return o}n.type!=="enum"&&((n.items??[]).every(p=>["boolean","integer","null","number","string"].includes(p.type))||console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(n)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`));}return []},Co=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:dr,path:t.output});e.subscribe("operation",({operation:n})=>{let{response:i}=Ee(n);if(!i)return;if(i.items&&i.items.length>1){e.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${v(n)} has ${i.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let o=e.file({id:A}).identifier({$ref:k({config:e.config,id:n.id,type:"response"}),namespace:"type"});if(!o.name)return;let p=r.identifier({$ref:Hr({id:n.id,type:"response"}),create:true,namespace:"value"});if(!p.name)return;let a=To({context:e,plugin:t,schema:i});if(a.length){r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:o.name});let c=s.constVariable({exportConst:true,expression:s.arrowFunction({async:true,multiLine:true,parameters:[{name:zr,type:s.keywordTypeNode({keyword:"any"})}],returnType:s.typeReferenceNode({typeArguments:[s.typeReferenceNode({typeName:o.name})],typeName:"Promise"}),statements:lr(a)}),name:p.name});r.add(c);}else p=r.blockIdentifier({$ref:Hr({id:n.id,type:"response"}),namespace:"value"});});};var fm=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},Po=({operation:e,plugin:t})=>{if(!e.security||!t.auth)return [];let r=[];for(let n of e.security){let i=fm({securitySchemeObject:n});i?r.push(i):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(n,null,2)}`);}return r};var y={actions:{args:s.identifier({text:"args"}),base64:s.identifier({text:"base64"}),bic:s.identifier({text:"bic"}),brand:s.identifier({text:"brand"}),bytes:s.identifier({text:"bytes"}),check:s.identifier({text:"check"}),checkItems:s.identifier({text:"checkItems"}),creditCard:s.identifier({text:"creditCard"}),cuid2:s.identifier({text:"cuid2"}),decimal:s.identifier({text:"decimal"}),description:s.identifier({text:"description"}),digits:s.identifier({text:"digits"}),email:s.identifier({text:"email"}),emoji:s.identifier({text:"emoji"}),empty:s.identifier({text:"empty"}),endsWith:s.identifier({text:"endsWith"}),entries:s.identifier({text:"entries"}),everyItem:s.identifier({text:"everyItem"}),excludes:s.identifier({text:"excludes"}),filterItems:s.identifier({text:"filterItems"}),findItem:s.identifier({text:"findItem"}),finite:s.identifier({text:"finite"}),flavor:s.identifier({text:"flavor"}),graphemes:s.identifier({text:"graphemes"}),gtValue:s.identifier({text:"gtValue"}),hash:s.identifier({text:"hash"}),hexColor:s.identifier({text:"hexColor"}),hexadecimal:s.identifier({text:"hexadecimal"}),imei:s.identifier({text:"imei"}),includes:s.identifier({text:"includes"}),integer:s.identifier({text:"integer"}),ip:s.identifier({text:"ip"}),ipv4:s.identifier({text:"ipv4"}),ipv6:s.identifier({text:"ipv6"}),isoDate:s.identifier({text:"isoDate"}),isoDateTime:s.identifier({text:"isoDateTime"}),isoTime:s.identifier({text:"isoTime"}),isoTimeSecond:s.identifier({text:"isoTimeSecond"}),isoTimestamp:s.identifier({text:"isoTimestamp"}),isoWeek:s.identifier({text:"isoWeek"}),length:s.identifier({text:"length"}),ltValue:s.identifier({text:"ltValue"}),mac:s.identifier({text:"mac"}),mac48:s.identifier({text:"mac48"}),mac64:s.identifier({text:"mac64"}),mapItems:s.identifier({text:"mapItems"}),maxBytes:s.identifier({text:"maxBytes"}),maxEntries:s.identifier({text:"maxEntries"}),maxGraphemes:s.identifier({text:"maxGraphemes"}),maxLength:s.identifier({text:"maxLength"}),maxSize:s.identifier({text:"maxSize"}),maxValue:s.identifier({text:"maxValue"}),maxWords:s.identifier({text:"maxWords"}),metadata:s.identifier({text:"metadata"}),mimeType:s.identifier({text:"mimeType"}),minBytes:s.identifier({text:"minBytes"}),minEntries:s.identifier({text:"minEntries"}),minGraphemes:s.identifier({text:"minGraphemes"}),minLength:s.identifier({text:"minLength"}),minSize:s.identifier({text:"minSize"}),minValue:s.identifier({text:"minValue"}),minWords:s.identifier({text:"minWords"}),multipleOf:s.identifier({text:"multipleOf"}),nanoid:s.identifier({text:"nanoid"}),nonEmpty:s.identifier({text:"nonEmpty"}),normalize:s.identifier({text:"normalize"}),notBytes:s.identifier({text:"notBytes"}),notEntries:s.identifier({text:"notEntries"}),notGraphemes:s.identifier({text:"notGraphemes"}),notLength:s.identifier({text:"notLength"}),notSize:s.identifier({text:"notSize"}),notValue:s.identifier({text:"notValue"}),notValues:s.identifier({text:"notValues"}),notWords:s.identifier({text:"notWords"}),octal:s.identifier({text:"octal"}),parseJson:s.identifier({text:"parseJson"}),partialCheck:s.identifier({text:"partialCheck"}),rawCheck:s.identifier({text:"rawCheck"}),rawTransform:s.identifier({text:"rawTransform"}),readonly:s.identifier({text:"readonly"}),reduceItems:s.identifier({text:"reduceItems"}),regex:s.identifier({text:"regex"}),returns:s.identifier({text:"returns"}),rfcEmail:s.identifier({text:"rfcEmail"}),safeInteger:s.identifier({text:"safeInteger"}),size:s.identifier({text:"size"}),slug:s.identifier({text:"slug"}),someItem:s.identifier({text:"someItem"}),sortItems:s.identifier({text:"sortItems"}),startsWith:s.identifier({text:"startsWith"}),stringifyJson:s.identifier({text:"stringifyJson"}),title:s.identifier({text:"title"}),toLowerCase:s.identifier({text:"toLowerCase"}),toMaxValue:s.identifier({text:"toMaxValue"}),toMinValue:s.identifier({text:"toMinValue"}),toUpperCase:s.identifier({text:"toUpperCase"}),transform:s.identifier({text:"transform"}),trim:s.identifier({text:"trim"}),trimEnd:s.identifier({text:"trimEnd"}),trimStart:s.identifier({text:"trimStart"}),ulid:s.identifier({text:"ulid"}),url:s.identifier({text:"url"}),uuid:s.identifier({text:"uuid"}),value:s.identifier({text:"value"}),values:s.identifier({text:"values"}),words:s.identifier({text:"words"})},methods:{assert:s.identifier({text:"assert"}),config:s.identifier({text:"config"}),fallback:s.identifier({text:"fallback"}),flatten:s.identifier({text:"flatten"}),forward:s.identifier({text:"forward"}),getDefault:s.identifier({text:"getDefault"}),getDefaults:s.identifier({text:"getDefaults"}),getDescription:s.identifier({text:"getDescription"}),getFallback:s.identifier({text:"getFallback"}),getFallbacks:s.identifier({text:"getFallbacks"}),getMetadata:s.identifier({text:"getMetadata"}),getTitle:s.identifier({text:"getTitle"}),is:s.identifier({text:"is"}),keyof:s.identifier({text:"keyof"}),message:s.identifier({text:"message"}),omit:s.identifier({text:"omit"}),parse:s.identifier({text:"parse"}),parser:s.identifier({text:"parser"}),partial:s.identifier({text:"partial"}),pick:s.identifier({text:"pick"}),pipe:s.identifier({text:"pipe"}),required:s.identifier({text:"required"}),safeParse:s.identifier({text:"safeParse"}),safeParser:s.identifier({text:"safeParser"}),summarize:s.identifier({text:"summarize"}),unwrap:s.identifier({text:"unwrap"})},schemas:{any:s.identifier({text:"any"}),array:s.identifier({text:"array"}),bigInt:s.identifier({text:"bigint"}),blob:s.identifier({text:"blob"}),boolean:s.identifier({text:"boolean"}),custom:s.identifier({text:"custom"}),date:s.identifier({text:"date"}),enum:s.identifier({text:"enum"}),exactOptional:s.identifier({text:"exactOptional"}),file:s.identifier({text:"file"}),function:s.identifier({text:"function"}),instance:s.identifier({text:"instance"}),intersect:s.identifier({text:"intersect"}),lazy:s.identifier({text:"lazy"}),literal:s.identifier({text:"literal"}),looseObject:s.identifier({text:"looseObject"}),looseTuple:s.identifier({text:"looseTuple"}),map:s.identifier({text:"map"}),nan:s.identifier({text:"nan"}),never:s.identifier({text:"never"}),nonNullable:s.identifier({text:"nonNullable"}),nonNullish:s.identifier({text:"nonNullish"}),nonOptional:s.identifier({text:"nonOptional"}),null:s.identifier({text:"null"}),nullable:s.identifier({text:"nullable"}),nullish:s.identifier({text:"nullish"}),number:s.identifier({text:"number"}),object:s.identifier({text:"object"}),objectWithRest:s.identifier({text:"objectWithRest"}),optional:s.identifier({text:"optional"}),picklist:s.identifier({text:"picklist"}),promise:s.identifier({text:"promise"}),record:s.identifier({text:"record"}),set:s.identifier({text:"set"}),strictObject:s.identifier({text:"strictObject"}),strictTuple:s.identifier({text:"strictTuple"}),string:s.identifier({text:"string"}),symbol:s.identifier({text:"symbol"}),tuple:s.identifier({text:"tuple"}),tupleWithRest:s.identifier({text:"tupleWithRest"}),undefined:s.identifier({text:"undefined"}),undefinedable:s.identifier({text:"undefinedable"}),union:s.identifier({text:"union"}),unknown:s.identifier({text:"unknown"}),variant:s.identifier({text:"variant"}),void:s.identifier({text:"void"})},types:{GenericSchema:s.identifier({text:"GenericSchema"})},v:s.identifier({text:"v"})},Jt="valibot";var Oe=({schema:e})=>{let t=[];return e.title&&t.push(M(e.title)),e.description&&t.push(M(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0};var gr="zod",lm=s.identifier({text:"and"}),um=s.identifier({text:"coerce"}),dm=s.identifier({text:"default"}),ym=s.identifier({text:"intersection"}),hm=s.identifier({text:"lazy"}),Ao=s.identifier({text:"length"}),Gr=s.identifier({text:"literal"}),Eo=s.identifier({text:"max"}),No=s.identifier({text:"min"}),gm=s.identifier({text:"object"}),xm=s.identifier({text:"optional"}),bm=s.identifier({text:"readonly"}),Om=s.identifier({text:"regex"}),Sm=s.identifier({text:"union"}),D=s.identifier({text:"z"}),Jn=e=>`z-${e}`,Rm=({context:e,plugin:t,result:r,schema:n})=>{let i=s.propertyAccessExpression({expression:D,name:s.identifier({text:"array"})}),o;if(!n.items)o=s.callExpression({functionName:i,parameters:[hr({schema:{}})]});else {n=ie({schema:n});let p=n.items.map(a=>Se({context:e,plugin:t,result:r,schema:a}));p.length===1?o=s.callExpression({functionName:i,parameters:p}):(n.logicalOperator,o=s.callExpression({functionName:i,parameters:[hr({schema:{}})]}));}return n.minItems===n.maxItems&&n.minItems!==void 0?o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:Ao}),parameters:[s.valueToExpression({value:n.minItems})]}):(n.minItems!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:No}),parameters:[s.valueToExpression({value:n.minItems})]})),n.maxItems!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:Eo}),parameters:[s.valueToExpression({value:n.maxItems})]}))),o},Im=({schema:e})=>typeof e.const=="boolean"?s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:Gr}),parameters:[s.ots.boolean(e.const)]}):s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:s.identifier({text:"boolean"})})}),Tm=({context:e,schema:t})=>{let r=[],n=false;for(let o of t.items??[])o.type==="string"&&typeof o.const=="string"?r.push(s.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(n=true);if(!r.length)return hr({schema:{}});let i=s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:s.identifier({text:"enum"})}),parameters:[s.arrayLiteralExpression({elements:r,multiLine:false})]});return n&&(i=s.callExpression({functionName:s.propertyAccessExpression({expression:i,name:s.identifier({text:"nullable"})})})),i},Cm=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:s.identifier({text:"never"})})}),Pm=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:s.identifier({text:"null"})})}),yr=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},jm=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:Gr}),parameters:[s.ots.number(e.const)]});let r=s.callExpression({functionName:t?s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:D,name:um}),name:s.identifier({text:"bigint"})}):s.propertyAccessExpression({expression:D,name:s.identifier({text:"number"})})});return !t&&e.type==="integer"&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"int"})})})),e.exclusiveMinimum!==void 0?r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"gt"})}),parameters:[yr({isBigInt:t,value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"gte"})}),parameters:[yr({isBigInt:t,value:e.minimum})]})),e.exclusiveMaximum!==void 0?r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"lt"})}),parameters:[yr({isBigInt:t,value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"lte"})}),parameters:[yr({isBigInt:t,value:e.maximum})]})),r},Am=({context:e,plugin:t,result:r,schema:n})=>{let i=[],o=n.required??[];for(let a in n.properties){let c=n.properties[a],m=o.includes(a),f=Se({context:e,optional:!m,plugin:t,result:r,schema:c});ae.lastIndex=0;let l;ae.test(a)?l=a.startsWith("-")?h__default.default.factory.createStringLiteral(a):h__default.default.factory.createNumericLiteral(a):l=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(l=`'${a}'`),i.push(s.propertyAssignment({initializer:f,name:l}));}return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:gm}),parameters:[h__default.default.factory.createObjectLiteralExpression(i,true)]})}},Em=({schema:e})=>{if(typeof e.const=="string")return s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:Gr}),parameters:[s.ots.string(e.const)]});let t=s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:s.identifier({text:"string"})})});if(e.format)switch(e.format){case "date-time":t=s.callExpression({functionName:s.propertyAccessExpression({expression:t,name:s.identifier({text:"datetime"})})});break;case "ipv4":case "ipv6":t=s.callExpression({functionName:s.propertyAccessExpression({expression:t,name:s.identifier({text:"ip"})})});break;case "uri":t=s.callExpression({functionName:s.propertyAccessExpression({expression:t,name:s.identifier({text:"url"})})});break;case "date":case "email":case "time":case "uuid":t=s.callExpression({functionName:s.propertyAccessExpression({expression:t,name:s.identifier({text:e.format})})});break}return e.minLength===e.maxLength&&e.minLength!==void 0?t=s.callExpression({functionName:s.propertyAccessExpression({expression:t,name:Ao}),parameters:[s.valueToExpression({value:e.minLength})]}):(e.minLength!==void 0&&(t=s.callExpression({functionName:s.propertyAccessExpression({expression:t,name:No}),parameters:[s.valueToExpression({value:e.minLength})]})),e.maxLength!==void 0&&(t=s.callExpression({functionName:s.propertyAccessExpression({expression:t,name:Eo}),parameters:[s.valueToExpression({value:e.maxLength})]}))),e.pattern&&(t=s.callExpression({functionName:s.propertyAccessExpression({expression:t,name:Om}),parameters:[s.regularExpressionLiteral({text:e.pattern})]})),t},Nm=({context:e,schema:t})=>{if(t.const&&Array.isArray(t.const)){let r=t.const.map(i=>s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:Gr}),parameters:[s.valueToExpression({value:i})]}));return s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:s.identifier({text:"tuple"})}),parameters:[s.arrayLiteralExpression({elements:r})]})}return hr({schema:{}})},km=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:s.identifier({text:"undefined"})})}),hr=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:s.identifier({text:"unknown"})})}),vm=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:s.identifier({text:"void"})})}),jo=({context:e,plugin:t,result:r,schema:n})=>{switch(n.type){case "array":return {expression:Rm({context:e,plugin:t,result:r,schema:n})};case "boolean":return {expression:Im({schema:n})};case "enum":return {expression:Tm({context:e,schema:n})};case "integer":case "number":return {expression:jm({schema:n})};case "never":return {expression:Cm({schema:n})};case "null":return {expression:Pm({schema:n})};case "object":return Am({context:e,plugin:t,result:r,schema:n});case "string":return {expression:Em({schema:n})};case "tuple":return {expression:Nm({context:e,schema:n})};case "undefined":return {expression:km({schema:n})};case "unknown":return {expression:hr({schema:n})};case "void":return {expression:vm({schema:n})}}},$m=({context:e,operation:t,plugin:r,result:n})=>{if(t.body&&Se({$ref:k({case:"camelCase",config:e.config,id:t.id,type:"data"}),context:e,plugin:r,result:n,schema:t.body.schema}),t.parameters)for(let i in t.parameters){let o=t.parameters[i];for(let p in o){let a=o[p];Se({$ref:k({case:"camelCase",config:e.config,id:t.id,parameterId:a.name,type:"parameter"}),context:e,plugin:r,result:n,schema:a.schema});}}if(t.responses){let{response:i}=Ee(t);i&&Se({$ref:k({case:"camelCase",config:e.config,id:t.id,type:"response"}),context:e,plugin:r,result:n,schema:i});}},Se=({$ref:e,context:t,optional:r,plugin:n,result:i,schema:o})=>{let p=t.file({id:gr}),a,c,m;if(e&&(i.circularReferenceTracker.add(e),m=p.identifier({$ref:e,create:true,nameTransformer:Jn,namespace:"value"})),o.$ref){let f=i.circularReferenceTracker.has(o.$ref),l=p.identifier({$ref:o.$ref,nameTransformer:Jn,namespace:"value"});if(!l.name){let u=t.resolveIrRef(o.$ref);c=Se({$ref:o.$ref,context:t,plugin:n,result:i,schema:u}),l=p.identifier({$ref:o.$ref,nameTransformer:Jn,namespace:"value"});}if(l.name){let u=s.identifier({text:l.name});f?(c=s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:hm}),parameters:[s.arrowFunction({statements:[s.returnStatement({expression:u})]})]}),i.hasCircularReference=true):c=u;}}else if(o.type){let f=jo({context:t,plugin:n,result:i,schema:o});a=f.anyType,c=f.expression;}else if(o.items)if(o=ie({schema:o}),o.items){let f=o.items.map(l=>Se({context:t,plugin:n,result:i,schema:l}));if(o.logicalOperator==="and"){let l=o.items[0];l.logicalOperator==="or"||l.type&&l.type!=="object"?c=s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:ym}),parameters:f}):(c=f[0],f.slice(1).forEach(u=>{c=s.callExpression({functionName:s.propertyAccessExpression({expression:c,name:lm}),parameters:[u]});}));}else c=s.callExpression({functionName:s.propertyAccessExpression({expression:D,name:Sm}),parameters:[s.arrayLiteralExpression({elements:f})]});}else c=Se({context:t,plugin:n,result:i,schema:o});else {let f=jo({context:t,plugin:n,result:i,schema:{type:"unknown"}});a=f.anyType,c=f.expression;}if(e&&i.circularReferenceTracker.delete(e),c&&(o.accessScope==="read"&&(c=s.callExpression({functionName:s.propertyAccessExpression({expression:c,name:bm})})),r&&(c=s.callExpression({functionName:s.propertyAccessExpression({expression:c,name:xm})})),o.default!==void 0)){let f=o.type==="integer"&&o.format==="int64",l=yr({isBigInt:f,value:o.default});l&&(c=s.callExpression({functionName:s.propertyAccessExpression({expression:c,name:dm}),parameters:[l]}));}if(m&&m.name&&m.created){let f=s.constVariable({comment:n.comments?Oe({schema:o}):void 0,exportConst:true,expression:c,name:m.name,typeName:i.hasCircularReference?s.propertyAccessExpression({expression:D,name:a||"ZodTypeAny"}):void 0});p.add(f);}return c},ko=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:gr,identifierCase:"camelCase",path:t.output}).import({module:"zod",name:"z"}),e.subscribe("operation",({operation:n})=>{$m({context:e,operation:n,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false}});}),e.subscribe("parameter",({$ref:n,parameter:i})=>{Se({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:i.schema});}),e.subscribe("requestBody",({$ref:n,requestBody:i})=>{Se({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:i.schema});}),e.subscribe("schema",({$ref:n,schema:i})=>{Se({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:i});});};var Zt={data:s.identifier({text:"data"}),parseAsync:s.identifier({text:"parseAsync"}),v:s.identifier({text:"v"})},wm=({context:e,operation:t})=>{let r=e.file({id:re}),n=e.file({id:Jt}).identifier({$ref:k({case:"camelCase",config:e.config,id:t.id,type:"response"}),namespace:"value"});if(n.name)return r.import({module:r.relativePathToFile({context:e,id:Jt}),name:n.name}),r.import({alias:Zt.v.text,module:"valibot",name:"*"}),s.arrowFunction({async:true,parameters:[{name:"data"}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:Zt.v,name:Zt.parseAsync}),parameters:[s.identifier({text:n.name}),Zt.data]})})})]})},qm=({context:e,operation:t})=>{let r=e.file({id:re}),n=e.file({id:gr}).identifier({$ref:k({case:"camelCase",config:e.config,id:t.id,type:"response"}),namespace:"value"});if(n.name)return r.import({module:r.relativePathToFile({context:e,id:gr}),name:n.name}),s.arrowFunction({async:true,parameters:[{name:"data"}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:s.identifier({text:n.name}),name:Zt.parseAsync}),parameters:[Zt.data]})})})]})},vo=({context:e,operation:t,plugin:r})=>{switch(r.validator){case "valibot":return wm({context:e,operation:t});case "zod":return qm({context:e,operation:t});default:return}};var $o=({context:e,value:t})=>{let r=P({case:"PascalCase",value:ot(t)});return zt({config:e.config,name:r})},Mm=({operation:e,plugin:t})=>t.methodNameBuilder?t.methodNameBuilder(e):!t.asClass&&e.id.match(pe)?`${e.id}_`:e.id,Jr=({context:e,operation:t,plugin:r})=>{let n=new Map,i,o,p=[];if(r.classStructure==="auto"&&t.operationId&&(p=t.operationId.split(/[./]/).filter(Boolean),p.length>1)){let c=p.pop();o=P({case:"camelCase",value:ot(c)}),i=p.pop();}let a=r.instance?[r.instance]:t.tags??["default"];for(let c of a){let m=$o({context:e,value:i||c});n.set(c,{className:m,methodName:o||Mm({operation:t,plugin:r}),path:(i?[c,...p,i]:[c]).map(f=>$o({context:e,value:f}))});}return n},xr=({context:e,file:t,operation:r,throwOnError:n})=>{let o=j(e.config).name==="@hey-api/client-nuxt",p=be({context:e,file:t,operation:r,type:"data"}),a=be({context:e,file:t,operation:r,type:o?"response":"responses"}),c=F.Options.name;return o?`${c}<${Gt}, ${p.name||"unknown"}, ${a.name||"unknown"}, ${Fe}>`:n?`${c}<${p.name||"unknown"}, ${n}>`:p.name?`${c}<${p.name}>`:c},Fm=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},Zn=({context:e,isRequiredOptions:t,operation:r,plugin:n})=>{let i=e.file({id:re}),o=i.nameWithoutExtension(),p=j(e.config),a=p.name==="@hey-api/client-nuxt",c=be({context:e,file:i,operation:r,type:a?"error":"errors"}),m=be({context:e,file:i,operation:r,type:a?"response":"responses"}),f=[];if(r.body)switch(r.body.type){case "form-data":f.push({spread:"formDataBodySerializer"}),i.import({module:X({config:e.config,sourceOutput:o}),name:"formDataBodySerializer"});break;case "json":break;case "text":case "octet-stream":f.push({key:"bodySerializer",value:null});break;case "url-search-params":f.push({spread:"urlSearchParamsBodySerializer"}),i.import({module:X({config:e.config,sourceOutput:o}),name:"urlSearchParamsBodySerializer"});break}if(p.name==="@hey-api/client-axios"){for(let C in r.responses)if(Mn({statusCode:C})==="2XX"){let _=r.responses[C],V=Fm(_?.mediaType);if(V){f.push({key:"responseType",value:V});break}}}let l=Po({operation:r,plugin:n});l.length&&f.push({key:"security",value:s.arrayLiteralExpression({elements:l})});for(let C in r.parameters?.query){let _=r.parameters.query[C];if((_.schema.type==="array"||_.schema.type==="tuple")&&(_.style!=="form"||!_.explode)){f.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}if(n.transformer==="@hey-api/transformers"){let C=e.file({id:dr}).identifier({$ref:Hr({id:r.id,type:"response"}),namespace:"value"});C.name&&(i.import({module:i.relativePathToFile({context:e,id:dr}),name:C.name}),f.push({key:"responseTransformer",value:C.name}));}let u=vo({context:e,operation:r,plugin:n});if(u&&f.push({key:"responseValidator",value:u}),n.responseStyle==="data"&&f.push({key:"responseStyle",value:n.responseStyle}),f.push({key:"url",value:r.path}),f.push({spread:"options"}),r.body){let C=r.parameters?.header?.["content-type"];if(!!!C?.required){let V=s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:!t,name:"headers"});f.push({key:"headers",value:[{key:C?.name??"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:V}]});}}let d=m.name||"unknown",x=c.name||"unknown",g=n.client?i.import({alias:"_heyApiClient",module:i.relativePathToFile({context:e,id:Re}),name:"client"}):void 0,b=s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:!t,name:"client"}),O;n.instance?O=s.binaryExpression({left:b,operator:"??",right:s.propertyAccessExpression({expression:s.this(),name:"_client"})}):g?.name?O=s.binaryExpression({left:b,operator:"??",right:s.identifier({text:g.name})}):O=b;let w=[];return a?w.push(Gt,`${d} | ${Fe}`,x,Fe):w.push(d,x,"ThrowOnError"),n.responseStyle==="data"&&w.push(s.stringLiteral({text:n.responseStyle})),[s.returnFunctionCall({args:[s.objectExpression({identifiers:["responseTransformer"],obj:f})],name:s.propertyAccessExpression({expression:O,name:s.identifier({text:r.method})}),types:w})]};var Et=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:n,name:i}=ye({meta:e,...r});return i&&t(i),{created:n,name:i}},Lo=e=>`${e}ModelResponseTransformer`,Nt=e=>`${P({case:"PascalCase",value:e})}Data`,Yt=e=>`${P({case:"PascalCase",value:e})}Error`,Yn=e=>`${e}Transformer`,Le=e=>`${P({case:"PascalCase",value:e})}Response`,es=({importedType:e,throwOnError:t})=>{let r=F.OptionsLegacyParser.name;return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},wo=(e,t)=>{let r=T(),{name:n}=ye({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Nt}),i=Me(t.parameters);if(!U(r))return [{isRequired:i,name:"options",type:es({importedType:n,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let o=p=>{if(p.default!==void 0)return JSON.stringify(p.default,null,4)};return r.useOptions?[{default:i?void 0:{},name:"data",type:n}]:t.parameters.map(p=>{let a=`${n}['${p.name}']`;return {default:p?.default,isRequired:(!p.isRequired&&!o(p)?"?":"")=="",name:p.name,type:a}})},qo=(e,t)=>{let r=T(),n=s.typeNode("void");if(t.responses.filter(p=>p.responseTypes.includes("success")).length){let{name:p}=ye({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Le});n=s.typeUnionNode({types:[p]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.response==="response"&&(n=s.typeNode("ApiResult",[n])),j(r).name==="legacy/angular"?n=s.typeNode("Observable",[n]):n=s.typeNode("CancelablePromise",[n]),n},Mo=e=>{let t=T();if(!U(t))return [e.deprecated&&"@deprecated",e.summary&&M(e.summary),e.description&&M(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(o=>`@param data.${o.name} ${o.description?M(o.description):""}`)]:r=e.parameters.map(o=>`@param ${o.name} ${o.description?M(o.description):""}`));let n=e.responses.filter(o=>o.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&M(e.summary),e.description&&M(e.description),...r,...n.map(o=>`@returns ${o.type} ${o.description?M(o.description):""}`),"@throws ApiError"]},Lm=({client:e,onClientImport:t,onImport:r,operation:n})=>{let i=T(),o=Le(n.name),{name:p}=ye({client:e,meta:{$ref:`transformers/${o}`,name:o},nameTransformer:Yn});if(p&&r(p),!U(i)){let f=[{spread:"options"}],u=n.parameters.filter(d=>d.in==="body"||d.in==="formData").map(d=>d.mediaType||(d.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(ft);return u.length===1&&(u[0]==="multipart/form-data"&&(f=[...f,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),u[0]==="application/x-www-form-urlencoded"&&(f=[...f,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:u[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),f=[...f,{key:"url",value:n.path}],p&&(f=[...f,{key:"responseTransformer",value:p}]),s.objectExpression({identifiers:["responseTransformer"],obj:f})}let a=f=>f.reduce((l,u)=>{let d=u.prop,x=i.useOptions?`data.${u.name}`:u.name;return d===x?l[d]=d:Ve(d)===d?l[d]=x:l[`'${d}'`]=x,l},{}),c={method:n.method,url:n.path};n.parametersPath.length&&(c.path=a(n.parametersPath)),n.parametersCookie.length&&(c.cookies=a(n.parametersCookie)),n.parametersHeader.length&&(c.headers=a(n.parametersHeader)),n.parametersQuery.length&&(c.query=a(n.parametersQuery)),n.parametersForm.length&&(c.formData=a(n.parametersForm)),n.parametersBody&&(n.parametersBody.in==="formData"&&(i.useOptions?c.formData=`data.${n.parametersBody.name}`:c.formData=n.parametersBody.name),n.parametersBody.in==="body"&&(i.useOptions?c.body=`data.${n.parametersBody.name}`:c.body=n.parametersBody.name)),n.parametersBody?.mediaType&&(c.mediaType=n.parametersBody?.mediaType),n.responseHeader&&(c.responseHeader=n.responseHeader),p&&(c.responseTransformer=p);let m=n.responses.filter(f=>f.responseTypes.includes("error"));if(m.length>0){let f={};m.forEach(l=>{f[l.code]=l.description??"";}),c.errors=f;}return s.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},B=({config:e,handleIllegal:t,id:r,operation:n})=>e.plugins["@hey-api/sdk"]?.methodNameBuilder?e.plugins["@hey-api/sdk"].methodNameBuilder(n):t&&r.match(pe)?`${r}_`:r,Fo=({client:e,onClientImport:t,onImport:r,operation:n})=>{let i=T(),o=Lm({client:e,onClientImport:t,onImport:r,operation:n});if(!U(i)){let a=ye({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:Yt}).name,m=n.responses.filter(f=>f.responseTypes.includes("success")).length?ye({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:Le}).name:"void";return [s.returnFunctionCall({args:[o],name:`(options?.client ?? client).${n.method.toLocaleLowerCase()}`,types:a&&m?[m,a,"ThrowOnError"]:a?["unknown",a,"ThrowOnError"]:m?[m,"unknown","ThrowOnError"]:[]})]}return yt(i)?[s.returnFunctionCall({args:[o],name:"this.httpRequest.request"})]:j(i).name==="legacy/angular"?[s.returnFunctionCall({args:["OpenAPI","this.http",o],name:"__request"})]:[s.returnFunctionCall({args:["OpenAPI",o],name:"__request"})]},Dm=({client:e,onClientImport:t,onImport:r,onNode:n,service:i})=>{let o=T(),p=j(o),a=U(o);for(let u of i.operations)u.parameters.length&&Et({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Nt,onImport:r}),a||Et({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Yt,onImport:r}),u.responses.filter(x=>x.responseTypes.includes("success")).length&&Et({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Le,onImport:r});let c={default:("throwOnError"in p?p.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!o.plugins["@hey-api/sdk"]?.asClass&&!yt(o)){for(let u of i.operations){let d={parameters:wo(e,u),returnType:a?qo(e,u):void 0,statements:Fo({client:e,onClientImport:t,onImport:r,operation:u}),types:a?void 0:[c]},x=p.name==="legacy/angular"?s.anonymousFunction(d):s.arrowFunction(d),g=s.constVariable({comment:Mo(u),exportConst:true,expression:x,name:B({config:o,handleIllegal:true,id:u.name,operation:u})});n(g);}return}let m=i.operations.map(u=>s.methodDeclaration({accessLevel:"public",comment:Mo(u),isStatic:yt(o)===void 0&&p.name!=="legacy/angular",name:B({config:o,id:u.name,operation:u}),parameters:wo(e,u),returnType:a?qo(e,u):void 0,statements:Fo({client:e,onClientImport:t,onImport:r,operation:u}),types:a?void 0:[c]}));if(!m.length)return;yt(o)?m=[s.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...m]:p.name==="legacy/angular"&&(m=[s.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...m]);let f=[];m.forEach((u,d)=>{d&&f.push(s.identifier({text:`
`})),f.push(u);});let l=s.classDeclaration({decorator:p.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:true,name:zt({config:o,name:i.name}),nodes:f});n(l);},Do=({client:e,files:t,plugin:r})=>{let n=T(),i=U(n),o="sdk";if(t.sdk=new Ae({dir:n.output.path,exportFromIndex:r.exportFromIndex,id:"sdk",name:`${o}.ts`}),!i)t.sdk.import({module:X({config:n,sourceOutput:o}),name:"createClient"}),t.sdk.import({module:X({config:n,sourceOutput:o}),name:"createConfig"}),t.sdk.import({...F.OptionsLegacyParser,module:X({config:n,sourceOutput:o})});else if(j(n).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),yt(n)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),n.plugins["@hey-api/sdk"]?.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),yt(n)){let a=j(n);t.sdk.import({asType:a.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!i){let p=j(n),a=s.constVariable({exportConst:true,expression:s.callExpression({functionName:"createClient",parameters:[s.callExpression({functionName:"createConfig",parameters:["throwOnError"in p&&p.throwOnError?s.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(a);}for(let p of e.services)Dm({client:e,onClientImport:a=>{t.sdk.import({module:X({config:n,sourceOutput:o}),name:a});},onImport:a=>{t.sdk.import({asType:!a.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:a});},onNode:a=>{t.sdk.add(a);},service:p});};var _o=({clientOptions:e,context:t,plugin:r})=>{let n=t.file({id:re}),o=j(t.config).name==="@hey-api/client-nuxt",p=X({config:t.config,sourceOutput:n.nameWithoutExtension()}),a=n.import({asType:true,module:p,name:"TDataShape"}),c=n.import({asType:true,module:p,name:"Client"}),m=s.typeAliasDeclaration({exportType:true,name:"Options",type:s.typeIntersectionNode({types:[s.typeReferenceNode({typeArguments:o?[s.typeReferenceNode({typeName:"TComposable"}),s.typeReferenceNode({typeName:"TData"}),s.typeReferenceNode({typeName:zn}),s.typeReferenceNode({typeName:Fe})]:[s.typeReferenceNode({typeName:"TData"}),s.typeReferenceNode({typeName:"ThrowOnError"})],typeName:e.name}),s.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!r.client,name:"client",type:s.typeReferenceNode({typeName:c.name})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:s.typeReferenceNode({typeArguments:[s.keywordTypeNode({keyword:"string"}),s.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:o?[s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:"Composable"}),name:"TComposable"}),s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:a.name}),defaultType:s.typeReferenceNode({typeName:a.name}),name:"TData"}),s.typeParameterDeclaration({defaultType:s.keywordTypeNode({keyword:"unknown"}),name:zn}),s.typeParameterDeclaration({defaultType:s.keywordTypeNode({keyword:"undefined"}),name:Fe})]:[s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:a.name}),defaultType:s.typeReferenceNode({typeName:a.name}),name:"TData"}),s.typeParameterDeclaration({constraint:s.keywordTypeNode({keyword:"boolean"}),defaultType:s.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});n.add(m);};var Bm=({plugin:e})=>{let t=s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:s.this(),name:"_client"}),operator:"=",right:s.propertyAccessExpression({expression:s.identifier({text:"args"}),name:"client"})})});return [s.propertyDeclaration({initializer:e.client?s.identifier({text:"_heyApiClient"}):void 0,modifier:"protected",name:"_client",type:h__default.default.factory.createTypeReferenceNode("Client")}),s.identifier({text:`
`}),s.constructorDeclaration({multiLine:true,parameters:[{isRequired:!e.client,name:"args",type:s.typeInterfaceNode({properties:[{isRequired:!e.client,name:"client",type:"Client"}],useLegacyResolution:false})}],statements:[e.client?s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"args"}),isOptional:true,name:"client"}),thenStatement:s.block({statements:[t]})}):t]})]},Vm=({context:e,plugin:t})=>{let r=j(e.config),n=r.name==="@hey-api/client-nuxt",i=e.file({id:re}),o=new Map,p=new Set,a=t.instance?Bm({plugin:t}):[];e.subscribe("operation",({operation:m})=>{let f=At({context:e,operation:m}),l=be({context:e,file:i,operation:m,type:"response"}),u=Jr({context:e,operation:m,plugin:t});for(let d of u.values())d.path.forEach((x,g)=>{o.has(x)||o.set(x,{className:x,classes:new Set,methods:new Set,nodes:[],root:!g});let b=d.path[g-1];if(b){let _=o.get(b);_.classes.add(x),o.set(b,_);}if(!(d.path.length===g+1))return;let w=o.get(x);if(w.methods.has(d.methodName))return;let C=s.methodDeclaration({accessLevel:"public",comment:Je({operation:m}),isStatic:!t.instance,name:d.methodName,parameters:[{isRequired:f,name:"options",type:xr({context:e,file:i,operation:m,throwOnError:n?void 0:"ThrowOnError"})}],returnType:void 0,statements:Zn({context:e,isRequiredOptions:f,operation:m,plugin:t}),types:n?[{extends:s.typeNode("Composable"),name:Gt},{default:l.name?s.typeReferenceNode({typeName:l.name}):s.typeNode("undefined"),extends:l.name?s.typeReferenceNode({typeName:l.name}):void 0,name:Fe}]:[{default:("throwOnError"in r?r.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]});w.nodes.length?w.nodes.push(s.identifier({text:`
`}),C):w.nodes.push(C),w.methods.add(d.methodName),o.set(x,w);});});let c=m=>{if(p.has(m.className))return;if(m.classes.size)for(let l of m.classes){let u=o.get(l);c(u),m.nodes.push(s.propertyDeclaration({initializer:t.instance?s.newExpression({argumentsArray:t.instance?[s.objectExpression({multiLine:false,obj:[{key:"client",value:s.propertyAccessExpression({expression:s.this(),name:"_client"})}]})]:[],expression:s.identifier({text:u.className})}):s.identifier({text:u.className}),modifier:t.instance?void 0:"static",name:P({case:"camelCase",value:u.className})}));}let f=s.classDeclaration({exportClass:m.root,extendedClasses:t.instance?["_HeyApiClient"]:void 0,name:m.className,nodes:m.nodes});i.add(f),p.add(m.className);};e.subscribe("after",()=>{if(a.length){let m=s.classDeclaration({exportClass:false,name:"_HeyApiClient",nodes:a});i.add(m);}for(let m of o.values())c(m);});},Km=({context:e,plugin:t})=>{let r=j(e.config),n=r.name==="@hey-api/client-nuxt",i=e.file({id:re});e.subscribe("operation",({operation:o})=>{let p=At({context:e,operation:o}),a=be({context:e,file:i,operation:o,type:"response"}),c=s.constVariable({comment:Je({operation:o}),exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:p,name:"options",type:xr({context:e,file:i,operation:o,throwOnError:n?void 0:"ThrowOnError"})}],returnType:void 0,statements:Zn({context:e,isRequiredOptions:p,operation:o,plugin:t}),types:n?[{extends:s.typeNode("Composable"),name:Gt},{default:a.name?s.typeReferenceNode({typeName:a.name}):s.typeNode("undefined"),extends:a.name?s.typeReferenceNode({typeName:a.name}):void 0,name:Fe}]:[{default:("throwOnError"in r?r.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:B({config:e.config,handleIllegal:true,id:o.id,operation:o})});i.add(c);});},Bo=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:re,path:t.output}),n=X({config:e.config,sourceOutput:r.nameWithoutExtension()}),i=r.import({...F.Options,alias:"ClientOptions",module:n});j(e.config).name==="@hey-api/client-nuxt"&&r.import({asType:true,module:n,name:"Composable"}),_o({clientOptions:i,context:e,plugin:t}),t.asClass?Vm({context:e,plugin:t}):Km({context:e,plugin:t});};var ts={_dependencies:["@hey-api/typescript"],_handler:Bo,_handlerLegacy:Do,_infer:(e,t)=>{e.client&&(typeof e.client=="boolean"&&(e.client=t.pluginByTag("client","\u{1F6AB} client needs to be set to generate SDKs - which HTTP client do you want to use?")),t.ensureDependency(e.client)),e.transformer&&(typeof e.transformer=="boolean"&&(e.transformer=t.pluginByTag("transformer")),t.ensureDependency(e.transformer)),e.validator&&(typeof e.validator=="boolean"&&(e.validator=t.pluginByTag("validator")),t.ensureDependency(e.validator)),e.instance&&(typeof e.instance!="string"&&(e.instance="Sdk"),e.asClass=true),e.client!=="@hey-api/client-fetch"&&(e.responseStyle="fields");},asClass:false,auth:true,classStructure:"auto",client:true,exportFromIndex:true,instance:false,name:"@hey-api/sdk",operationId:true,output:"sdk",response:"body",responseStyle:"fields"};var Wm="$OpenApiTs",Y={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},Um=({comments:e,leadingComment:t,meta:r,obj:n,onNode:i,...o})=>{if(!r)return;let{created:p,name:a}=ye({create:true,meta:r,...o});if(p){let c=s.enumDeclaration({comments:e,leadingComment:t,name:a,obj:n});i(c);}},Ze=({comment:e,meta:t,onCreated:r,onNode:n,type:i,...o})=>{if(!t)return {created:false,name:""};let p=ye({create:true,meta:t,...o}),{created:a,name:c}=p;if(a){let m=s.typeAliasDeclaration({comment:e,exportType:true,name:c,type:i});n(m),r?.(c);}return p},Xm=e=>{let t=T(),r=[];Ko(e),e.model.enums.forEach(n=>t.plugins["@hey-api/typescript"]?.enums!=="typescript+namespace"?Vo({...e,model:n}):Qm({...e,model:n,onNode:i=>{r.push(i);}})),r.length&&e.onNode(s.namespaceDeclaration({name:e.model.name,statements:r}));},Vo=({client:e,model:t,onNode:r})=>{let n=T(),i={},o={};t.enum.forEach(a=>{let{key:c,value:m}=Vn(a);i[c]=m;let f=a.customDescription||a.description;f&&(o[c]=[M(f)]);});let p=[t.description&&M(t.description),t.deprecated&&"@deprecated"];if(n.plugins["@hey-api/typescript"]?.enums==="typescript"||n.plugins["@hey-api/typescript"]?.enums==="typescript+namespace"){Um({client:e,comments:o,leadingComment:p,meta:t.meta,obj:i,onNode:r});return}Ze({client:e,comment:p,meta:t.meta,onCreated:a=>{if(n.plugins["@hey-api/typescript"]?.enums==="javascript"){let c=s.objectExpression({multiLine:true,obj:Object.entries(i).map(([f,l])=>({comments:o[f],key:f,value:l})),unescape:true}),m=s.constVariable({assertion:"const",comment:p,exportConst:true,expression:c,name:a});r(m);}},onNode:r,type:yo(t.enum)});},Qm=({model:e,onNode:t})=>{let r={},n={};e.enum.forEach(i=>{let{key:o,value:p}=Vn(i);r[o]=p;let a=i.customDescription||i.description;a&&(n[o]=[M(a)]);}),t(s.enumDeclaration({comments:n,leadingComment:[e.description&&M(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},Ko=({client:e,model:t,onNode:r})=>{Ze({client:e,comment:[t.description&&M(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:de(t)});},Hm=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return Xm(e);case "enum":return Vo(e);default:return Ko(e)}},zm=({client:e,onNode:t})=>{let r={},n=T();if(!n.plugins["@hey-api/sdk"]&&!n.plugins["@hey-api/typescript"]?.tree)return;let i=U(n);for(let p of e.services)for(let a of p.operations){if(!a.parameters.length&&!a.responses.length)continue;r[a.path]||(r[a.path]={});let c=r[a.path];c[a.method]||(c[a.method]={});let m=c[a.method];if(m.$ref=a.name,a.responses.length>0){if(m.res||(m.res={}),Array.isArray(m.res))continue;a.responses.forEach(l=>{m.res[l.code]=l;});}if(a.parameters.length>0){let l={mediaType:null,...Y,in:"body",name:"body",prop:"body"},u=a.parameters.filter(O=>O.in==="body");u.length||(u=a.parameters.filter(O=>O.in==="formData")),u.length===1?l={...Y,...u[0],in:"body",isRequired:u[0].isRequired,name:"body",prop:"body"}:u.length>1&&(l={...Y,in:"body",isRequired:u.some(O=>O.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:u});let d={...Y,in:"header",isRequired:Me(a.parameters.filter(O=>O.in==="header")),mediaType:null,name:i?"header":"headers",prop:i?"header":"headers",properties:a.parameters.filter(O=>O.in==="header").sort(mr)},x={...Y,in:"path",isRequired:Me(a.parameters.filter(O=>O.in==="path")),mediaType:null,name:"path",prop:"path",properties:a.parameters.filter(O=>O.in==="path").sort(mr)},g={...Y,in:"query",isRequired:Me(a.parameters.filter(O=>O.in==="query")),mediaType:null,name:"query",prop:"query",properties:a.parameters.filter(O=>O.in==="query").sort(mr)},b=i?uo([...a.parameters]):[l,d,x,g].filter(O=>O.properties.length||O.$refs.length||O.mediaType);m.req=b,Ze({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:Nt,onNode:t,type:de({...Y,properties:b})});}let f=a.responses.filter(l=>l.responseTypes.includes("success"));if(f.length>0){Ze({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:Le,onNode:t,type:de({...Y,export:"any-of",properties:f})});let l=a.responses.filter(u=>u.responseTypes.includes("error"));i||Ze({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:Yt,onNode:t,type:de(l.length?{...Y,export:"one-of",properties:l}:{...Y,base:"unknown"})});}}let o=Object.entries(r).map(([p,a])=>{let c=Object.entries(a).map(([f,l])=>{let u=f,d=[];if(l.req){let g=l.$ref,{name:b}=ye({client:e,meta:{$ref:g,name:g},nameTransformer:Nt}),O={...Y,base:b,export:"reference",isRequired:true,name:"req",properties:[],type:b};d=[...d,O];}if(l.res){let g=Object.entries(l.res).map(([O,w])=>({...Y,...w,isRequired:true,name:String(O)})),b={...Y,isRequired:true,name:"res",properties:g};d=[...d,b];}return {...Y,isRequired:true,name:u.toLocaleLowerCase(),properties:d}}).filter(Boolean);return {...Y,isRequired:true,name:`'${p}'`,properties:c}});n.plugins["@hey-api/typescript"]?.tree&&Ze({client:e,meta:{$ref:"@hey-api/openapi-ts",name:Wm},onNode:t,type:de({...Y,properties:o})});},Wo=({client:e,files:t,plugin:r})=>{let n=T();t.types=new Ae({dir:n.output.path,exportFromIndex:r.exportFromIndex,id:"types",name:"types.ts"});let i=o=>{t.types?.add(o);};for(let o of e.models)Hm({client:e,model:o,onNode:i});zm({client:e,onNode:i});};var ut="data",Gm=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",Uo=({client:e,model:t})=>t.$refs.map(n=>{let i=e.models.find(o=>o.meta?.$ref===n);if(!i)throw new Error(`Ref ${n} could not be found. Transformers cannot be generated without having access to all refs.`);return i}),Xo=e=>{let t=e.model.meta.name,{name:r}=Ze({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:Lo,onCreated:i=>{let o=Zr({...e,meta:{$ref:`transformers/${t}`,name:i},path:[ut]});Qo({...e,async:false,name:i,statements:o});},type:`(${ut}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},Jm=e=>{let{model:t}=e,r=Uo(e);if(r.length===1){let{created:n,name:i}=Xo({...e,model:r[0]});return n?[s.transformArrayMutation({path:e.path,transformerName:i})]:[]}return fr(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(n=>fr(n))?[s.transformArrayMap({path:e.path,transformExpression:s.conditionalExpression({condition:s.identifier({text:"item"}),whenFalse:s.identifier({text:"item"}),whenTrue:s.transformNewDate({parameterName:"item"})})})]:[]},Zm=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&fr(t)?[s.transformDateMutation({path:r})]:Zr({...e,model:t,path:r})},Zr=e=>{let{model:t}=e;switch(t.export){case "array":return Jm(e);case "interface":return t.properties.flatMap(r=>Zm({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=Uo(e),{created:n,name:i}=Xo({...e,model:r[0]});return n?t.in==="response"?[s.expressionToStatement({expression:s.callExpression({functionName:i,parameters:[ut]})})]:s.transformFunctionMutation({path:e.path,transformerName:i}):[]}default:return []}},Qo=({async:e,client:t,name:r,onNode:n,onRemoveNode:i,statements:o})=>{let p={created:false,name:r};if(!o.length)return go({client:t,name:r}),i?.(),p;let a=s.arrowFunction({async:e,multiLine:true,parameters:[{name:ut}],statements:[...o,s.returnVariable({expression:ut})]}),c=s.constVariable({exportConst:true,expression:a,name:r,typeName:r});return n(c),{created:true,name:r}},Ho=({client:e,files:t})=>{let r=T(),n=o=>{t.types?.add(o);},i=()=>{t.types?.removeNode();};for(let o of e.services)for(let p of o.operations){let a=p.responses.filter(f=>f.responseTypes.includes("success"));if(!a.length)continue;let c=a.filter(f=>!Gm(f));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${v(p)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let m=Le(p.name);Ze({client:e,meta:{$ref:`transformers/${m}`,name:m},nameTransformer:Yn,onCreated:f=>{let l=a.length>1?a.flatMap(u=>{let d=Zr({client:e,meta:{$ref:`transformers/${m}`,name:m},model:u,onNode:n,onRemoveNode:i,path:[ut]});return d.length?[s.ifStatement({expression:s.safeAccessExpression(["data"]),thenStatement:s.block({statements:d})})]:[]}):Zr({client:e,meta:{$ref:`transformers/${m}`,name:m},model:a[0],onNode:n,onRemoveNode:i,path:[ut]});Qo({async:true,client:e,name:f,onNode:n,onRemoveNode:i,statements:l});},onNode:n,type:`(${ut}: any) => Promise<${m}>`});}};var rs={_dependencies:["@hey-api/typescript"],_handler:Co,_handlerLegacy:Ho,_tags:["transformer"],bigInt:true,dates:true,exportFromIndex:false,name:"@hey-api/transformers",output:"transformers"};var Go=({context:e,name:t})=>(ae.lastIndex=0,ae.test(t)?t.startsWith("-")?h__default.default.factory.createStringLiteral(t):h__default.default.factory.createNumericLiteral(t):P({case:e.config.output.case,value:t}));var Yr=s.keywordTypeNode({keyword:"string"}),ef=({server:e})=>{let t=je(e.url);return t.protocol&&t.host?s.literalTypeNode({literal:s.stringLiteral({text:e.url})}):s.templateLiteralType({value:[t.protocol||Yr,"://",t.host||Yr,t.port?`:${t.port}`:"",t.path||""]})},Jo=({context:e,identifier:t,servers:r})=>{let n=e.file({id:A});if(!t.name)return;let i=j(e.config),o=r.map(a=>ef({server:a}));r.length?"strictBaseUrl"in i&&i.strictBaseUrl||o.push(s.typeIntersectionNode({types:[Yr,h__default.default.factory.createTypeLiteralNode([])]})):o.push(Yr);let p=s.typeAliasDeclaration({exportType:true,name:t.name,type:s.typeInterfaceNode({properties:[{name:ne(e.config),type:s.typeUnionNode({types:o})}],useLegacyResolution:false})});n.add(p);};var ss=({$ref:e,accessScope:t,plugin:r})=>{if(!t||t==="both")return e;let n=e.split("/"),i=n.pop(),o=t==="read"?r.readableNameBuilder:r.writableNameBuilder,p=tf({name:i,nameBuilder:o});return n.push(p),n.join("/")},tf=({name:e,nameBuilder:t})=>t?t.replace("{{name}}",e):e,rf=({schema:e,state:t})=>{let r=t?.accessScope;return r?!!(e.accessScope&&r!==e.accessScope||e.$ref&&e.accessScopes&&!e.accessScopes.includes(r)&&!e.accessScopes.includes("both")||(e.type==="array"||e.type==="tuple")&&e.items&&e.items.every(n=>n.accessScopes&&!n.accessScopes.includes(r)&&!n.accessScopes.includes("both"))):false},nf=({$ref:e,context:t,plugin:r,schema:n})=>{let o=t.file({id:A}).identifier({$ref:e,create:true,namespace:"value"});if(!o.created)return;let p=as({plugin:r,schema:n});r.enumsConstantsIgnoreNull&&p.typeofItems.includes("object")&&(p.obj=p.obj.filter(m=>m.value!==null));let a=s.objectExpression({multiLine:true,obj:p.obj});return s.constVariable({assertion:"const",comment:Oe({schema:n}),exportConst:true,expression:a,name:o.name||""})},as=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map((i,o)=>{let p=typeof i.const;r.includes(p)||r.push(p);let a;return i.title?a=i.title:p==="number"||p==="string"?a=`${i.const}`:p==="boolean"?a=i.const?"true":"false":i.const===null?a="null":a=`${o}`,a&&(a=P({case:e.enumsCase,stripLeadingSeparators:false,value:a}),ae.lastIndex=0,ae.test(a)&&(e.enums==="typescript"||e.enums==="typescript+namespace")&&(a=`_${a}`)),{comments:Oe({schema:i}),key:a,value:i.const}}),typeofItems:r}},is=({$ref:e,context:t,plugin:r,schema:n,state:i})=>{let p=t.file({id:A}).identifier({$ref:e,create:true,namespace:"type"});if(!p.created&&!qr(e)&&r.enums!=="typescript+namespace")return;let a=z({context:t,plugin:r,schema:{...n,type:void 0},state:i});if(a)return s.typeAliasDeclaration({comment:Oe({schema:n}),exportType:true,name:p.name||"",type:a})},ea=({plugin:e,schema:t})=>!as({plugin:e,schema:t}).typeofItems.filter(n=>n!=="number"&&n!=="string").length,Zo=({$ref:e,context:t,plugin:r,schema:n,state:i})=>{let o=as({plugin:r,schema:n});if(!ea({plugin:r,schema:n}))return is({$ref:e,context:t,plugin:r,schema:n,state:i});let a=t.file({id:A}).identifier({$ref:e,create:true,namespace:"enum"});return s.enumDeclaration({leadingComment:Oe({schema:n}),name:a.name||"",obj:o.obj})},sf=({context:e,namespace:t,plugin:r,schema:n,state:i})=>{if(!n.items)return s.typeArrayNode(s.keywordTypeNode({keyword:"unknown"}));n=ie({schema:n});let o=[];for(let p of n.items){let a=z({context:e,namespace:t,plugin:r,schema:p,state:i});a&&o.push(a);}if(o.length)return o.length===1?s.typeArrayNode(o[0]):n.logicalOperator==="and"?s.typeArrayNode(s.typeIntersectionNode({types:o})):s.typeArrayNode(s.typeUnionNode({types:o}))},of=({schema:e})=>e.const!==void 0?s.literalTypeNode({literal:s.ots.boolean(e.const)}):s.keywordTypeNode({keyword:"boolean"}),af=({$ref:e,context:t,namespace:r,plugin:n,schema:i,state:o})=>{let p=t.file({id:A}),a=e?qr(e):false,c=a||!!n.exportInlineEnums;if(e&&c){if(!n.enums){let f=is({$ref:e,context:t,plugin:n,schema:i,state:o});f&&p.add(f);}if(n.enums==="javascript"){let f=is({$ref:e,context:t,plugin:n,schema:i,state:o});f&&p.add(f);let l=nf({$ref:e,context:t,plugin:n,schema:i});l&&p.add(l);}if(n.enums==="typescript"){let f=Zo({$ref:e,context:t,plugin:n,schema:i,state:o});f&&p.add(f);}if(n.enums==="typescript+namespace"){let f=Zo({$ref:e,context:t,plugin:n,schema:i,state:o});f&&(a?p.add(f):r.push(f));}}return z({context:t,plugin:n,schema:{...i,type:void 0},state:o})},pf=({context:e,schema:t})=>t.const!==void 0?s.literalTypeNode({literal:s.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.config.plugins["@hey-api/transformers"]?.bigInt?s.typeReferenceNode({typeName:"bigint"}):s.keywordTypeNode({keyword:"number"}),cf=({context:e,namespace:t,plugin:r,schema:n,state:i})=>{let o,p,a=[],c=[],m=n.required??[],f=false,l=false;for(let u in n.properties){let d=n.properties[u];if(rf({schema:d,state:i})){l=true;continue}let g=z({$ref:i?[...i.path,u].join("/"):`${Lt}${u}`,context:e,namespace:t,plugin:r,schema:d,state:i});if(!g)continue;let b=m.includes(u);a.push({comment:Oe({schema:d}),isReadOnly:d.accessScope==="read",isRequired:b,name:Go({context:e,name:u}),type:g}),c.push(d),b||(f=true);}if(n.additionalProperties&&(n.additionalProperties.type!=="never"||!c.length)&&(n.additionalProperties.type==="never"?c=[n.additionalProperties]:c.unshift(n.additionalProperties),f&&c.push({type:"undefined"}),p={isRequired:!n.propertyNames,name:"key",type:z({context:e,namespace:t,plugin:r,schema:c.length===1?c[0]:{items:c,logicalOperator:"or"},state:i})},n.propertyNames&&n.propertyNames.$ref&&(o=Q(n.propertyNames.$ref))),!(l&&!a.length&&!p))return s.typeInterfaceNode({indexKey:o,indexProperty:p,properties:a,useLegacyResolution:false})},mf=({context:e,schema:t})=>{if(t.const!==void 0)return s.literalTypeNode({literal:s.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return s.typeUnionNode({types:[s.typeReferenceNode({typeName:"Blob"}),s.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.config.plugins["@hey-api/transformers"]?.dates)return s.typeReferenceNode({typeName:"Date"})}return s.keywordTypeNode({keyword:"string"})},ff=({context:e,namespace:t,plugin:r,schema:n,state:i})=>{let o=[];if(n.const&&Array.isArray(n.const))o=n.const.map(p=>s.valueToExpression({value:p})??s.identifier({text:"unknown"}));else if(n.items)for(let p of n.items){let a=z({context:e,namespace:t,plugin:r,schema:p,state:i});a&&o.push(a);}if(o.length)return s.typeTupleNode({types:o})},Yo=({$ref:e,context:t,namespace:r,plugin:n,schema:i,state:o})=>{switch(i.type){case "array":return sf({context:t,namespace:r,plugin:n,schema:i,state:o});case "boolean":return of({schema:i});case "enum":return af({$ref:e,context:t,namespace:r,plugin:n,schema:i,state:o});case "integer":case "number":return pf({context:t,schema:i});case "never":return s.keywordTypeNode({keyword:"never"});case "null":return s.literalTypeNode({literal:s.null()});case "object":return cf({context:t,namespace:r,plugin:n,schema:i,state:o});case "string":return mf({context:t,schema:i});case "tuple":return ff({context:t,namespace:r,plugin:n,schema:i,state:o});case "undefined":return s.keywordTypeNode({keyword:"undefined"});case "unknown":return s.keywordTypeNode({keyword:"unknown"});case "void":return s.keywordTypeNode({keyword:"void"})}},ns=({parameters:e})=>{let t={type:"object"};if(e){let r={},n=[];for(let i in e){let o=e[i];r[o.name]=ie({schema:o.schema}),o.required&&n.push(o.name);}t.properties=r,n.length&&(t.required=n);}return t},lf=({context:e,operation:t,plugin:r})=>{let n=e.file({id:A}),i={type:"object"},o=[];i.properties||(i.properties={}),t.body?(i.properties.body=t.body.schema,t.body.required&&o.push("body")):i.properties.body={type:"never"},t.parameters?.header&&(i.properties.headers=ns({parameters:t.parameters.header}),i.properties.headers.required&&o.push("headers")),t.parameters?.path?(i.properties.path=ns({parameters:t.parameters.path}),i.properties.path.required&&o.push("path")):i.properties.path={type:"never"},t.parameters?.query?(i.properties.query=ns({parameters:t.parameters.query}),i.properties.query.required&&o.push("query")):i.properties.query={type:"never"},i.properties.url={const:t.path,type:"string"},o.push("url"),i.required=o;let p=n.identifier({$ref:k({config:e.config,id:t.id,type:"data"}),create:true,namespace:"type"}),a=z({context:e,plugin:r,schema:i,state:r.readOnlyWriteOnlyBehavior==="off"?{path:[t.method,t.path,"data"]}:{accessScope:"write",path:[t.method,t.path,"data"]}});if(a){let c=s.typeAliasDeclaration({exportType:true,name:p.name||"",type:a});n.add(c);}},uf=({context:e,operation:t,plugin:r})=>{lf({context:e,operation:t,plugin:r});let n=e.file({id:A}),{error:i,errors:o,response:p,responses:a}=Ee(t);if(o){let c=n.identifier({$ref:k({config:e.config,id:t.id,type:"errors"}),create:true,namespace:"type"});if(c.name){let m=z({context:e,plugin:r,schema:o,state:r.readOnlyWriteOnlyBehavior==="off"?{path:[t.method,t.path,"errors"]}:{accessScope:"read",path:[t.method,t.path,"errors"]}});if(m){let f=s.typeAliasDeclaration({exportType:true,name:c.name,type:m});n.add(f);}if(i){let f=n.identifier({$ref:k({config:e.config,id:t.id,type:"error"}),create:true,namespace:"type"});if(f.name){let l=s.typeReferenceNode({typeName:c.name}),u=h__default.default.factory.createTypeOperatorNode(h__default.default.SyntaxKind.KeyOfKeyword,l),d=s.typeAliasDeclaration({exportType:true,name:f.name,type:s.indexedAccessTypeNode({indexType:u,objectType:l})});n.add(d);}}}}if(a){let c=n.identifier({$ref:k({config:e.config,id:t.id,type:"responses"}),create:true,namespace:"type"});if(c.name){let m=z({context:e,plugin:r,schema:a,state:r.readOnlyWriteOnlyBehavior==="off"?{path:[t.method,t.path,"responses"]}:{accessScope:"read",path:[t.method,t.path,"responses"]}});if(m){let f=s.typeAliasDeclaration({exportType:true,name:c.name,type:m});n.add(f);}if(p){let f=n.identifier({$ref:k({config:e.config,id:t.id,type:"response"}),create:true,namespace:"type"});if(f.name){let l=s.typeReferenceNode({typeName:c.name}),u=h__default.default.factory.createTypeOperatorNode(h__default.default.SyntaxKind.KeyOfKeyword,l),d=s.typeAliasDeclaration({exportType:true,name:f.name,type:s.indexedAccessTypeNode({indexType:u,objectType:l})});n.add(d);}}}}},ta=({schema:e})=>{let t=e.accessScopes;return t!==void 0&&t.length>1},os=({accessScope:e,schema:t})=>{let r=t.accessScopes;return !r||r!==void 0&&(r.includes(e)||r.includes("both"))},z=({$ref:e,context:t,namespace:r=[],plugin:n,schema:i,state:o})=>{let p=t.file({id:A}),a;if(i.$ref){let c=t.resolveIrRef(i.$ref);if(!o?.accessScope||os({accessScope:o.accessScope,schema:c})){let m=ss({$ref:i.$ref,accessScope:ta({schema:c})?o?.accessScope:void 0,plugin:n}),f=p.identifier({$ref:m,create:true,namespace:c.type==="enum"&&(n.enums==="typescript"||n.enums==="typescript+namespace")&&ea({plugin:n,schema:c})?"enum":"type"});a=s.typeReferenceNode({typeName:f.name||""});}}else if(i.type)a=Yo({$ref:e,context:t,namespace:r,plugin:n,schema:i,state:o});else if(i.items)if(i=ie({schema:i}),i.items){let c=[];for(let m of i.items){let f=z({context:t,namespace:r,plugin:n,schema:m,state:o});f&&c.push(f);}a=i.logicalOperator==="and"?s.typeIntersectionNode({types:c}):s.typeUnionNode({types:c});}else a=z({context:t,namespace:r,plugin:n,schema:i,state:o});else a=Yo({context:t,namespace:r,plugin:n,schema:{type:"unknown"},state:o});if(e&&qr(e)){if(r.length){let c=p.identifier({$ref:e,create:true,namespace:"value"}),m=s.namespaceDeclaration({name:c.name||"",statements:r});p.add(m);}if(i.type!=="enum"&&a){let c=p.identifier({$ref:e,create:true,namespace:"type"}),m=s.typeAliasDeclaration({comment:Oe({schema:i}),exportType:true,name:c.name||"",type:a});p.add(m);}}return a},ra=({context:e,plugin:t})=>{let n=e.createFile({exportFromIndex:t.exportFromIndex,id:A,identifierCase:t.identifierCase,path:t.output}).identifier({$ref:"ClientOptions",create:true,namespace:"type"});e.subscribe("schema",({$ref:o,schema:p})=>{if(t.readOnlyWriteOnlyBehavior==="off"||!ta({schema:p})){z({$ref:o,context:e,plugin:t,schema:p,state:{path:[]}});return}os({accessScope:"read",schema:p})&&z({$ref:ss({$ref:o,accessScope:"read",plugin:t}),context:e,plugin:t,schema:p,state:{accessScope:"read",path:[]}}),os({accessScope:"write",schema:p})&&z({$ref:ss({$ref:o,accessScope:"write",plugin:t}),context:e,plugin:t,schema:p,state:{accessScope:"write",path:[]}});}),e.subscribe("parameter",({$ref:o,parameter:p})=>{z({$ref:o,context:e,plugin:t,schema:p.schema,state:{path:[]}});}),e.subscribe("requestBody",({$ref:o,requestBody:p})=>{z({$ref:o,context:e,plugin:t,schema:p.schema,state:t.readOnlyWriteOnlyBehavior==="off"?{path:[]}:{accessScope:"write",path:[]}});}),e.subscribe("operation",({operation:o})=>{uf({context:e,operation:o,plugin:t});});let i=[];e.subscribe("server",({server:o})=>{i.push(o);}),e.subscribe("after",()=>{Jo({context:e,identifier:n,servers:i});});};var ps={_handler:ra,_handlerLegacy:Wo,enums:false,enumsCase:"SCREAMING_SNAKE_CASE",enumsConstantsIgnoreNull:false,exportFromIndex:true,exportInlineEnums:false,identifierCase:"PascalCase",name:"@hey-api/typescript",output:"types",readOnlyWriteOnlyBehavior:"split",readableNameBuilder:"{{name}}Readable",style:"preserve",tree:false,writableNameBuilder:"{{name}}Writable"};var dt=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name});return xr({context:e,file:n,operation:t})},tn=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name}),o={asType:true,name:be({context:e,file:n,operation:t,type:"error"}).name||""};if(o.name||(o=n.import({asType:true,module:r.name,name:"DefaultError"})),j(e.config).name==="@hey-api/client-axios"){let a=n.import({asType:true,module:"axios",name:"AxiosError"});o={...a,name:`${a.name}<${o.name}>`};}return o},rn=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name});return be({context:e,file:n,operation:t,type:"response"}).name||"unknown"};var sa="createQueryKey",sn="QueryKey",br="TOptions",na=s.identifier({text:"infinite"}),nn=s.identifier({text:"options"}),on=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=r.identifier({$ref:`#/ir/${sa}`,create:true,namespace:"value"});if(n.name){let i=s.indexedAccessTypeNode({indexType:s.literalTypeNode({literal:s.ots.number(0)}),objectType:s.typeReferenceNode({typeArguments:[s.typeReferenceNode({typeName:br})],typeName:sn})}),o=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"id",type:s.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:s.typeReferenceNode({typeName:br})},{isRequired:false,name:"infinite",type:s.typeReferenceNode({typeName:"boolean"})}],returnType:s.typeTupleNode({types:[i]}),statements:[s.constVariable({assertion:i,expression:s.objectExpression({multiLine:false,obj:[{key:"_id",value:s.identifier({text:"id"})},{key:ne(e.config),value:s.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${ne(e.config)}`})}]}),name:"params",typeName:i}),s.ifStatement({expression:na,thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"_infinite"}),right:na})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:nn,isOptional:true,name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.propertyAccessExpression({expression:"options",name:"body"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:nn,isOptional:true,name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:nn,isOptional:true,name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.propertyAccessExpression({expression:"options",name:"path"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:nn,isOptional:true,name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.propertyAccessExpression({expression:"options",name:"query"})})})]})}),s.returnStatement({expression:s.arrayLiteralExpression({elements:[s.identifier({text:"params"})]})})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:F.Options.name})}),name:br}]}),name:n.name});r.add(o);}},df=({context:e,id:t,isInfinite:r,plugin:n})=>{let o=e.file({id:n.name}).identifier({$ref:`#/ir/${sa}`,namespace:"value"});return s.callExpression({functionName:o.name||"",parameters:[s.ots.string(t),"options",r?s.ots.boolean(true):void 0]})},an=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=[{name:"_id",type:s.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:s.keywordTypeNode({keyword:"boolean"})}],i=s.typeAliasDeclaration({exportType:true,name:sn,type:s.typeTupleNode({types:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeName:`Pick<${br}, '${ne(e.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),s.typeInterfaceNode({properties:n,useLegacyResolution:true})]})]}),typeParameters:[{extends:s.typeReferenceNode({typeName:s.identifier({text:F.Options.name})}),name:br}]});r.add(i);},Or=({context:e,isInfinite:t,operation:r})=>`${B({config:e.config,id:r.id,operation:r})}${t?"Infinite":""}QueryKey`,pn=({context:e,isInfinite:t,operation:r,plugin:n,typeQueryKey:i})=>{let o=e.file({id:n.name}),p=dt({context:e,operation:r,plugin:n}),a=Or({context:e,isInfinite:t,operation:r}),c=o.identifier({$ref:`#/queryKey/${a}`,create:true,namespace:"value"});return s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:Br(r),name:"options",type:p}],returnType:t?i:void 0,statements:df({context:e,id:r.id,isInfinite:t,plugin:n})}),name:c.name||""})};var oa="createInfiniteParams",ia="infiniteQueryOptions",hf=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:s.typeReferenceNode({typeName:`QueryKey<${F.Options.name}>`})},{name:"page",type:s.typeReferenceNode({typeName:"K"})}],statements:[s.constVariable({expression:s.objectExpression({obj:[{spread:s.propertyAccessExpression({expression:"queryKey",name:0})}]}),name:"params"}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),s.returnVariable({expression:s.asExpression({expression:s.asExpression({expression:s.identifier({text:"params"}),type:s.keywordTypeNode({keyword:"unknown"})}),type:h__default.default.factory.createTypeQueryNode(s.identifier({text:"page"}))})})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:`Pick<QueryKey<${F.Options.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:oa});r.add(n);},gf=({context:e,operation:t})=>`${B({config:e.config,id:t.id,operation:t})}InfiniteOptions`,aa=({context:e,operation:t,plugin:r,queryFn:n,state:i})=>{if(!r.infiniteQueryOptions||!["get","post"].includes(t.method))return i;let o=ji({context:e,operation:t});if(!o)return i;let p=e.file({id:r.name}),a=At({context:e,operation:t});i.hasInfiniteQueries||(i.hasInfiniteQueries=true,i.hasCreateQueryKeyParamsFunction||(an({context:e,plugin:r}),on({context:e,plugin:r}),i.hasCreateQueryKeyParamsFunction=true),i.hasCreateInfiniteParamsFunction||(hf({context:e,plugin:r}),i.hasCreateInfiniteParamsFunction=true),p.import({module:r.name,name:ia}),i.typeInfiniteData=p.import({asType:true,module:r.name,name:"InfiniteData"})),i.hasUsedQueryFn=true;let c=dt({context:e,operation:t,plugin:r}),m=tn({context:e,operation:t,plugin:r}),f=rn({context:e,operation:t,plugin:r}),l=`${sn}<${c}>`,u=`Pick<${l}[0], 'body' | 'headers' | 'path' | 'query'>`,d=z({context:e,plugin:e.config.plugins["@hey-api/typescript"],schema:o.schema,state:void 0}),x=d?`${Ie({node:d,unescape:true})} | ${u}`:`${u}`,g=pn({context:e,isInfinite:true,operation:t,plugin:r,typeQueryKey:l});p.add(g);let b=Or({context:e,isInfinite:true,operation:t}),O=p.identifier({$ref:`#/queryKey/${b}`,namespace:"value"}),w=s.awaitExpression({expression:s.callExpression({functionName:n,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),C=[s.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:s.conditionalExpression({condition:s.binaryExpression({left:s.typeOfExpression({text:"pageParam"}),operator:"===",right:s.ots.string("object")}),whenFalse:s.objectExpression({multiLine:true,obj:[{key:o.in,value:s.objectExpression({multiLine:true,obj:[{key:o.name,value:s.identifier({text:"pageParam"})}]})}]}),whenTrue:s.identifier({text:"pageParam"})}),name:"page",typeName:u}),s.constVariable({expression:s.callExpression({functionName:oa,parameters:["queryKey","page"]}),name:"params"})];e.config.plugins["@hey-api/sdk"]?.responseStyle==="data"?C.push(s.returnVariable({expression:w})):C.push(s.constVariable({destructure:true,expression:w,name:"data"}),s.returnVariable({expression:"data"}));let _=s.constVariable({comment:r.comments?Je({operation:t}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:a,name:"options",type:c}],statements:[s.returnFunctionCall({args:[s.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:C})},{key:"queryKey",value:s.callExpression({functionName:O.name||"",parameters:["options"]})}]})],name:ia,types:[f,m.name,`${typeof i.typeInfiniteData=="string"?i.typeInfiniteData:i.typeInfiniteData.name}<${f}>`,l,x]})]}),name:gf({context:e,operation:t})});p.add(_);};var pa="mutationOptions",xf=({context:e,operation:t})=>`${B({config:e.config,id:t.id,operation:t})}Mutation`,ca=({context:e,operation:t,plugin:r,queryFn:n,state:i})=>{if(!r.mutationOptions||!["delete","patch","post","put"].includes(t.method))return i;let o=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",p=e.file({id:r.name});i.hasMutations||(i.hasMutations=true,p.import({asType:true,module:r.name,name:o})),i.hasUsedQueryFn=true;let a=dt({context:e,operation:t,plugin:r}),c=tn({context:e,operation:t,plugin:r}),m=rn({context:e,operation:t,plugin:r}),f=`${o}<${m}, ${c.name}, ${a}>`,l=s.awaitExpression({expression:s.callExpression({functionName:n,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),u=[];e.config.plugins["@hey-api/sdk"]?.responseStyle==="data"?u.push(s.returnVariable({expression:l})):u.push(s.constVariable({destructure:true,expression:l,name:"data"}),s.returnVariable({expression:"data"}));let d=s.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${a}>`}],returnType:f,statements:[s.constVariable({expression:s.objectExpression({obj:[{key:"mutationFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:u})}]}),name:pa,typeName:f}),s.returnVariable({expression:pa})]}),x=s.constVariable({comment:r.comments?Je({operation:t}):void 0,exportConst:true,expression:d,name:xf({context:e,operation:t})});return p.add(x),i};var ma="queryOptions",bf=({context:e,operation:t})=>`${B({config:e.config,id:t.id,operation:t})}Options`,fa=({context:e,operation:t,plugin:r,queryFn:n,state:i})=>{if(!r.queryOptions||!["get","post"].includes(t.method))return i;let o=e.file({id:r.name}),p=At({context:e,operation:t});i.hasQueries||(i.hasQueries=true,i.hasCreateQueryKeyParamsFunction||(an({context:e,plugin:r}),on({context:e,plugin:r}),i.hasCreateQueryKeyParamsFunction=true),o.import({module:r.name,name:ma})),i.hasUsedQueryFn=true;let a=pn({context:e,isInfinite:false,operation:t,plugin:r});o.add(a);let c=dt({context:e,operation:t,plugin:r}),m=Or({context:e,isInfinite:false,operation:t}),f=o.identifier({$ref:`#/queryKey/${m}`,namespace:"value"}),l=s.awaitExpression({expression:s.callExpression({functionName:n,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),u=[];e.config.plugins["@hey-api/sdk"]?.responseStyle==="data"?u.push(s.returnVariable({expression:l})):u.push(s.constVariable({destructure:true,expression:l,name:"data"}),s.returnVariable({expression:"data"}));let d=s.constVariable({comment:r.comments?Je({operation:t}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:p,name:"options",type:c}],statements:[s.returnFunctionCall({args:[s.objectExpression({obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:u})},{key:"queryKey",value:s.callExpression({functionName:f.name||"",parameters:["options"]})}]})],name:ma})]}),name:bf({context:e,operation:t})});return o.add(d),i};var De=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:t.name,path:t.output}),n={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false,typeInfiniteData:void 0};e.subscribe("before",()=>{r.import({...F.Options,module:r.relativePathToFile({context:e,id:re})});}),e.subscribe("operation",({operation:i})=>{n.hasUsedQueryFn=false;let o=e.config.plugins["@hey-api/sdk"],p=o?.asClass?Jr({context:e,operation:i,plugin:o}):void 0,a=p?p.values().next().value:void 0,c=(a?[a.path[0],...a.path.slice(1).map(m=>P({case:"camelCase",value:m})),a.methodName].filter(Boolean):[B({config:e.config,handleIllegal:true,id:i.id,operation:i})]).join(".");fa({context:e,operation:i,plugin:t,queryFn:c,state:n}),aa({context:e,operation:i,plugin:t,queryFn:c,state:n}),ca({context:e,operation:i,plugin:t,queryFn:c,state:n}),n.hasUsedQueryFn&&r.import({module:r.relativePathToFile({context:e,id:re}),name:c.split(".")[0]});}),e.subscribe("after",()=>{(n.hasQueries||n.hasInfiniteQueries)&&r.import({alias:"_heyApiClient",module:r.relativePathToFile({context:e,id:Re}),name:"client"});});};var Of=e=>`${B({config:T(),id:e.name,operation:e})}InfiniteOptions`,Sf=e=>`${B({config:T(),id:e.name,operation:e})}Mutation`,Rf=({config:e,id:t,operation:r})=>`${B({config:e,id:t,operation:r})}Options`,cn=({config:e,id:t,isInfinite:r,operation:n})=>`${B({config:e,id:t,operation:n})}${r?"Infinite":""}QueryKey`,If=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},Tf="createInfiniteParams",Oa="createQueryKey",la="infiniteQueryOptions",ua="mutationOptions",ms="QueryKey",da="queryOptions",Rr="TOptions",Cf=({file:e})=>{let t=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:s.typeNode(`QueryKey<${F.OptionsLegacyParser.name}>`)},{name:"page",type:s.typeNode("K")}],statements:[s.constVariable({expression:s.identifier({text:"queryKey[0]"}),name:"params"}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),s.returnVariable({expression:h__default.default.factory.createAsExpression(h__default.default.factory.createAsExpression(s.identifier({text:"params"}),h__default.default.factory.createKeywordTypeNode(h__default.default.SyntaxKind.UnknownKeyword)),h__default.default.factory.createTypeQueryNode(s.identifier({text:"page"})))})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:`Pick<QueryKey<${F.OptionsLegacyParser.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:Tf});e.add(t);},ya=({file:e})=>{let t=s.indexedAccessTypeNode({indexType:s.typeNode(0),objectType:s.typeNode(ms,[s.typeNode(Rr)])}),r=s.identifier({text:"infinite"}),n=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"id",type:s.typeNode("string")},{isRequired:false,name:"options",type:s.typeNode(Rr)},{isRequired:false,name:"infinite",type:s.typeNode("boolean")}],returnType:t,statements:[s.constVariable({assertion:t,expression:s.objectExpression({multiLine:false,obj:[{key:"_id",value:s.identifier({text:"id"})},{key:ne(T()),value:s.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${ne(T())}`})}]}),name:"params",typeName:t}),s.ifStatement({expression:r,thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.propertyAccessExpression({expression:"options",name:"body"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.propertyAccessExpression({expression:"options",name:"path"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.propertyAccessExpression({expression:"options",name:"query"})})})]})}),s.returnVariable({expression:"params"})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:F.OptionsLegacyParser.name})}),name:Rr}]}),name:Oa});e.add(n);},ha=({file:e})=>{let t=[{name:"_id",type:s.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:s.keywordTypeNode({keyword:"boolean"})}],r=s.typeAliasDeclaration({name:ms,type:s.typeTupleNode({types:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeName:`Pick<${Rr}, '${ne(T())}' | 'body' | 'headers' | 'path' | 'query'>`}),s.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:s.typeReferenceNode({typeName:s.identifier({text:F.OptionsLegacyParser.name})}),name:Rr}]});e.add(r);},cs=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:i}=Et({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:Nt,onImport:p=>{t.import({asType:true,module:n,name:p});}});return {typeData:es({importedType:i})}},ga=({client:e,file:t,operation:r,pluginName:n,typesModulePath:i})=>{let o=T(),{name:p}=Et({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Yt,onImport:m=>{t.import({asType:true,module:i,name:m});}}),a={asType:true,name:p};if(a.name||(a=t.import({asType:true,module:n,name:"DefaultError"})),j(o).name==="@hey-api/client-axios"){let m=t.import({asType:true,module:"axios",name:"AxiosError"});a={...m,name:`${m.name}<${a.name}>`};}return {typeError:a}},xa=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:i}=Et({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Le,onImport:p=>{t.import({asType:true,module:n,name:p});}});return {typeResponse:i||"void"}},ba=({id:e,isInfinite:t})=>s.arrayLiteralExpression({elements:[s.callExpression({functionName:Oa,parameters:[s.ots.string(e),"options",t?s.ots.boolean(true):void 0]})],multiLine:false}),_e=({client:e,files:t,plugin:r})=>{let n=T();if(U(n))throw new Error("TanStack Query plugin does not support legacy clients");let i=t[r.name];i.import({...F.OptionsLegacyParser,module:X({config:n,sourceOutput:r.output})});let o=Ft({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),p=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",a,c=false,m=false,f=false,l=false,u=false,d=new Map;for(let x of e.services)for(let g of x.operations){let b=v(g);if(d.has(b))continue;d.set(b,true);let O=[n.plugins["@hey-api/sdk"]?.asClass&&zt({config:n,name:x.name}),B({config:n,handleIllegal:!n.plugins["@hey-api/sdk"]?.asClass,id:g.name,operation:g})].filter(Boolean).join("."),w=false;if(r.queryOptions&&["GET","POST"].includes(g.method)){u||(u=true,m||(ha({file:i}),ya({file:i}),m=true),i.import({module:r.name,name:da})),w=true;let{typeData:C}=cs({client:e,file:i,operation:g,typesModulePath:o}),_=Me(g.parameters),V=s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:_,name:"options",type:C}],statements:ba({id:g.name})}),name:cn({config:n,id:g.name,operation:g})});i.add(V);let kt=s.constVariable({comment:[],exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:_,name:"options",type:C}],statements:[s.returnFunctionCall({args:[s.objectExpression({obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:O,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})},{key:"queryKey",value:s.callExpression({functionName:cn({config:n,id:g.name,operation:g}),parameters:["options"]})}]})],name:da})]}),name:Rf({config:n,id:g.name,operation:g})});i.add(kt);}if(r.infiniteQueryOptions&&["GET","POST"].includes(g.method)){let C,_=g.parameters.find(V=>{if(oe(n.input.pagination).test(V.name))return C=V,true;if(V.in==="body"){if(V.export==="reference"){let Be=V.$refs[0];return e.models.find(et=>et.meta?.$ref===Be)?.properties.find(et=>{if(oe(n.input.pagination).test(et.name))return C=et,true})}return V.properties.find(Be=>{if(oe(n.input.pagination).test(Be.name))return C=Be,true})}});if(_&&C){f||(f=true,m||(ha({file:i}),ya({file:i}),m=true),c||(Cf({file:i}),c=true),i.import({module:r.name,name:la}),a=i.import({asType:true,module:r.name,name:"InfiniteData"})),w=true;let{typeData:V}=cs({client:e,file:i,operation:g,typesModulePath:o}),{typeError:kt}=ga({client:e,file:i,operation:g,pluginName:r.name,typesModulePath:o}),{typeResponse:Be}=xa({client:e,file:i,operation:g,typesModulePath:o}),Pr=Me(g.parameters),et=`${ms}<${V}>`,fn=`Pick<${et}[0], 'body' | 'headers' | 'path' | 'query'>`,Aa=`${C.base} | ${fn}`,Ea=s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:Pr,name:"options",type:V}],returnType:et,statements:ba({id:g.name,isInfinite:true})}),name:cn({config:n,id:g.name,isInfinite:true,operation:g})});i.add(Ea);let Na=s.constVariable({comment:[],exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:Pr,name:"options",type:V}],statements:[s.returnFunctionCall({args:[s.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[s.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:s.conditionalExpression({condition:s.binaryExpression({left:s.typeOfExpression({text:"pageParam"}),operator:"===",right:s.ots.string("object")}),whenFalse:s.objectExpression({multiLine:true,obj:[{key:If(_),value:s.objectExpression({multiLine:true,obj:[{key:C.name,value:s.identifier({text:"pageParam"})}]})}]}),whenTrue:s.identifier({text:"pageParam"})}),name:"page",typeName:fn}),s.constVariable({expression:s.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:O,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})},{key:"queryKey",value:s.callExpression({functionName:cn({config:n,id:g.name,isInfinite:true,operation:g}),parameters:["options"]})}]})],name:la,types:[Be,kt.name,`${typeof a=="string"?a:a.name}<${Be}>`,et,Aa]})]}),name:Of(g)});i.add(Na);}}if(r.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(g.method)){l||(l=true,i.import({asType:true,module:r.name,name:p})),w=true;let{typeData:C}=cs({client:e,file:i,operation:g,typesModulePath:o}),{typeError:_}=ga({client:e,file:i,operation:g,pluginName:r.name,typesModulePath:o}),{typeResponse:V}=xa({client:e,file:i,operation:g,typesModulePath:o}),kt=s.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${C}>`}],statements:[s.constVariable({expression:s.objectExpression({obj:[{key:"mutationFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:[s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:O,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})}]}),name:ua,typeName:`${p}<${V}, ${_.name}, ${C}>`}),s.returnVariable({expression:ua})]}),Be=s.constVariable({comment:[],exportConst:true,expression:kt,name:Sf(g)});i.add(Be);}(u||f)&&i.import({alias:"_heyApiClient",module:Ft({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),w&&i.import({module:Ft({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:O.split(".")[0]});}};var fs={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:De,_handlerLegacy:_e,comments:true,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",queryOptions:true};var ls={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:De,_handlerLegacy:_e,comments:true,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/react-query",output:"@tanstack/react-query",queryOptions:true};var us={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:De,_handlerLegacy:_e,comments:true,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/solid-query",output:"@tanstack/solid-query",queryOptions:true};var ds={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:De,_handlerLegacy:_e,comments:true,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",queryOptions:true};var ys={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:De,_handlerLegacy:_e,comments:true,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/vue-query",output:"@tanstack/vue-query",queryOptions:true};var Sa="fastify",Pf=({context:e,operation:t})=>{let r=e.file({id:Sa}),n=e.file({id:A}),i=[],o=n.identifier({$ref:k({config:e.config,id:t.id,type:"data"}),namespace:"type"});o.name&&(t.body&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:o.name}),i.push({isRequired:t.body.required,name:"Body",type:`${o.name}['body']`})),t.parameters&&(t.parameters.header&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:o.name}),i.push({isRequired:it(t.parameters.header),name:"Headers",type:`${o.name}['headers']`})),t.parameters.path&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:o.name}),i.push({isRequired:it(t.parameters.path),name:"Params",type:`${o.name}['path']`})),t.parameters.query&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:o.name}),i.push({isRequired:it(t.parameters.query),name:"Querystring",type:`${o.name}['query']`}))));let{errors:p,responses:a}=Ee(t),c,m=n.identifier({$ref:k({config:e.config,id:t.id,type:"errors"}),namespace:"type"});if(m.name&&p&&p.properties){let x=Object.keys(p.properties);if(x.length){if(!x.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:m.name}),c=s.typeReferenceNode({typeName:m.name});else if(x.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:m.name});let b=s.typeReferenceNode({typeName:m.name}),O=s.literalTypeNode({literal:s.stringLiteral({text:"default"})});c=s.typeReferenceNode({typeArguments:[b,O],typeName:"Omit"});}}}let f,l=n.identifier({$ref:k({config:e.config,id:t.id,type:"responses"}),namespace:"type"});if(l.name&&a&&a.properties){let x=Object.keys(a.properties);if(x.length){if(!x.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:l.name}),f=s.typeReferenceNode({typeName:l.name});else if(x.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:A}),name:l.name});let b=s.typeReferenceNode({typeName:l.name}),O=s.literalTypeNode({literal:s.stringLiteral({text:"default"})});f=s.typeReferenceNode({typeArguments:[b,O],typeName:"Omit"});}}}let u=[c,f].filter(Boolean);return u.length&&i.push({name:"Reply",type:s.typeIntersectionNode({types:u})}),i.length?{name:t.id,type:s.typeNode("RouteHandler",[s.typeInterfaceNode({properties:i,useLegacyResolution:false})])}:void 0},Ra=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:Sa,path:t.output}),n=[];e.subscribe("operation",({operation:i})=>{let o=Pf({context:e,operation:i});o&&n.push(o);}),e.subscribe("after",()=>{let i=r.identifier({$ref:"RouteHandlers",create:true,namespace:"type"});i.name&&(n.length&&r.import({asType:true,module:"fastify",name:"RouteHandler"}),r.add(s.typeAliasDeclaration({exportType:true,name:i.name,type:s.typeInterfaceNode({properties:n,useLegacyResolution:false})})));});};var hs={_dependencies:["@hey-api/typescript"],_handler:Ra,_handlerLegacy:()=>{},exportFromIndex:false,name:"fastify",output:"fastify"};var xs=e=>`v-${e}`,Ye=e=>e.length===1?e[0]:s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.methods.pipe}),parameters:e}),jf=({context:e,plugin:t,result:r,schema:n})=>{let i=s.propertyAccessExpression({expression:y.v,name:y.schemas.array}),o;if(!n.items)o=s.callExpression({functionName:i,parameters:[Tr({schema:{}})]});else {n=ie({schema:n});let p=n.items.map(a=>{let c=he({context:e,plugin:t,result:r,schema:a});return Ye(c)});p.length===1?o=s.callExpression({functionName:i,parameters:p}):(n.logicalOperator,o=s.callExpression({functionName:i,parameters:[Tr({schema:{}})]}));}return n.minItems===n.maxItems&&n.minItems!==void 0?o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:y.actions.length}),parameters:[s.valueToExpression({value:n.minItems})]}):(n.minItems!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:s.identifier({text:"min"})}),parameters:[s.valueToExpression({value:n.minItems})]})),n.maxItems!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:s.identifier({text:"max"})}),parameters:[s.valueToExpression({value:n.maxItems})]}))),o},Af=({schema:e})=>typeof e.const=="boolean"?s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.literal}),parameters:[s.ots.boolean(e.const)]}):s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.boolean})}),Ef=({context:e,schema:t})=>{let r=[],n=false;for(let o of t.items??[])o.type==="string"&&typeof o.const=="string"?r.push(s.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(n=true);if(!r.length)return Tr({schema:{}});let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.picklist}),parameters:[s.arrayLiteralExpression({elements:r,multiLine:false})]});return n&&(i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.nullable}),parameters:[i]})),i},Nf=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.never})}),kf=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.null})}),Ir=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},vf=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.literal}),parameters:[s.ots.number(e.const)]});let r=[],n=s.callExpression({functionName:t?s.propertyAccessExpression({expression:y.v,name:y.schemas.bigInt}):s.propertyAccessExpression({expression:y.v,name:y.schemas.number})});if(r.push(n),!t&&e.type==="integer"){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.integer})});r.push(i);}if(e.exclusiveMinimum!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.gtValue}),parameters:[Ir({isBigInt:t,value:e.exclusiveMinimum})]});r.push(i);}else if(e.minimum!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.minValue}),parameters:[Ir({isBigInt:t,value:e.minimum})]});r.push(i);}if(e.exclusiveMaximum!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.ltValue}),parameters:[Ir({isBigInt:t,value:e.exclusiveMaximum})]});r.push(i);}else if(e.maximum!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.maxValue}),parameters:[Ir({isBigInt:t,value:e.maximum})]});r.push(i);}return Ye(r)},$f=({context:e,plugin:t,result:r,schema:n})=>{let i=[],o=n.required??[];for(let a in n.properties){let c=n.properties[a],m=o.includes(a),f=he({context:e,optional:!m,plugin:t,result:r,schema:c});ae.lastIndex=0;let l;ae.test(a)?l=a.startsWith("-")?h__default.default.factory.createStringLiteral(a):h__default.default.factory.createNumericLiteral(a):l=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(l=`'${a}'`),i.push(s.propertyAssignment({initializer:Ye(f),name:l}));}let p=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.object}),parameters:[h__default.default.factory.createObjectLiteralExpression(i,true)]});return {anyType:y.types.GenericSchema.text,expression:p}},wf=({schema:e})=>{if(typeof e.const=="string")return s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.literal}),parameters:[s.ots.string(e.const)]});let t=[],r=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.string})});if(t.push(r),e.format)switch(e.format){case "date":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.isoDate})}));break;case "date-time":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.isoDateTime})}));break;case "ipv4":case "ipv6":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.ip})}));break;case "uri":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.url})}));break;case "email":case "time":case "uuid":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:s.identifier({text:e.format})})}));break}if(e.minLength===e.maxLength&&e.minLength!==void 0){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.length}),parameters:[s.valueToExpression({value:e.minLength})]});t.push(n);}else {if(e.minLength!==void 0){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.minLength}),parameters:[s.valueToExpression({value:e.minLength})]});t.push(n);}if(e.maxLength!==void 0){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.maxLength}),parameters:[s.valueToExpression({value:e.maxLength})]});t.push(n);}}if(e.pattern){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.regex}),parameters:[s.regularExpressionLiteral({text:e.pattern})]});t.push(n);}return Ye(t)},qf=({context:e,plugin:t,result:r,schema:n})=>{if(n.const&&Array.isArray(n.const)){let i=n.const.map(p=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.literal}),parameters:[s.valueToExpression({value:p})]}));return s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.tuple}),parameters:[s.arrayLiteralExpression({elements:i})]})}if(n.items){let i=n.items.map(p=>{let a=he({context:e,plugin:t,result:r,schema:p});return Ye(a)});return s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.tuple}),parameters:[s.arrayLiteralExpression({elements:i})]})}return Tr({schema:{}})},Mf=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.undefined})}),Tr=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.unknown})}),Ff=({schema:e})=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.void})}),Ia=({context:e,plugin:t,result:r,schema:n})=>{switch(n.type){case "array":return {expression:jf({context:e,plugin:t,result:r,schema:n})};case "boolean":return {expression:Af({schema:n})};case "enum":return {expression:Ef({context:e,schema:n})};case "integer":case "number":return {expression:vf({schema:n})};case "never":return {expression:Nf({schema:n})};case "null":return {expression:kf({schema:n})};case "object":return $f({context:e,plugin:t,result:r,schema:n});case "string":return {expression:wf({schema:n})};case "tuple":return {expression:qf({context:e,plugin:t,result:r,schema:n})};case "undefined":return {expression:Mf({schema:n})};case "unknown":return {expression:Tr({schema:n})};case "void":return {expression:Ff({schema:n})}}},Lf=({context:e,operation:t,plugin:r,result:n})=>{if(t.body&&he({$ref:k({case:"camelCase",config:e.config,id:t.id,type:"data"}),context:e,plugin:r,result:n,schema:t.body.schema}),t.parameters)for(let i in t.parameters){let o=t.parameters[i];for(let p in o){let a=o[p];he({$ref:k({case:"camelCase",config:e.config,id:t.id,parameterId:a.name,type:"parameter"}),context:e,plugin:r,result:n,schema:a.schema});}}if(t.responses){let{response:i}=Ee(t);i&&he({$ref:k({case:"camelCase",config:e.config,id:t.id,type:"response"}),context:e,plugin:r,result:n,schema:i});}},he=({$ref:e,context:t,optional:r,plugin:n,result:i,schema:o})=>{let p=t.file({id:Jt}),a,c,m=[];if(e&&(i.circularReferenceTracker.add(e),c=p.identifier({$ref:e,create:true,nameTransformer:xs,namespace:"value"})),o.$ref){let f=i.circularReferenceTracker.has(o.$ref),l=p.identifier({$ref:o.$ref,nameTransformer:xs,namespace:"value"});if(!l.name){let u=t.resolveIrRef(o.$ref),d=he({$ref:o.$ref,context:t,plugin:n,result:i,schema:u});m.push(...d),l=p.identifier({$ref:o.$ref,nameTransformer:xs,namespace:"value"});}if(l.name){let u=s.identifier({text:l.name});if(f){let d=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.lazy}),parameters:[s.arrowFunction({statements:[s.returnStatement({expression:u})]})]});m.push(d),i.hasCircularReference=true;}else m.push(u);}}else if(o.type){let f=Ia({context:t,plugin:n,result:i,schema:o});a=f.anyType,m.push(f.expression);}else if(o.items)if(o=ie({schema:o}),o.items){let f=o.items.map(l=>{let u=he({context:t,plugin:n,result:i,schema:l});return Ye(u)});if(o.logicalOperator==="and"){let l=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.intersect}),parameters:[s.arrayLiteralExpression({elements:f})]});m.push(l);}else {let l=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.union}),parameters:[s.arrayLiteralExpression({elements:f})]});m.push(l);}}else {let f=he({context:t,plugin:n,result:i,schema:o});m.push(...f);}else {let f=Ia({context:t,plugin:n,result:i,schema:{type:"unknown"}});a=f.anyType,m.push(f.expression);}if(e&&i.circularReferenceTracker.delete(e),m.length&&o.accessScope==="read"){let f=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.readonly})});m.push(f);}if(m.length){let f;if(o.default!==void 0){let l=o.type==="integer"&&o.format==="int64";f=Ir({isBigInt:l,value:o.default}),f&&(m=[s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.optional}),parameters:[Ye(m),f]})]);}r&&!f&&(m=[s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.optional}),parameters:[Ye(m)]})]);}if(c&&c.name&&c.created){let f=s.constVariable({comment:n.comments?Oe({schema:o}):void 0,exportConst:true,expression:Ye(m),name:c.name,typeName:i.hasCircularReference?s.propertyAccessExpression({expression:y.v,name:a||y.types.GenericSchema.text}):void 0});return p.add(f),[]}return m},Ta=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:Jt,identifierCase:"camelCase",path:t.output}).import({alias:y.v.text,module:"valibot",name:"*"}),e.subscribe("operation",({operation:n})=>{Lf({context:e,operation:n,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false}});}),e.subscribe("parameter",({$ref:n,parameter:i})=>{he({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:i.schema});}),e.subscribe("requestBody",({$ref:n,requestBody:i})=>{he({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:i.schema});}),e.subscribe("schema",({$ref:n,schema:i})=>{he({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:i});});};var bs={_handler:Ta,_handlerLegacy:()=>{},_tags:["validator"],comments:true,exportFromIndex:false,name:"valibot",output:"valibot"};var Os={_handler:ko,_handlerLegacy:()=>{},_tags:["validator"],comments:true,exportFromIndex:false,name:"zod",output:"zod"};var mn={"@hey-api/client-axios":Sn,"@hey-api/client-fetch":Rn,"@hey-api/client-next":In,"@hey-api/client-nuxt":Tn,"@hey-api/schemas":Hn,"@hey-api/sdk":ts,"@hey-api/transformers":rs,"@hey-api/typescript":ps,"@tanstack/angular-query-experimental":fs,"@tanstack/react-query":ls,"@tanstack/solid-query":us,"@tanstack/svelte-query":ds,"@tanstack/vue-query":ys,fastify:hs,"legacy/angular":Cn,"legacy/axios":Pn,"legacy/fetch":jn,"legacy/node":An,"legacy/xhr":En,valibot:bs,zod:Os};var Ca=["@hey-api/typescript","@hey-api/sdk"],Cr={enabled:false,interval:1e3,timeout:6e4},Bf=e=>{let t={path:"",validate_EXPERIMENTAL:false,watch:Cr};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path!==void 0||e.input.organization!==void 0)?(t={...t,path:"https://get.heyapi.dev",...e.input},t.watch!==void 0&&(t.watch=Pa(t))):t={...t,path:e.input},t.validate_EXPERIMENTAL===true&&(t.validate_EXPERIMENTAL="warn"),e.watch!==void 0&&t.watch.enabled===Cr.enabled&&t.watch.interval===Cr.interval&&t.watch.timeout===Cr.timeout&&(t.watch=Pa({path:t.path,watch:e.watch})),t},Vf=({pluginConfigs:e,userPlugins:t,userPluginsConfig:r})=>{let n=new Set,i=new Set,o={},p=a=>{if(n.has(a))throw new Error(`Circular reference detected at '${a}'`);if(!i.has(a)){if(n.add(a),!e[a])throw new Error(`unknown plugin dependency "${a}" - do you need to register a custom plugin with this name?`);let m=mn[a],f=r[a];if(f&&m){let u=Object.keys(f).find(d=>d.startsWith("_"));if(u)throw new Error(`cannot register plugin "${a}" - attempting to override a native plugin option "${u}"`)}let l={_dependencies:[],...m,...f};if(l._infer){let u={ensureDependency:d=>{typeof d=="string"&&!l._dependencies.includes(d)&&(l._dependencies=[...l._dependencies,d]);},pluginByTag:(d,x)=>{for(let g of t){let b=mn[g]||e[g];if(b&&b._tags?.includes(d)&&g!==a)return g}throw new Error(x||`missing plugin - no plugin with tag "${d}" found`)}};l._infer(l,u);}for(let u of l._dependencies)p(u);n.delete(a),i.add(a),o[a]=l;}};for(let a of t)p(a);return {pluginOrder:Array.from(i),plugins:o}},Kf=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:"",tsConfigPath:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t},Wf=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e._tags&&e._tags.includes("client"),Uf=e=>{let t={},r=Ca;e.plugins&&(e.plugins=e.plugins.filter(i=>typeof i=="string"&&i||typeof i!="string"&&i.name),e.plugins.length===1&&Wf(e.plugins[0])?r=[...Ca,...e.plugins]:r=e.plugins);let n=r.map(i=>typeof i=="string"?i:(i.name&&(t[i.name]=i),i.name)).filter(Boolean);return Vf({pluginConfigs:{...t,...mn},userPlugins:n,userPluginsConfig:t})},Pa=e=>{let t={...Cr};return typeof e.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},Xf=(e,t)=>({...e||{},...t||{}}),ja=(e,t)=>{let r=e||{},n=t||{},i={...r,...n};return typeof i.logs=="object"&&(i.logs=Xf(r.logs,n.logs)),i},Qf=async e=>{let t;if(e?.configFile){let i=e.configFile.split(".");t=i.slice(0,i.length-1).join(".");}let{config:r}=await c12.loadConfig({configFile:t,name:"openapi-ts"});return (Array.isArray(e)?e:Array.isArray(r)?r.map(i=>ja(i,e)):[ja(r,e)]).map(i=>{let{base:o,configFile:p="",dryRun:a=false,experimentalParser:c=true,exportCore:m=true,name:f,request:l,useOptions:u=true}=i,d=Is(i);d.level==="debug"&&console.warn("userConfig:",i);let x=Bf(i),g=Kf(i);if(!x.path)throw new Error("missing input - which OpenAPI specification should we use to generate your output?");if(!g.path)throw new Error("missing output - where should we generate your output?");u||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),g.path=Bt__default.default.resolve(process.cwd(),g.path);let b=Es({...Uf(i),base:o,configFile:p,dryRun:a,experimentalParser:c,exportCore:false,input:x,logs:d,name:f,output:g,request:l,useOptions:u});return b.exportCore=U(b)?m:false,d.level==="debug"&&console.warn("config:",b),b})};
exports.getSpec=$a;exports.initConfigs=Qf;exports.parseOpenApiSpec=om;//# sourceMappingURL=internal.cjs.map
//# sourceMappingURL=internal.cjs.map